!function(e){"use strict";function n(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}var i,a,r;function t(e,t){(i(e,t)?r:a)(e,t)}r="classList"in document.documentElement?(i=function(e,t){return e.classList.contains(t)},a=function(e,t){e.classList.add(t)},function(e,t){e.classList.remove(t)}):(i=function(e,t){return n(t).test(e.className)},a=function(e,t){i(e,t)||(e.className=e.className+" "+t)},function(e,t){e.className=e.className.replace(n(t)," ")});var o={hasClass:i,addClass:a,removeClass:r,toggleClass:t,has:i,add:a,remove:r,toggle:t};"function"==typeof define&&define.amd?define(o):e.classie=o}(window);var SCM=SCM||{};SCM.JSUtility=function($,$win,$body,undefined){var publicApi={equalHeights:equalHeights,debounce:debounce,smoothScrollLinks:smoothScrollLinks,addStateToggle:addStateToggle,toggleVisibility:toggleVisibility,toggleVisibilityMobile:toggleVisibilityMobile,toggleTabs:toggleTabs,removeEmptyTabs:removeEmptyTabs,toggleHoverState:toggleHoverState,logErrors:logErrors,accordion:accordion,printPortionOfPage:printPortionOfPage,triggerClickOnAnotherElement:triggerClickOnAnotherElement,scrollToLocation:scrollToLocation,openDeepLinkedTab:openDeepLinkedTab};return publicApi;function equalHeights(e,n){var i=$(e);function t(){if(viewport=updateViewportDimensions(),i.attr("style",""),i.length&&viewport.width>n){var t=0;i.attr("style",""),i.each(function(){var e=$(this).outerHeight();t<e&&(t=e)}),i.css("height",t)}}var a=debounce(function(){t()},100,!1);t(),$win.resize(function(){a()})}function triggerClickOnAnotherElement(){$("[data-trigger-click]").click(function(e){e.preventDefault();var t=$($(this).attr("data-trigger-click"))[0];t&&t.click()})}function smoothScrollLinks(){$(".smooth-scroll").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=$(this.hash),t=e.offset().top-100;if((e=e.length?e:$("[name="+this.hash.slice(1)+"]")).length)return $("html,body").animate({scrollTop:t},500),!1}})}function scrollToLocation(e,t){var n=$(e);if(t=t||500,n.length){var i=n.offset().top-92;$("html,body").animate({scrollTop:i},t)}}function addStateToggle(e,t,n,i,a){var r=$(e),o="active-state",s="target-active",l=$("html, body"),c=t.replace(/.|#/,"")+"-active",d="click."+c,u=n||".close",p=$(t).find(u);function h(){$(t).removeClass(o),r.removeClass(s),i&&l.removeClass(c)}i=i||!1,a=a||!1,r.click(function(e){e.preventDefault(),$(t).toggleClass(o),r.toggleClass(s),i&&l.toggleClass(c)}),l.off(d),l.on(d,function(e){$(e.target).closest(r.add($(t))).length||h()}),$(document).ajaxComplete(function(){a&&h()}),p.click(function(){h()})}function toggleVisibility(){var e=$("[data-tog-target]");e.click(function(){var e=$(this),t=$(e.attr("data-tog-target"));e.toggleClass("target-active"),t.slideToggle({duration:300,done:function(){t.css("overflow","inherit")}}).toggleClass("active")})}function openDeepLinkedTab(){var e;if(location.hash&&(e=window.location.hash.substr(1)),e){var t=$('[data-toggle="#'+e+'"]');t.length&&(t.hasClass("target-active")||t.click(),setTimeout(function(){var e=t.offset().top-92;$("html, body").animate({scrollTop:e},"200")},210))}}function accordion(){var e=$(".accordion");if(e.length){var r="target-active",o="active",s={duration:200,done:function(){$(this).css("overflow","inherit")}};e.each(function(){var e=$(this),i=e.find("[data-toggle]"),a=e.find("[data-tab]");i.click(function(){var e=$(this),t=e.attr("data-toggle"),n=$(t);e.hasClass(r)?(e.removeClass(r),n.removeClass(o),n.slideUp(s)):(window.location.hash=t,window.scroll(0,n[0]),i.removeClass(r),a.removeClass(o),a.slideUp(s),e.addClass(r),n.addClass(o),n.slideDown(s))})}),openDeepLinkedTab()}}function toggleVisibilityMobile(n,e){function t(){var e=$(this),t=$(e.attr("data-mobile-tog-target"));".toolbar-search-trigger"===n&&$(".header-wrap").addClass("z2010"),e.toggleClass(a),t.slideToggle({duration:300,done:function(){t.css("overflow","inherit"),$(".toolbar-search-trigger").hasClass("target-active")||$(".header-wrap").removeClass("z2010")}}).toggleClass("active")}var i=$(n),a="target-active";var r=debounce(function(){viewport=updateViewportDimensions(),viewport.width>e?(i.off("click.tog-vis"),i.removeClass(a),i.each(function(){$($(this).attr("data-mobile-tog-target")).removeAttr("style").removeClass("active")})):(i.off("click.tog-vis"),i.on("click.tog-vis",t))},150,!1);r(),$win.resize(function(){r()})}function toggleTabs(e,t,n,i,a){var r,o,s=$(e);if(s.length){var l=s.find(t),c=$(n),d="target-tab-active",u="tab-active";a=a||!1;r=i?$(i):l.first(),o=r.attr("href")||r.attr("data-href"),l.removeClass(d).filter(r).addClass(d),c.removeClass(u).filter(o).addClass(u),l.click(function(e){var t=$(this),n=$(t.attr("href")||t.attr("data-href"));t.is("a")&&e.preventDefault();function i(){c.removeClass(u),n.addClass(u),l.removeClass(d),t.addClass(d)}a&&t.hasClass(d)?(l.removeClass(d),c.removeClass(u)):i()})}}function removeEmptyTabs(e,r,o){r=r||[],$(e).each(function(){var e=$(this),t=e.attr("href"),n=$(t);if(-1<r.indexOf(t))return!0;var i=o?n.find("*").not(o):n.find("*");if(i.length<10){var a=i.text();0===(a!==undefined?$.trim(a):1).length&&(e.attr("style","display: none!important").addClass("tab-no-content"),n.attr("style","display: none!important"))}})}function toggleHoverState(e,t,n){var i,a=$(e);t=t||150,n=n||"target-active",a.hover(function(){var e=$(this);i=setTimeout(function(){e.addClass(n)},t)},function(){clearTimeout(i);var e=$(this);setTimeout(function(){e.removeClass(n)},t)})}function logErrors(jqXHR,textStatus,errorThrown){if(window.console){var err=eval("("+jqXHR.responseText+")");console.log("error: "+err.Messages),console.log("status: "+textStatus)}}function printPortionOfPage(e,t){var n="print--hide-all",i="print--section",a=$(t),r=$(e);a.click(function(){$body.addClass(n),r.addClass(i),setTimeout(function(){window.print()},100)})}function debounce(i,a,r){var o;return function(){var e=this,t=arguments,n=r&&!o;clearTimeout(o),o=setTimeout(function(){o=null,r||i.apply(e,t)},a),n&&i.apply(e,t)}}}(jQuery,jQuery(window),jQuery("body")),function(l){"use strict";function n(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function e(e,t){this.el=e,this.options=n({},this.options),n(this.options,t),this._init()}e.prototype.options={newTab:!0,stickyPlaceholder:!0,onChange:function(e){return!1}},e.prototype._init=function(){var e=this.el.querySelector("option[selected]");this.hasDefaultPlaceholder=e&&e.disabled,this.selectedOpt=e||this.el.querySelector("option"),this._createSelectEl(),this.selOpts=[].slice.call(this.selEl.querySelectorAll("li[data-option]")),this.selOptsCount=this.selOpts.length,this.current=this.selOpts.indexOf(this.selEl.querySelector("li.cs-selected"))||-1,this.selPlaceholder=this.selEl.querySelector("span.cs-placeholder"),this._initEvents()},e.prototype._createSelectEl=function(){function n(e){var t="",n="",i="";return!e.selectedOpt||this.foundSelected||this.hasDefaultPlaceholder||(n+="cs-selected ",this.foundSelected=!0),e.getAttribute("data-class")&&(n+=e.getAttribute("data-class")),e.getAttribute("data-link")&&(i="data-link="+e.getAttribute("data-link")),""!==n&&(t='class="'+n+'" '),"<li "+t+i+' data-option data-value="'+e.value+'"><span>'+e.textContent+"</span></li>"}var i="";[].slice.call(this.el.children).forEach(function(e){if(!e.disabled){var t=e.tagName.toLowerCase();"option"===t?i+=n(e):"optgroup"===t&&(i+='<li class="cs-optgroup"><span>'+e.label+"</span><ul>",[].slice.call(e.children).forEach(function(e){i+=n(e)}),i+="</ul></li>")}});var e=SCM.SiteJS.getCookie("persistentSearchFilters");0===e.length&&(e=l.location.search);var t=e.match(/f_SiteID=([^&]*)/),a=this.selectedOpt.textContent,r="";if(t){var o=t[1];a=SCM.SiteJS.getGlobalSearchDropdownDisplayValue(o)}else App.isLucy&&(a="JAMA Network Open",r=' data-value="214"');(App.isLearningContent||App.isLearningSelfServe)&&(a="JN Learning",r=' data-value="L*"',$(".site-search-bar").find(".search-term").attr("placeholder","Search for CME by topic"));var s='<div class="cs-options"><ul>'+i+"</ul></div>";this.selEl=document.createElement("div"),this.selEl.className=this.el.className,this.selEl.tabIndex=this.el.tabIndex,this.selEl.innerHTML='<span class="cs-placeholder is-a"'+r+">"+a+"</span>"+s,this.el.parentNode.insertBefore(this.selEl,this.el.parentNode.firstChild),this.selEl.appendChild(this.el)},e.prototype._initEvents=function(){var n=this;this.selPlaceholder.addEventListener("click",function(){n._toggleSelect()}),this.selOpts.forEach(function(e,t){e.addEventListener("click",function(){n.current=t,n._changeOption(),n._toggleSelect()})}),document.addEventListener("click",function(e){var t=e.target;n._isOpen()&&t!==n.selEl&&!function(e,t){if(!e)return!1;for(var n=e.target||e.srcElement||e||!1;n&&n!=t;)n=n.parentNode||!1;return!1!==n}(t,n.selEl)&&n._toggleSelect()}),this.selEl.addEventListener("keydown",function(e){switch(e.keyCode||e.which){case 38:e.preventDefault(),n._navigateOpts("prev");break;case 40:e.preventDefault(),n._navigateOpts("next");break;case 32:e.preventDefault(),n._isOpen()&&void 0!==n.preSelCurrent&&-1!==n.preSelCurrent&&n._changeOption(),n._toggleSelect();break;case 13:e.preventDefault(),n._isOpen()&&void 0!==n.preSelCurrent&&-1!==n.preSelCurrent&&(n._changeOption(),n._toggleSelect());break;case 27:e.preventDefault(),n._isOpen()&&n._toggleSelect()}})},e.prototype._navigateOpts=function(e){this._isOpen()||this._toggleSelect();var t=void 0!==this.preSelCurrent&&-1!==this.preSelCurrent?this.preSelCurrent:this.current;("prev"===e&&0<t||"next"===e&&t<this.selOptsCount-1)&&(this.preSelCurrent="next"===e?t+1:t-1,this._removeFocus(),classie.add(this.selOpts[this.preSelCurrent],"cs-focus"))},e.prototype._toggleSelect=function(){this._removeFocus(),this._isOpen()?(-1!==this.current&&(this.selPlaceholder.textContent=this.selOpts[this.current].textContent),classie.remove(this.selEl,"cs-active")):(this.hasDefaultPlaceholder&&this.options.stickyPlaceholder&&(this.selPlaceholder.textContent=this.selectedOpt.textContent),classie.add(this.selEl,"cs-active"))},e.prototype._changeOption=function(){void 0!==this.preSelCurrent&&-1!==this.preSelCurrent&&(this.current=this.preSelCurrent,this.preSelCurrent=-1);var e=this.selOpts[this.current];this.selPlaceholder.textContent=e.textContent;var t=$(".site-search-bar").find(".search-term");"JN Learning"===this.selPlaceholder.textContent?t.attr("placeholder","Search for CME by topic"):t.attr("placeholder","Enter Search Term"),this.el.value=e.getAttribute("data-value");var n=this.selEl.querySelector("li.cs-selected");n&&classie.remove(n,"cs-selected"),classie.add(e,"cs-selected"),e.getAttribute("data-link")&&(this.options.newTab?l.open(e.getAttribute("data-link"),"_blank"):l.location=e.getAttribute("data-link")),this.options.onChange(this.el.value)},e.prototype._isOpen=function(e){return classie.has(this.selEl,"cs-active")},e.prototype._removeFocus=function(e){var t=this.selEl.querySelector("li.cs-focus");t&&classie.remove(t,"cs-focus")},l.SelectFx=e}(window),jQuery.fn.fastLiveFilter=function(e,r){r=r||{},e=jQuery(e);var t,o=this,n="",i=r.timeout||0,s=r.callback||function(){},l=r.type||"filter",c=e.children(),d=c.length,u=0<d?c[0].style.display:"block";if(s(d),"search"===l)for(var a=0;a<d;a++)c[a].style.display="none";return o.change(function(){for(var e,t,n=o.val().toLowerCase(),i=0,a=0;a<d;a++)e=c[a],t=r.selector?$(e).find(r.selector).text():e.textContent||e.innerText||"","search"!==l||0<n.trim().length?0<=t.toLowerCase().indexOf(n)?("none"==e.style.display&&(e.style.display=u),i++):"none"!=e.style.display&&(e.style.display="none"):e.style.display="none";return s(i),!1}).keydown(function(){clearTimeout(t),t=setTimeout(function(){o.val()!==n&&(n=o.val(),o.change())},i)}),this},$("#filter_input").fastLiveFilter("#filter_list"),$("#search_input").fastLiveFilter("#search_list",{type:"search"});var SCM=SCM||{};!function(e,t){var i={},a=i.hasOwnProperty;e.subscribe=function(e,t){a.call(i,e)||(i[e]=[]);var n=i[e].push(t)-1;return{remove:function(){delete i[e][n]}}},e.publish=function(e,n){a.call(i,e)&&t.each(i[e],function(e,t){t(void 0!==n?n:{})})}}(SCM.EventEmitter=SCM.EventEmitter||{},jQuery);var SCM=SCM||{};!function(c,i){var a="";c.getGdprCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){var a=n[i].trim();if(0===a.indexOf(t))return a.substring(t.length,a.length)}return""},c.createGdprCookie=function(e,t,n){var i,a=c.getCookieName();if(n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),i="; expires="+r.toGMTString()}else i="";var o=a+"="+encodeURIComponent(t)+i+"; samesite=lax; secure; path=/",s=c.getCookieDomain(),l=null;s&&(document.cookie=o+";domain="+s,l=c.getGdprCookie(a)),s&&l||(document.cookie=o)},c.getCookieName=function(){if(a)return a;var e=i("#hdnClientIdGdpr").val(),t=c.getCookieDomain(),n="GDPR_";return e&&(n=n+e+"_"),t&&(n+=t),n},c.getCookieDomain=function(){return i("#hdnDomainGdpr").val()},c.hideGdprBanner=function(){var e=i(".gdpr-cookie-wrapper");if(navigator.cookieEnabled){var t=c.getCookieName();c.getGdprCookie(t)&&e.hide()}else e.hide()},c.gdprAcceptLinkClick=function(){i(".js-gdpr-cookie-acceptLink, .js-gdpr-cookie-close").on("click",function(e){c.createGdprCookie("GDPR_",!0,365),c.hideGdprBanner(),SCM.ClientStatsMaster&&SCM.ClientStatsMaster.trackGdprCookieAcceptance&&SCM.ClientStatsMaster.trackGdprCookieAcceptance("1050","0","Cookie Acceptance")})},c.init=function(e){e&&(a=e),i(".gdpr-cookie-wrapper").show(),c.gdprAcceptLinkClick(),c.hideGdprBanner()}}(SCM.gdprCookieBanner=SCM.gdprCookieBanner||{},jQuery);var ArtMetric={fullVersion:function($dest,routeUrl){if($dest.find(".widget-ArticleLevelMetrics").length<1){var ctHtmlLabels=function(e){return function(e){e.on("draw",function(e){if("label"===e.type){var t=e.element._node.childNodes[0];t.innerHTML=t.innerText}})}},baseSiteUrl=$("#hfSiteURL");void 0!==baseSiteUrl&&void 0!==baseSiteUrl.val()&&""!=baseSiteUrl&&(routeUrl="//"+baseSiteUrl.val()+routeUrl),$.ajax({url:routeUrl,datatype:"HTML",success:function(e){$dest.prepend(e),setTimeout(function(){if(void 0!==window.ChartistData){var e={lineSmooth:!1,showArea:!0,low:0,plugins:[ctHtmlLabels()]},t=[["screen and (max-width: 1024px)",{axisX:{labelInterpolationFnc:function(e){return e.slice(0,3)}}}],["screen and (min-width: 1px)",{axisX:{labelInterpolationFnc:function(e){return e.replace(" ","<br />")}},plugins:[ctHtmlLabels()]}]];ArtMetric.createChart(".ct-chart",window.ChartistData.data,e,t)}},200),$(".artmet-dimensions").length&&window.__dimensions_embed&&window.__dimensions_embed.addBadges&&window.__dimensions_embed.addBadges()},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})}},limitLabels:function(){var e=$(".ct-horizontal.ct-label"),t=e.length,n=Math.ceil(t/8),i=1;e.not(":eq(0)").each(function(){i%n!=0&&$(this).hide(),i++})},createChart:function(e,t,n,i){var a=new Chartist.Line(e,t,n,i),r=0;a.on("created",function(){r=0,ArtMetric.limitLabels()}),a.on("draw",function(e){"line"!==e.type&&"point"!==e.type&&"area"!==e.type||r++,"line"===e.type?e.element.animate({opacity:{begin:25*r+150,dur:250,from:0,to:1}}):"point"===e.type?e.element.animate({x1:{begin:25*r,dur:250,from:e.x-10,to:e.x,easing:"easeOutQuart"},x2:{begin:25*r,dur:250,from:e.x-10,to:e.x,easing:"easeOutQuart"},opacity:{begin:25*r,dur:250,from:0,to:1,easing:"easeOutQuart"}}):"area"===e.type&&e.element.animate({opacity:{begin:25*r+250,dur:300,from:0,to:1}})})},triggerModal:function(e,t){var n="/ThirdParty/ArticleLevelMetricsDetails?articleId="+t+"&showDimensionsBadge="+($(".artmet-dimensions").length?"true":"false");ArtMetric.fullVersion(e,n);var i=$(".artmet-modal"),a=$("body");i.css({display:"block",opacity:1}),a.addClass("metrics-modal-open")},closeModal:function(){var e=$(".artmet-modal"),t=$("body");e.attr("style",""),t.removeClass("metrics-modal-open")},eventsToClose:function(){$(".artmet-close-modal").click(function(){ArtMetric.closeModal()}),$(".artmet-modal").click(function(){$(event.target).closest(".artmet-modal-contents").length||ArtMetric.closeModal()})}};$(document).ready(function(){$(".artmet-modal-trigger, .artmet-condensed-stats .artmet-views").click(function(){var e=$(".artmet-modal-trigger").attr("data-article-id");ArtMetric.triggerModal($(".artmet-modal-contents"),e)}),ArtMetric.eventsToClose()});var App=App||{};App.notifyViewportChange=debounce(function(){App.cachedViewport!==App.activeViewport&&(App.cachedViewport=App.activeViewport,SCM.EventEmitter.publish("viewport-changed"))},50,!1),function(e,o){function t(){o(".title-image").width()+o("#BodyContent_Header_divAccessProvidedBy").width()+o(".auth--provided-by").width()+30>o(window).width()?o("#BodyContent_Header_divAccessProvidedBy").hide():o("#BodyContent_Header_divAccessProvidedBy").show()}e.addJnLogoParamToRefererUrl=function(){if(window.history){var e=window.location.href+(window.location.href.indexOf("?")<0?"?":"&")+"appId=scweb";window.history.replaceState(null,null,e)}},e.queryParameters=function(){var e={};if(window.location.search)for(var t=window.location.search.slice(1).split("&"),n=0;n<t.length;n++){var i=t[n].split("=");e[i[0]]=decodeURI(i[1])}return e},e.init=function(){SCM.JSUtility.addStateToggle(".nav-toggler",".nav",".close",!0),SCM.JSUtility.addStateToggle(".auth--trigger",".auth--dropdown",".close",!0),SCM.JSUtility.toggleVisibilityMobile(".toolbar-search-trigger",App.mobileUpperBreakpoint),t(),o(window).resize(function(){t()}),[].slice.call(document.querySelectorAll("select.cs-select")).forEach(function(e){new SelectFx(e)}),App.isMobile&&o(".nav").on("touchmove",function(e){e.stopPropagation()}),App.isMyAccount&&o(".footer-service-link").click(function(e){-1<this.href.indexOf("myaccount")&&(e.preventDefault(),window.location.hash=this.hash,SCM.JSUtility.openDeepLinkedTab())}),o(".auth--ind-sign-in, .auth--ind-create, .sign-in--personal-link, .sign-in--create-link, .btn--free-cme, .cme-info.no-access a, .quiz-no-access .sign-in, #no-access-follow-collection .sign-in--personal-link, #no-access-follow-collection .sign-in--create-link").click(function(){e.addJnLogoParamToRefererUrl()})},e.windowLoadInit=function(){SCM.JSUtility.toggleVisibilityMobile(".footer-heading",App.mobileUpperBreakpoint),o(".email-signup--submit").click(function(e){e.preventDefault();var t=o(this),n=t.closest(".email-signup"),i=n.find(".email-signup--input").val(),a=n.find(".email-signup--user-message"),r=o(".footer-social-links > a").first().data("emailid");!function(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}(i)?(console.log("ERROR: invalid email address was entered"),a.html("<p style='color: #d71635'>Invalid email address, please try again.</p>")):(console.log("Valid email address was entered"),o.ajax({url:"https://silverchair.emailcampaigns.net/CSB/Public/ProcessHostedForm.aspx",type:"POST",dataType:"html",data:{4711343:i,FormInfo:r},success:function(e){0<=e.search(/Thank/)?(console.log("Submission was a success!"),n.find(".email-signup--input-wrap").hide(),t.hide(),a.html("<p style='color: #449141'>Thank you! You will receive an email shortly to verify your email address.</p>")):(a.html("<p style='color: #d71635'>Unable to submit request, please try again later.</p>"),console.log("unexpected error"))},error:function(e){console.log(e),a.html("<p style='color: #d71635'>Unable to submit request, please try again later.</p>")}}))})},e.bindInterestsButton=function(){o(".js-btn-interests").on("click",function(e){(e.preventDefault(),App.isIndividual)?(App.Collection.setInitialCategories(),o(".manage-interests-modal").foundation("reveal","open"),o(".followed").parent().css("list-style-type","disc").css("color","#000")):(o("#no-access-follow-collection").foundation("reveal","open"),App.Collection.toggleCollectionAlertSignupFlag())})}}(App.Global=App.Global||{},jQuery),function(u,l,a,r){"use strict";!function(e){for(var t=e.length,n=u("head");t--;)0===n.has("."+e[t]).length&&n.append('<meta class="'+e[t]+'" />')}(["foundation-mq-small","foundation-mq-small-only","foundation-mq-medium","foundation-mq-medium-only","foundation-mq-large","foundation-mq-large-only","foundation-mq-xlarge","foundation-mq-xlarge-only","foundation-mq-xxlarge","foundation-data-attribute-namespace"]),u(function(){"undefined"!=typeof FastClick&&void 0!==a.body&&FastClick.attach(a.body)});function c(e,t){if("string"!=typeof e)return u(e,t);if(t){var n;if(t.jquery){if(!(n=t[0]))return t}else n=t;return u(n.querySelectorAll(e))}return u(a.querySelectorAll(e))}function t(e){var t=[];return e||t.push("data"),0<this.namespace.length&&t.push(this.namespace),t.push(this.name),t.join("-")}function n(e){for(var t=e.split("-"),n=t.length,i=[];n--;)0!==n?i.push(t[n]):0<this.namespace.length?i.push(this.namespace,t[n]):i.push(t[n]);return i.reverse().join("-")}function i(n,i){function e(){var e=c(this),t=!e.data(a.attr_name(!0)+"-init");e.data(a.attr_name(!0)+"-init",u.extend({},a.settings,i||n,a.data_options(e))),t&&a.events(this)}var a=this;if(c(this.scope).is("["+this.attr_name()+"]")?e.call(this.scope):c("["+this.attr_name()+"]",this.scope).each(e),"string"==typeof n)return this[n].call(this,i)}l.matchMedia||(l.matchMedia=function(){var t=l.styleMedia||l.media;if(!t){var n,i=a.createElement("style"),e=a.getElementsByTagName("script")[0];i.type="text/css",i.id="matchmediajs-test",e.parentNode.insertBefore(i,e),n="getComputedStyle"in l&&l.getComputedStyle(i,null)||i.currentStyle,t={matchMedium:function(e){var t="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return i.styleSheet?i.styleSheet.cssText=t:i.textContent=t,"1px"===n.width}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}()),function(t){for(var n,a=0,e=["webkit","moz"],i=l.requestAnimationFrame,r=l.cancelAnimationFrame,o=void 0!==t.fx;a<e.length&&!i;a++)i=l[e[a]+"RequestAnimationFrame"],r=r||l[e[a]+"CancelAnimationFrame"]||l[e[a]+"CancelRequestAnimationFrame"];function s(){n&&(i(s),o&&t.fx.tick())}i?(l.requestAnimationFrame=i,l.cancelAnimationFrame=r,o&&(t.fx.timer=function(e){e()&&t.timers.push(e)&&!n&&(n=!0,s())},t.fx.stop=function(){n=!1})):(l.requestAnimationFrame=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-a)),i=l.setTimeout(function(){e(t+n)},n);return a=t+n,i},l.cancelAnimationFrame=function(e){clearTimeout(e)})}(u),l.Foundation={name:"Foundation",version:"5.5.2",media_queries:{small:c(".foundation-mq-small").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"small-only":c(".foundation-mq-small-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),medium:c(".foundation-mq-medium").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"medium-only":c(".foundation-mq-medium-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),large:c(".foundation-mq-large").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"large-only":c(".foundation-mq-large-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xlarge:c(".foundation-mq-xlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"xlarge-only":c(".foundation-mq-xlarge-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xxlarge:c(".foundation-mq-xxlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")},stylesheet:u("<style></style>").appendTo("head")[0].sheet,global:{namespace:r},init:function(e,t,n,i,a){var r=[e,n,i,a],o=[];if(this.rtl=/rtl/i.test(c("html").attr("dir")),this.scope=e||this.scope,this.set_namespace(),t&&"string"==typeof t&&!/reflow/i.test(t))this.libs.hasOwnProperty(t)&&o.push(this.init_lib(t,r));else for(var s in this.libs)o.push(this.init_lib(s,t));return c(l).load(function(){c(l).trigger("resize.fndtn.clearing").trigger("resize.fndtn.dropdown").trigger("resize.fndtn.equalizer").trigger("resize.fndtn.interchange").trigger("resize.fndtn.joyride").trigger("resize.fndtn.magellan").trigger("resize.fndtn.topbar").trigger("resize.fndtn.slider")}),e},init_lib:function(e,t){return this.libs.hasOwnProperty(e)?(this.patch(this.libs[e]),t&&t.hasOwnProperty(e)?(void 0!==this.libs[e].settings?u.extend(!0,this.libs[e].settings,t[e]):void 0!==this.libs[e].defaults&&u.extend(!0,this.libs[e].defaults,t[e]),this.libs[e].init.apply(this.libs[e],[this.scope,t[e]])):(t=t instanceof Array?t:new Array(t),this.libs[e].init.apply(this.libs[e],t))):function(){}},patch:function(e){e.scope=this.scope,e.namespace=this.global.namespace,e.rtl=this.rtl,e.data_options=this.utils.data_options,e.attr_name=t,e.add_namespace=n,e.bindings=i,e.S=this.utils.S},inherit:function(e,t){for(var n=t.split(" "),i=n.length;i--;)this.utils.hasOwnProperty(n[i])&&(e[n[i]]=this.utils[n[i]])},set_namespace:function(){var e=this.global.namespace===r?u(".foundation-data-attribute-namespace").css("font-family"):this.global.namespace;this.global.namespace=e===r||/false/i.test(e)?"":e},libs:{},utils:{S:c,throttle:function(n,i){var a=null;return function(){var e=this,t=arguments;null==a&&(a=setTimeout(function(){n.apply(e,t),a=null},i))}},debounce:function(i,a,r){var o,s;return function(){var e=this,t=arguments,n=r&&!o;return clearTimeout(o),o=setTimeout(function(){o=null,r||(s=i.apply(e,t))},a),n&&(s=i.apply(e,t)),s}},data_options:function(e,t){t=t||"options";var n,i,a,r,o,s,l={},c=(r=e,0<(o=Foundation.global.namespace).length?r.data(o+"-"+t):r.data(t));if("object"==typeof c)return c;function d(e){return"string"==typeof e?u.trim(e):e}for(n=(a=(c||":").split(";")).length;n--;)i=[(i=a[n].split(":"))[0],i.slice(1).join(":")],/true/i.test(i[1])&&(i[1]=!0),/false/i.test(i[1])&&(i[1]=!1),s=i[1],isNaN(s-0)||null===s||""===s||!1===s||!0===s||(-1===i[1].indexOf(".")?i[1]=parseInt(i[1],10):i[1]=parseFloat(i[1])),2===i.length&&0<i[0].length&&(l[d(i[0])]=d(i[1]));return l},register_media:function(e,t){Foundation.media_queries[e]===r&&(u("head").append('<meta class="'+t+'"/>'),Foundation.media_queries[e]=function(e){return("string"==typeof e||e instanceof String)&&(e=e.replace(/^['\\/"]+|(;\s?})+|['\\/"]+$/g,"")),e}(u("."+t).css("font-family")))},add_custom_rule:function(e,t){t===r&&Foundation.stylesheet?Foundation.stylesheet.insertRule(e,Foundation.stylesheet.cssRules.length):Foundation.media_queries[t]!==r&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[t]+"{ "+e+" }",Foundation.stylesheet.cssRules.length)},image_loaded:function(e,t){var n=this,i=e.length;0!==i&&!function(e){for(var t=e.length-1;0<=t;t--)if(e.attr("height")===r)return!1;return!0}(e)||t(e),e.each(function(){!function(e,t){function n(){t(e[0])}e.attr("src")?e[0].complete||4===e[0].readyState?n():function(){if(this.one("load",n),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var e=this.attr("src"),t=e.match(/\?/)?"&":"?";t+="random="+(new Date).getTime(),this.attr("src",e+t)}}.call(e):n()}(n.S(this),function(){0===(i-=1)&&t(e)})})},random_str:function(){return this.fidx||(this.fidx=0),this.prefix=this.prefix||[this.name||"F",(+new Date).toString(36)].join("-"),this.prefix+(this.fidx++).toString(36)},match:function(e){return l.matchMedia(e).matches},is_small_up:function(){return this.match(Foundation.media_queries.small)},is_medium_up:function(){return this.match(Foundation.media_queries.medium)},is_large_up:function(){return this.match(Foundation.media_queries.large)},is_xlarge_up:function(){return this.match(Foundation.media_queries.xlarge)},is_xxlarge_up:function(){return this.match(Foundation.media_queries.xxlarge)},is_small_only:function(){return!(this.is_medium_up()||this.is_large_up()||this.is_xlarge_up()||this.is_xxlarge_up())},is_medium_only:function(){return this.is_medium_up()&&!this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_large_only:function(){return this.is_medium_up()&&this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xxlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&this.is_xxlarge_up()}}},u.fn.foundation=function(){var e=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(e)),this})}}(jQuery,window,window.document),function(c,d,t){"use strict";function l(e){var t=/fade/i.test(e),n=/pop/i.test(e);return{animate:t||n,pop:n,fade:t}}Foundation.libs.reveal={name:"reveal",version:"5.5.2",locked:!1,settings:{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!0,dismiss_modal_class:"close-reveal-modal",multiple_opened:!1,bg_class:"reveal-modal-bg",root_element:"body",open:function(){},opened:function(){},close:function(){},closed:function(){},on_ajax_error:c.noop,bg:c(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(e,t,n){c.extend(!0,this.settings,t,n),this.bindings(t,n)},events:function(e){var r=this,o=r.S;return o(this.scope).off(".reveal").on("click.fndtn.reveal","["+this.add_namespace("data-reveal-id")+"]:not([disabled])",function(e){if(e.preventDefault(),!r.locked){var t=o(this),n=t.data(r.data_attr("reveal-ajax")),i=t.data(r.data_attr("reveal-replace-content"));if(r.locked=!0,void 0===n)r.open.call(r,t);else{var a=!0===n?t.attr("href"):n;r.open.call(r,t,{url:a},{replaceContentSel:i})}}}),o(t).on("click.fndtn.reveal",this.close_targets(),function(e){if(e.preventDefault(),!r.locked){var t=o("["+r.attr_name()+"].open").data(r.attr_name(!0)+"-init")||r.settings,n=o(e.target)[0]===o("."+t.bg_class)[0];if(n){if(!t.close_on_background_click)return;e.stopPropagation()}r.locked=!0,r.close.call(r,n?o("["+r.attr_name()+"].open:not(.toback)"):o(this).closest("["+r.attr_name()+"]"))}}),0<o("["+r.attr_name()+"]",this.scope).length?o(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video):o(this.scope).on("open.fndtn.reveal","["+r.attr_name()+"]",this.settings.open).on("opened.fndtn.reveal","["+r.attr_name()+"]",this.settings.opened).on("opened.fndtn.reveal","["+r.attr_name()+"]",this.open_video).on("close.fndtn.reveal","["+r.attr_name()+"]",this.settings.close).on("closed.fndtn.reveal","["+r.attr_name()+"]",this.settings.closed).on("closed.fndtn.reveal","["+r.attr_name()+"]",this.close_video),!0},key_up_on:function(e){var i=this;return i.S("body").off("keyup.fndtn.reveal").on("keyup.fndtn.reveal",function(e){var t=i.S("["+i.attr_name()+"].open"),n=t.data(i.attr_name(!0)+"-init")||i.settings;n&&27===e.which&&n.close_on_esc&&!i.locked&&i.close.call(i,t)}),!0},key_up_off:function(e){return this.S("body").off("keyup.fndtn.reveal"),!0},open:function(e,t){var a,r=this;e?void 0!==e.selector?a=r.S("#"+e.data(r.data_attr("reveal-id"))).first():(a=r.S(this.scope),t=e):a=r.S(this.scope);var o=a.data(r.attr_name(!0)+"-init");if(o=o||this.settings,a.hasClass("open")&&e.attr("data-reveal-id")==a.attr("id"))return r.close(a);if(!a.hasClass("open")){var s=r.S("["+r.attr_name()+"].open");if(void 0===a.data("css-top")&&a.data("css-top",parseInt(a.css("top"),10)).data("offset",this.cache_offset(a)),a.attr("tabindex","0").attr("aria-hidden","false"),this.key_up_on(a),a.on("open.fndtn.reveal",function(e){e.namespace}),a.on("open.fndtn.reveal").trigger("open.fndtn.reveal"),s.length<1&&this.toggle_bg(a,!0),"string"==typeof t&&(t={url:t}),void 0!==t&&t.url){var l=void 0!==t.success?t.success:null;c.extend(t,{success:function(e,t,n){if(c.isFunction(l)){var i=l(e,t,n);"string"==typeof i&&(e=i)}"undefined"!=typeof options&&void 0!==options.replaceContentSel?a.find(options.replaceContentSel).html(e):a.html(e),r.S(a).foundation("section","reflow"),r.S(a).children().foundation(),0<s.length&&(o.multiple_opened?r.to_back(s):r.hide(s,o.css.close)),r.show(a,o.css.open)}}),o.on_ajax_error!==c.noop&&c.extend(t,{error:o.on_ajax_error}),c.ajax(t)}else 0<s.length&&(o.multiple_opened?r.to_back(s):r.hide(s,o.css.close)),this.show(a,o.css.open)}r.S(d).trigger("resize")},close:function(e){e=e&&e.length?e:this.S(this.scope);var t=this.S("["+this.attr_name()+"].open"),n=e.data(this.attr_name(!0)+"-init")||this.settings,i=this;0<t.length&&(e.removeAttr("tabindex","0").attr("aria-hidden","true"),this.locked=!0,this.key_up_off(e),e.trigger("close.fndtn.reveal"),(n.multiple_opened&&1===t.length||!n.multiple_opened||1<e.length)&&(i.toggle_bg(e,!1),i.to_front(e)),n.multiple_opened?(i.hide(e,n.css.close,n),i.to_front(c(c.makeArray(t).reverse()[1]))):i.hide(t,n.css.close,n))},close_targets:function(){var e="."+this.settings.dismiss_modal_class;return this.settings.close_on_background_click?e+", ."+this.settings.bg_class:e},toggle_bg:function(e,t){0===this.S("."+this.settings.bg_class).length&&(this.settings.bg=c("<div />",{class:this.settings.bg_class}).appendTo("body").hide());var n=0<this.settings.bg.filter(":visible").length;t!=n&&((null==t?n:!t)?this.hide(this.settings.bg):this.show(this.settings.bg))},show:function(e,t){if(t){var n=(s=e.data(this.attr_name(!0)+"-init")||this.settings).root_element,i=this;if(0===e.parent(n).length){var a=e.wrap('<div style="display: none;" />').parent();e.on("closed.fndtn.reveal.wrapped",function(){e.detach().appendTo(a),e.unwrap().unbind("closed.fndtn.reveal.wrapped")}),e.detach().appendTo(n)}var r=l(s.animation);if(r.animate||(this.locked=!1),r.pop){t.top=c(d).scrollTop()-e.data("offset")+"px";var o={top:c(d).scrollTop()+e.data("css-top")+"px",opacity:1};return setTimeout(function(){return e.css(t).animate(o,s.animation_speed,"linear",function(){i.locked=!1,e.trigger("opened.fndtn.reveal")}).addClass("open")},s.animation_speed/2)}if(r.fade){t.top=c(d).scrollTop()+e.data("css-top")+"px";o={opacity:1};return setTimeout(function(){return e.css(t).animate(o,s.animation_speed,"linear",function(){i.locked=!1,e.trigger("opened.fndtn.reveal")}).addClass("open")},s.animation_speed/2)}return e.css(t).show().css({opacity:1}).addClass("open").trigger("opened.fndtn.reveal")}var s;return l((s=this.settings).animation).fade?e.fadeIn(s.animation_speed/2):(this.locked=!1,e.show())},to_back:function(e){e.addClass("toback")},to_front:function(e){e.removeClass("toback")},hide:function(e,t){if(t){var n=e.data(this.attr_name(!0)+"-init"),i=this,a=l((n=n||this.settings).animation);if(a.animate||(this.locked=!1),a.pop){var r={top:-c(d).scrollTop()-e.data("offset")+"px",opacity:0};return setTimeout(function(){return e.animate(r,n.animation_speed,"linear",function(){i.locked=!1,e.css(t).trigger("closed.fndtn.reveal")}).removeClass("open")},n.animation_speed/2)}if(a.fade){r={opacity:0};return setTimeout(function(){return e.animate(r,n.animation_speed,"linear",function(){i.locked=!1,e.css(t).trigger("closed.fndtn.reveal")}).removeClass("open")},n.animation_speed/2)}return e.hide().css(t).removeClass("open").trigger("closed.fndtn.reveal")}return l((n=this.settings).animation).fade?e.fadeOut(n.animation_speed/2):e.hide()},close_video:function(e){var t=c(".flex-video",e.target),n=c("iframe",t);0<n.length&&(n.attr("data-src",n[0].src),n.attr("src",n.attr("src")),t.hide())},open_video:function(e){var t=c(".flex-video",e.target),n=t.find("iframe");if(0<n.length){if("string"==typeof n.attr("data-src"))n[0].src=n.attr("data-src");else{var i=n[0].src;n[0].src=void 0,n[0].src=i}t.show()}},data_attr:function(e){return 0<this.namespace.length?this.namespace+"-"+e:e},cache_offset:function(e){var t=e.show().height()+parseInt(e.css("top"),10)+e.scrollY;return e.hide(),t},off:function(){c(this.scope).off(".fndtn.reveal")},reflow:function(){}}}(jQuery,window,window.document),function(o){var r="unobtrusiveAjaxClick";function s(e,t){for(var n=window,i=(e||"").split(".");n&&i.length;)n=n[i.shift()];return"function"==typeof n?n:(t.push(e),Function.constructor.apply(null,t))}function l(e){return"GET"===e||"POST"===e}function n(i,e){var t,n,a,r;(t=i.getAttribute("data-ajax-confirm"))&&!window.confirm(t)||(n=o(i.getAttribute("data-ajax-loading")),r=i.getAttribute("data-ajax-loading-duration")||0,o.extend(e,{type:i.getAttribute("data-ajax-method")||void 0,url:i.getAttribute("data-ajax-url")||void 0,beforeSend:function(e){var t;return function(e,t){l(t)||e.setRequestHeader("X-HTTP-Method-Override",t)}(e,a),!1!==(t=s(i.getAttribute("data-ajax-begin"),["xhr"]).apply(this,arguments))&&n.show(r),t},complete:function(){n.hide(r),s(i.getAttribute("data-ajax-complete"),["xhr","status"]).apply(this,arguments)},success:function(e,t,n){!function(e,i,t){var a;-1===t.indexOf("application/x-javascript")&&(a=(e.getAttribute("data-ajax-mode")||"").toUpperCase(),o(e.getAttribute("data-ajax-update")).each(function(e,t){var n;switch(a){case"BEFORE":n=t.firstChild,o("<div />").html(i).contents().each(function(){t.insertBefore(this,n)});break;case"AFTER":o("<div />").html(i).contents().each(function(){t.appendChild(this)});break;default:o(t).html(i)}}))}(i,e,n.getResponseHeader("Content-Type")||"text/html"),s(i.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(this,arguments)},error:s(i.getAttribute("data-ajax-failure"),["xhr","status","error"])}),e.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),l(a=e.type.toUpperCase())||(e.type="POST",e.data.push({name:"X-HTTP-Method-Override",value:a})),o.ajax(e))}o(document).on("click","a[data-ajax=true]",function(e){e.preventDefault(),n(this,{url:this.href,type:"GET",data:[]})}),o(document).on("click","form[data-ajax=true] input[type=image]",function(e){var t=e.target.name,n=o(e.target),i=n.parents("form")[0],a=n.offset();o(i).data(r,[{name:t+".x",value:Math.round(e.pageX-a.left)},{name:t+".y",value:Math.round(e.pageY-a.top)}]),setTimeout(function(){o(i).removeData(r)},0)}),o(document).on("click","form[data-ajax=true] :submit",function(e){var t=e.target.name,n=o(e.target).parents("form")[0];o(n).data(r,t?[{name:t,value:e.target.value}]:[]),setTimeout(function(){o(n).removeData(r)},0)}),o(document).on("submit","form[data-ajax=true]",function(e){var t=o(this).data(r)||[];e.preventDefault(),function(e){var t=o(e).data("unobtrusiveValidation");return!t||!t.validate||t.validate()}(this)&&n(this,{url:this.action,type:this.method||"GET",data:t.concat(o(this).serializeArray())})})}(jQuery),function(c){c.extend(c.fn,{validate:function(e){if(this.length){var n=c.data(this[0],"validator");return n||(this.attr("novalidate","novalidate"),n=new c.validator(e,this[0]),c.data(this[0],"validator",n),n.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){n.settings.submitHandler&&(n.submitButton=e.target),c(e.target).hasClass("cancel")&&(n.cancelSubmit=!0)}),this.submit(function(t){function e(){var e;return!n.settings.submitHandler||(n.submitButton&&(e=c("<input type='hidden'/>").attr("name",n.submitButton.name).val(n.submitButton.value).appendTo(n.currentForm)),n.settings.submitHandler.call(n,n.currentForm,t),n.submitButton&&e.remove(),!1)}return n.settings.debug&&t.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,e()):n.form()?n.pendingRequest?!(n.formSubmitted=!0):e():(n.focusInvalid(),!1)})),n)}e&&e.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(c(this[0]).is("form"))return this.validate().form();var e=!0,t=c(this[0].form).validate();return this.each(function(){e&=t.element(this)}),e},removeAttrs:function(e){var n={},i=this;return c.each(e.split(/\s/),function(e,t){n[t]=i.attr(t),i.removeAttr(t)}),n},rules:function(e,t){var n=this[0];if(e){var i=c.data(n.form,"validator").settings,a=i.rules,r=c.validator.staticRules(n);switch(e){case"add":c.extend(r,c.validator.normalizeRule(t)),a[n.name]=r,t.messages&&(i.messages[n.name]=c.extend(i.messages[n.name],t.messages));break;case"remove":if(!t)return delete a[n.name],r;var o={};return c.each(t.split(/\s/),function(e,t){o[t]=r[t],delete r[t]}),o}}var s=c.validator.normalizeRules(c.extend({},c.validator.metadataRules(n),c.validator.classRules(n),c.validator.attributeRules(n),c.validator.staticRules(n)),n);if(s.required){var l=s.required;delete s.required,s=c.extend({required:l},s)}return s}}),c.extend(c.expr[":"],{blank:function(e){return!c.trim(""+e.value)},filled:function(e){return!!c.trim(""+e.value)},unchecked:function(e){return!e.checked}}),c.validator=function(e,t){this.settings=c.extend(!0,{},c.validator.defaults,e),this.currentForm=t,this.init()},c.validator.format=function(n,e){return 1===arguments.length?function(){var e=c.makeArray(arguments);return e.unshift(n),c.validator.format.apply(this,e)}:(2<arguments.length&&e.constructor!==Array&&(e=c.makeArray(arguments).slice(1)),e.constructor!==Array&&(e=[e]),c.each(e,function(e,t){n=n.replace(new RegExp("\\{"+e+"\\}","g"),t)}),n)},c.extend(c.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:c([]),errorLabelContainer:c([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e,t){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e,t){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){9===t.which&&""===this.elementValue(e)||(e.name in this.submitted||e===this.lastActive)&&this.element(e)},onclick:function(e,t){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(e,t,n){"radio"===e.type?this.findByName(e.name).addClass(t).removeClass(n):c(e).addClass(t).removeClass(n)},unhighlight:function(e,t,n){"radio"===e.type?this.findByName(e.name).removeClass(t).addClass(n):c(e).removeClass(t).addClass(n)}},setDefaults:function(e){c.extend(c.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:c.validator.format("Please enter no more than {0} characters."),minlength:c.validator.format("Please enter at least {0} characters."),rangelength:c.validator.format("Please enter a value between {0} and {1} characters long."),range:c.validator.format("Please enter a value between {0} and {1}."),max:c.validator.format("Please enter a value less than or equal to {0}."),min:c.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){this.labelContainer=c(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||c(this.currentForm),this.containers=c(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={};c.each(this.settings.groups,function(n,e){c.each(e.split(/\s/),function(e,t){i[t]=n})});var n=this.settings.rules;function e(e){var t=c.data(this[0].form,"validator"),n="on"+e.type.replace(/^validate/,"");t.settings[n]&&t.settings[n].call(t,this[0],e)}c.each(n,function(e,t){n[e]=c.validator.normalizeRule(t)}),c(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",e).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",e),this.settings.invalidHandler&&c(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),c.extend(this.submitted,this.errorMap),this.invalid=c.extend({},this.errorMap),this.valid()||c(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(e){e=this.validationTargetFor(this.clean(e)),this.lastElement=e,this.prepareElement(e),this.currentElements=c(e);var t=!1!==this.check(e);return t?delete this.invalid[e.name]:this.invalid[e.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),t},showErrors:function(t){if(t){for(var e in c.extend(this.errorMap,t),this.errorList=[],t)this.errorList.push({message:t[e],element:this.findByName(e)[0]});this.successList=c.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){c.fn.resetForm&&c(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var n in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{c(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===c.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var e=this,t={};return c(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in t||!e.objectLength(c(this).rules()))&&(t[this.name]=!0)})},clean:function(e){return c(e)[0]},errors:function(){var e=this.settings.errorClass.replace(" ",".");return c(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=c([]),this.toHide=c([]),this.currentElements=c([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(e){var t=c(e).attr("type"),n=c(e).val();return"radio"===t||"checkbox"===t?c('input[name="'+c(e).attr("name")+'"]:checked').val():"string"==typeof n?n.replace(/\r/g,""):n},check:function(t){t=this.validationTargetFor(this.clean(t));var e,n=c(t).rules(),i=!1,a=this.elementValue(t);for(var r in n){var o={method:r,parameters:n[r]};try{if("dependency-mismatch"===(e=c.validator.methods[r].call(this,a,t,o.parameters))){i=!0;continue}if(i=!1,"pending"===e)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!e)return this.formatAndAdd(t,o),!1}catch(e){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+t.id+", check the '"+o.method+"' method",e),e}}if(!i)return this.objectLength(n)&&this.successList.push(t),!0},customMetaMessage:function(e,t){if(c.metadata){var n=this.settings.meta?c(e).metadata()[this.settings.meta]:c(e).metadata();return n&&n.messages&&n.messages[t]}},customDataMessage:function(e,t){return c(e).data("msg-"+t.toLowerCase())||e.attributes&&c(e).attr("data-msg-"+t.toLowerCase())},customMessage:function(e,t){var n=this.settings.messages[e];return n&&(n.constructor===String?n:n[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(e,t){return this.findDefined(this.customMessage(e.name,t),this.customDataMessage(e,t),this.customMetaMessage(e,t),!this.settings.ignoreTitle&&e.title||void 0,c.validator.messages[t],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,t){var n=this.defaultMessage(e,t.method),i=/\$?\{(\d+)\}/g;"function"==typeof n?n=n.call(this,t.parameters,e):i.test(n)&&(n=c.validator.format(n.replace(i,"{$1}"),t.parameters)),this.errorList.push({message:n,element:e}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t;for(e=0;this.errorList[e];e++){var n=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return c(this.errorList).map(function(){return this.element})},showLabel:function(e,t){var n=this.errorsFor(e);n.length?(n.removeClass(this.settings.validClass).addClass(this.settings.errorClass),n.attr("generated")&&n.html(t)):(n=c("<"+this.settings.errorElement+"/>").attr({for:this.idOrName(e),generated:!0}).addClass(this.settings.errorClass).html(t||""),this.settings.wrapper&&(n=n.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(n).length||(this.settings.errorPlacement?this.settings.errorPlacement(n,c(e)):n.insertAfter(e))),!t&&this.settings.success&&(n.text(""),"string"==typeof this.settings.success?n.addClass(this.settings.success):this.settings.success(n,e)),this.toShow=this.toShow.add(n)},errorsFor:function(e){var t=this.idOrName(e);return this.errors().filter(function(){return c(this).attr("for")===t})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(e){return c(this.currentForm).find('[name="'+e+'"]')},getLength:function(e,t){switch(t.nodeName.toLowerCase()){case"select":return c("option:selected",t).length;case"input":if(this.checkable(t))return this.findByName(t.name).filter(":checked").length}return e.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e,t){return e},string:function(e,t){return!!c(e,t.form).length},function:function(e,t){return e(t)}},optional:function(e){var t=this.elementValue(e);return!c.validator.methods.required.call(this,t,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(e,t){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],t&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(c(this.currentForm).submit(),this.formSubmitted=!1):!t&&0===this.pendingRequest&&this.formSubmitted&&(c(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return c.data(e,"previousValue")||c.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,t){e.constructor===String?this.classRuleSettings[e]=t:c.extend(this.classRuleSettings,e)},classRules:function(e){var t={},n=c(e).attr("class");return n&&c.each(n.split(" "),function(){this in c.validator.classRuleSettings&&c.extend(t,c.validator.classRuleSettings[this])}),t},attributeRules:function(e){var t={},n=c(e);for(var i in c.validator.methods){var a;(a="required"===i?(""===(a=n.get(0).getAttribute(i))&&(a=!0),!!a):n.attr(i))?t[i]=a:n[0].getAttribute("type")===i&&(t[i]=!0)}return t.maxlength&&/-1|2147483647|524288/.test(t.maxlength)&&delete t.maxlength,t},metadataRules:function(e){if(!c.metadata)return{};var t=c.data(e.form,"validator").settings.meta;return t?c(e).metadata()[t]:c(e).metadata()},staticRules:function(e){var t={},n=c.data(e.form,"validator");return n.settings.rules&&(t=c.validator.normalizeRule(n.settings.rules[e.name])||{}),t},normalizeRules:function(i,a){return c.each(i,function(e,t){if(!1!==t){if(t.param||t.depends){var n=!0;switch(typeof t.depends){case"string":n=!!c(t.depends,a.form).length;break;case"function":n=t.depends.call(a,a)}n?i[e]=void 0===t.param||t.param:delete i[e]}}else delete i[e]}),c.each(i,function(e,t){i[e]=c.isFunction(t)?t(a):t}),c.each(["minlength","maxlength","min","max"],function(){i[this]&&(i[this]=Number(i[this]))}),c.each(["rangelength","range"],function(){i[this]&&(i[this]=[Number(i[this][0]),Number(i[this][1])])}),c.validator.autoCreateRanges&&(i.min&&i.max&&(i.range=[i.min,i.max],delete i.min,delete i.max),i.minlength&&i.maxlength&&(i.rangelength=[i.minlength,i.maxlength],delete i.minlength,delete i.maxlength)),i.messages&&delete i.messages,i},normalizeRule:function(e){if("string"==typeof e){var t={};c.each(e.split(/\s/),function(){t[this]=!0}),e=t}return e},addMethod:function(e,t,n){c.validator.methods[e]=t,c.validator.messages[e]=void 0!==n?n:c.validator.messages[e],t.length<3&&c.validator.addClassRules(e,c.validator.normalizeRule(e))},methods:{required:function(e,t,n){if(!this.depend(n,t))return"dependency-mismatch";if("select"!==t.nodeName.toLowerCase())return this.checkable(t)?0<this.getLength(e,t):0<c.trim(e).length;var i=c(t).val();return i&&0<i.length},remote:function(r,o,e){if(this.optional(o))return"dependency-mismatch";var s=this.previousValue(o);if(this.settings.messages[o.name]||(this.settings.messages[o.name]={}),s.originalMessage=this.settings.messages[o.name].remote,this.settings.messages[o.name].remote=s.message,e="string"==typeof e&&{url:e}||e,this.pending[o.name])return"pending";if(s.old===r)return s.valid;s.old=r;var l=this;this.startRequest(o);var t={};return t[o.name]=r,c.ajax(c.extend(!0,{url:e,mode:"abort",port:"validate"+o.name,dataType:"json",data:t,success:function(e){l.settings.messages[o.name].remote=s.originalMessage;var t=!0===e||"true"===e;if(t){var n=l.formSubmitted;l.prepareElement(o),l.formSubmitted=n,l.successList.push(o),delete l.invalid[o.name],l.showErrors()}else{var i={},a=e||l.defaultMessage(o,"remote");i[o.name]=s.message=c.isFunction(a)?a(r):a,l.invalid[o.name]=!0,l.showErrors(i)}s.valid=t,l.stopRequest(o,t)}},e)),"pending"},minlength:function(e,t,n){var i=c.isArray(e)?e.length:this.getLength(c.trim(e),t);return this.optional(t)||n<=i},maxlength:function(e,t,n){var i=c.isArray(e)?e.length:this.getLength(c.trim(e),t);return this.optional(t)||i<=n},rangelength:function(e,t,n){var i=c.isArray(e)?e.length:this.getLength(c.trim(e),t);return this.optional(t)||i>=n[0]&&i<=n[1]},min:function(e,t,n){return this.optional(t)||n<=e},max:function(e,t,n){return this.optional(t)||e<=n},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e))},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;for(var n=0,i=0,a=!1,r=(e=e.replace(/\D/g,"")).length-1;0<=r;r--){var o=e.charAt(r);i=parseInt(o,10),a&&9<(i*=2)&&(i-=9),n+=i,a=!a}return n%10==0},equalTo:function(e,t,n){var i=c(n);return this.settings.onfocusout&&i.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){c(t).valid()}),e===i.val()}}}),c.format=c.validator.format}(jQuery),function(i){var a={};if(i.ajaxPrefilter)i.ajaxPrefilter(function(e,t,n){var i=e.port;"abort"===e.mode&&(a[i]&&a[i].abort(),a[i]=n)});else{var r=i.ajax;i.ajax=function(e){var t=("mode"in e?e:i.ajaxSettings).mode,n=("port"in e?e:i.ajaxSettings).port;return"abort"===t?(a[n]&&a[n].abort(),a[n]=r.apply(this,arguments)):r.apply(this,arguments)}}}(jQuery),function(a){jQuery.event.special.focusin||jQuery.event.special.focusout||!document.addEventListener||a.each({focus:"focusin",blur:"focusout"},function(e,n){function t(e){return(e=a.event.fix(e)).type=n,a.event.handle.call(this,e)}a.event.special[n]={setup:function(){this.addEventListener(e,t,!0)},teardown:function(){this.removeEventListener(e,t,!0)},handler:function(e){var t=arguments;return t[0]=a.event.fix(e),t[0].type=n,a.event.handle.apply(this,t)}}}),a.extend(a.fn,{validateDelegate:function(n,e,i){return this.bind(e,function(e){var t=a(e.target);if(t.is(n))return i.apply(t,arguments)})}})}(jQuery),function(l){var e,n=l.validator,a="unobtrusiveValidation";function o(e,t,n){e.rules[t]=n,e.message&&(e.messages[t]=e.message)}function s(e){return e.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g,"\\$1")}function c(e){return e.substr(0,e.lastIndexOf(".")+1)}function d(e,t){return 0===e.indexOf("*.")&&(e=e.replace("*.",t)),e}function r(e,t){var n=l(this).find("[data-valmsg-for='"+s(t[0].name)+"']"),i=n.attr("data-valmsg-replace"),a=i?!1!==l.parseJSON(i):null;n.removeClass("field-validation-valid").addClass("field-validation-error"),e.data("unobtrusiveContainer",n),a?(n.empty(),e.removeClass("input-validation-error").appendTo(n)):e.hide()}function u(e,t){var n=l(this).find("[data-valmsg-summary=true]"),i=n.find("ul");i&&i.length&&t.errorList.length&&(i.empty(),n.addClass("validation-summary-errors").removeClass("validation-summary-valid"),l.each(t.errorList,function(){l("<li />").html(this.message).appendTo(i)}))}function p(e){var t=e.data("unobtrusiveContainer"),n=t.attr("data-valmsg-replace"),i=n?l.parseJSON(n):null;t&&(t.addClass("field-validation-valid").removeClass("field-validation-error"),e.removeData("unobtrusiveContainer"),i&&t.empty())}function h(e){var t=l(this);t.data("validator").resetForm(),t.find(".validation-summary-errors").addClass("validation-summary-valid").removeClass("validation-summary-errors"),t.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").removeData("unobtrusiveContainer").find(">*").removeData("unobtrusiveContainer")}function m(e){var t=l(e),n=t.data(a),i=l.proxy(h,e);return n||(n={options:{errorClass:"input-validation-error",errorElement:"span",errorPlacement:l.proxy(r,e),invalidHandler:l.proxy(u,e),messages:{},rules:{},success:l.proxy(p,e)},attachValidation:function(){t.unbind("reset."+a,i).bind("reset."+a,i).validate(this.options)},validate:function(){return t.validate(),t.valid()}},t.data(a,n)),n}n.unobtrusive={adapters:[],parseElement:function(i,e){var t,a,r,o=l(i),s=o.parents("form")[0];s&&((t=m(s)).options.rules[i.name]=a={},t.options.messages[i.name]=r={},l.each(this.adapters,function(){var e="data-val-"+this.name,t=o.attr(e),n={};void 0!==t&&(e+="-",l.each(this.params,function(){n[this]=o.attr(e+this)}),this.adapt({element:i,form:s,message:t,params:n,rules:a,messages:r}))}),l.extend(a,{__dummy__:!0}),e||t.attachValidation())},parse:function(e){var t=l(e).parents("form").andSelf().add(l(e).find("form")).filter("form");l(e).find(":input[data-val=true]").each(function(){n.unobtrusive.parseElement(this,!0)}),t.each(function(){var e=m(this);e&&e.attachValidation()})}},(e=n.unobtrusive.adapters).add=function(e,t,n){return n||(n=t,t=[]),this.push({name:e,params:t,adapt:n}),this},e.addBool=function(t,n){return this.add(t,function(e){o(e,n||t,!0)})},e.addMinMax=function(e,i,a,r,t,n){return this.add(e,[t||"min",n||"max"],function(e){var t=e.params.min,n=e.params.max;t&&n?o(e,r,[t,n]):t?o(e,i,t):n&&o(e,a,n)})},e.addSingleVal=function(t,n,i){return this.add(t,[n||"val"],function(e){o(e,i||t,e.params[n])})},n.addMethod("__dummy__",function(e,t,n){return!0}),n.addMethod("regex",function(e,t,n){var i;return!!this.optional(t)||(i=new RegExp(n).exec(e))&&0===i.index&&i[0].length===e.length}),n.addMethod("nonalphamin",function(e,t,n){var i;return n&&(i=(i=e.match(/\W/g))&&i.length>=n),i}),e.addSingleVal("accept","exts").addSingleVal("regex","pattern"),e.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url"),e.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range"),e.add("equalto",["other"],function(e){var t=c(e.element.name),n=d(e.params.other,t);o(e,"equalTo",l(e.form).find(":input[name='"+s(n)+"']")[0])}),e.add("required",function(e){"INPUT"===e.element.tagName.toUpperCase()&&"CHECKBOX"===e.element.type.toUpperCase()||o(e,"required",!0)}),e.add("remote",["url","type","additionalfields"],function(i){var a={url:i.params.url,type:i.params.type||"GET",data:{}},r=c(i.element.name);l.each(function(e){return e.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g)}(i.params.additionalfields||i.element.name),function(e,t){var n=d(t,r);a.data[n]=function(){return l(i.form).find(":input[name='"+s(n)+"']").val()}}),o(i,"remote",a)}),e.add("password",["min","nonalphamin","regex"],function(e){e.params.min&&o(e,"minlength",e.params.min),e.params.nonalphamin&&o(e,"nonalphamin",e.params.nonalphamin),e.params.regex&&o(e,"regex",e.params.regex)}),l(function(){n.unobtrusive.parse(document)})}(jQuery),function(o,i,s,l){var c=o(i);o.fn.lazyload=function(e){var t,a=this,r={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:i,data_attribute:"original",skip_invisible:!0,appear:null,load:null};function n(){var t=0;a.each(function(){var e=o(this);if(!r.skip_invisible||e.is(":visible"))if(o.abovethetop(this,r)||o.leftofbegin(this,r));else if(o.belowthefold(this,r)||o.rightoffold(this,r)){if(++t>r.failure_limit)return!1}else e.trigger("appear"),t=0})}return e&&(l!==e.failurelimit&&(e.failure_limit=e.failurelimit,delete e.failurelimit),l!==e.effectspeed&&(e.effect_speed=e.effectspeed,delete e.effectspeed),o.extend(r,e)),t=r.container===l||r.container===i?c:o(r.container),0===r.event.indexOf("scroll")&&t.bind(r.event,function(e){return n()}),this.each(function(){var n=this,i=o(n);n.loaded=!1,i.one("appear",function(){if(!this.loaded){if(r.appear){var e=a.length;r.appear.call(n,e,r)}o("<img />").bind("load",function(){i.hide().attr("src",i.data(r.data_attribute))[r.effect](r.effect_speed),n.loaded=!0;var e=o.grep(a,function(e){return!e.loaded});if(a=o(e),r.load){var t=a.length;r.load.call(n,t,r)}}).attr("src",i.data(r.data_attribute))}}),0!==r.event.indexOf("scroll")&&i.bind(r.event,function(e){n.loaded||i.trigger("appear")})}),c.bind("resize",function(e){n()}),/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&c.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&a.each(function(){o(this).trigger("appear")})}),SCM.EventEmitter.subscribe("AppearTriggerBound",function(){n()}),SCM.EventEmitter.subscribe("LearningSearchImageBound",function(){n()}),o(s).ready(function(){n()}),this},o.belowthefold=function(e,t){return(t.container===l||t.container===i?c.height()+c.scrollTop():o(t.container).offset().top+o(t.container).height())<=o(e).offset().top-t.threshold},o.rightoffold=function(e,t){return(t.container===l||t.container===i?c.width()+c.scrollLeft():o(t.container).offset().left+o(t.container).width())<=o(e).offset().left-t.threshold},o.abovethetop=function(e,t){return(t.container===l||t.container===i?c.scrollTop():o(t.container).offset().top)>=o(e).offset().top+t.threshold+o(e).height()},o.leftofbegin=function(e,t){return(t.container===l||t.container===i?c.scrollLeft():o(t.container).offset().left)>=o(e).offset().left+t.threshold+o(e).width()},o.inviewport=function(e,t){return!(o.rightoffold(e,t)||o.leftofbegin(e,t)||o.belowthefold(e,t)||o.abovethetop(e,t))},o.extend(o.expr[":"],{"below-the-fold":function(e){return o.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!o.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return o.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!o.rightoffold(e,{threshold:0})},"in-viewport":function(e){return o.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!o.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return o.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!o.rightoffold(e,{threshold:0})}})}(jQuery,window,document);var SCM=SCM||{};SCM.AdvancedSearch={};var definedLimit=$("#hfSolrMaxAllowSearchChar").val(),charactorLimit=definedLimit||255,activeSavedSearchCookieName=App.isLearningContent||App.isMyAccount?"ActiveSavedLearningSearch":"ActiveSavedJournalSearch";function AppendSubscriptionParameterToUrl(e){var t=e;return"true"===$("#hfEnableSubscriptionFilter").val().toLowerCase()&&(t=e+"&subonly=true"),t}function isValidDate(e){var t=/^(\d{2})[-\/](\d{2})[-\/](\d{4})$/.exec(e);if(null===t)return!1;var n=parseInt(t[2]),i=parseInt(t[1]),a=parseInt(t[3]);if(NaN===n||NaN===i||NaN===a)return!1;var r=new Date(a,i-1,n),o=r.getDate().toString(),s=(r.getMonth()+1).toString(),l=r.getFullYear().toString();return o===n.toString()&&s===i.toString()&&l===a.toString()}function isYearOnly(e){var t=/^(\d{4})$/.exec(e);return t&&-1<t[1]}function updateYearOnlyToFullDate(e,t){var n=e.val(),i=t?"01":"12",a=t?"01":"31";return e.val(i+"/"+a+"/"+n),e.val()}Date.prototype.today=function(){return(this.getMonth()+1<10?"0":"")+(this.getMonth()+1)+"/"+(this.getDate()<10?"0":"")+this.getDate()+"/"+this.getFullYear()};var micrositeJournalDisplayName="",micrositeJournalId="",solrsearchScope=$("#hfSolrJournalID").val();void 0===solrsearchScope?solrsearchScope="":null!==solrsearchScope&&(solrsearchScope=solrsearchScope.replace("J","")),$(document).ready(function(){function t(e){if(null!==e&&""!==e)if(e.length>parseInt(charactorLimit))alert("Please enter a term between 1 to "+charactorLimit+" characters");else{var t,n='"'+e+'"',i="";solrsearchScope&&(i="&fl_JournalID="+micrositeJournalId+"&fl_JournalDisplayName="+encodeURIComponent($.trim(micrositeJournalDisplayName))),t="/searchresults?fd_ArticleTitle="+encodeURIComponent(n),t+=""!==i?i:"&allJournals=1",SCM.SiteJS.saveDomainCookie(activeSavedSearchCookieName,"",document.domain),window.location.href=AppendSubscriptionParameterToUrl(t)}else alert("Please enter a term to search")}function n(){var e=$("#citationYear").val(),t=$("#citationVolume").val(),n=$("#citationPage").val(),i=$(".citationJournal").val(),a=$(".citationJournal option:selected").text(),r=!1,o={},s="";if(null!==i&&""!==i&&"- Select a Journal"!==i||(s="Please select a journal.\n"),null!==e&&""!==e&&"Yr"!==e)if(isNaN(e))s+="Year must be numeric.\n";else{var l="01/01/"+e+" TO 12/31/"+e;o.rg_ArticleDate=l}if(null!==t&&""!==t&&"Vol"!==t&&(isNaN(t)?s+="Volume must be numeric.":o.fd_Volume=t),""!==n&&"1st Pg"!==n&&(o.fd_StartPage=n),0<s.length)return alert(s),!1;var c=i.split(",");"C"===c[0]?(o.fl_JournalID=c[1],r=!0):o.fl_JournalHistID=c[2];var d=S("/searchresults",o);d+=r?"&fl_JournalDisplayName="+encodeURIComponent($.trim(a)):"&fd_LegacyJournalDisplayName="+encodeURIComponent($.trim(a)),SCM.SiteJS.saveDomainCookie(activeSavedSearchCookieName,"",document.domain),window.location.href=AppendSubscriptionParameterToUrl(d)}function i(){var e,t,n="1",i=null,a=null,r=[],o=[],s=[],l=[],c={},d=null,u=!1,p=!1;if(null!==(e=$("#advancedSearch .search-field").val())&&""!==e)if(e.length>parseInt(charactorLimit))alert("Please enter a term between 1 to "+charactorLimit+" characters.");else{switch(c.q=e,$("#advancedSearch input.anyAllExact[type=radio]").each(function(){this.checked&&(n=$(this).attr("id"))}),t='"'+e+'"',n){case"1":c.hd="advancedAny",d=e;break;case"2":c.hd="advancedAll",d=e;break;case"3":d=t}c.q=encodeURIComponent($.trim(d));var h=$("#advancedSearch .authorSearch").val();if(null!==h&&""!==h&&(c.author=h),null!==(i=$("#startDateSemanticSearch").val())&&""!==i&&"mm/dd/yyyy"!==i){if(isYearOnly(i))i=updateYearOnlyToFullDate($("#startDateSemanticSearch"),!0);else if(!isValidDate(i))return void alert("please enter valid start date");var m=$("#endDateSemanticSearch");if(""===m.val())a=(new Date).today();else if(isYearOnly(a=m.val()))a=updateYearOnlyToFullDate(m,!1);else if(!isValidDate(a)||new Date(a)<new Date(i))return void alert("please enter valid end date");c.rg_ArticleDate=i+" TO "+a}$("#advancedSearch input.rbPublication[type=radio]").each(function(){this.checked&&(u="J*"===$(this).attr("value"))}),$("#advancedSearch .chk-journal:checked").each(function(){u=!0;var e=$(this);e.attr("data-display-name"),o.push(e.attr("data-display-name")),s.push(e.attr("value")),r.push(e.attr("jid"))}),$("#advancedSearch .chk-articletype:checked").each(function(){p=!0;var e=$(this);e.attr("text"),l.push(e.attr("value"))});var f=S("/searchresults",c);if(u){s.join(" OR "),r.join(" OR ");var g=o.join("OR");if(f+="&restypeid=3",0===o.length)f+="&allJournals=1";else f+="&fl_JournalDisplayName="+encodeURIComponent($.trim(g))}else f+="&allJournals=1";if(p){var v=l.join("AND");f+="&f_ArticleTypeDisplayName="+encodeURIComponent($.trim(v))}SCM.SiteJS.saveDomainCookie(activeSavedSearchCookieName,"",document.domain),window.location.href=AppendSubscriptionParameterToUrl(f)}else alert("Please enter a term to search")}function S(e,t){var n="";for(var i in t)t.hasOwnProperty(i)&&(n+="&"+i+"="+encodeURIComponent(t[i]));return e.indexOf("?")<0&&(n="?"+n.substring(1)),e+n}function a(){var e,t=null,n=null,i=[],a=[],r={},o=null,s=null,l=!1;if(null!==(e=$(".advancedAuthorSearch .search-field").val())&&""!==e)if(e.length>parseInt(charactorLimit))alert("Please enter a term between 1 to "+charactorLimit+" characters.");else{if(r.author=encodeURIComponent($.trim(e)),r.q=encodeURIComponent($.trim(e)),null!==(t=$("#startDateAuthor").val())&&""!==t&&"mm/dd/yyyy"!==t){if(isYearOnly(t)&&(t=updateYearOnlyToFullDate($("#startDateAuthor"),!0)),!isValidDate(t))return void alert("please enter valid start date");var c=$("#endDateAuthor");if(""===c.val()?n=(new Date).today():isYearOnly(n=c.val())&&(n=updateYearOnlyToFullDate(c,!1)),!isValidDate(n)||new Date(n)<new Date(t))return void alert("please enter valid end date");r.rg_ArticleDate=t+" TO "+n}$(".advancedAuthorSearch input.rbPublication[type=radio]").each(function(){this.checked&&(l="J*"===$(this).attr("value"))}),$(".advancedAuthorSearch .chk-journal:checked").each(function(){var e=$(this);l=!0,s=e.attr("data-display-name"),o=e.attr("text"),a.push(e.attr("value")),i.push(e.attr("jid"))});var d=S("/searchresults",r);if(l){var u=a.join(" OR "),p=i.join(" OR ");if(d+="&restypeid=3",1===a.length){var h=encodeURIComponent($.trim(o));journalQuery=o===s?"&fl_JournalID="+p+"&fl_JournalDisplayName="+h:"&fl_JournalID="+p+"&fl_JournalDisplayName="+encodeURIComponent($.trim(s))+"&fd_LegacyJournalDisplayName="+h,d+=journalQuery}else if(1<a.length){d+="&fl_JournalHistID="+u}else 0===a.length&&(d+="&allJournals=1")}else d+="&allJournals=1";SCM.SiteJS.saveDomainCookie(activeSavedSearchCookieName,"",document.domain),window.location.href=AppendSubscriptionParameterToUrl(d)}else alert("Please enter a term to search")}App.isAdvancedSearch&&(null!==solrsearchScope&&""!==solrsearchScope&&($(".advancedAuthorSearch input:checkbox").each(function(){var e=$(this),t=e.attr("currentjournaldisplayname"),n=e.attr("text"),i=e.attr("jid");if(null!==t&null!==n&&t===n&&i===solrsearchScope)return this.checked=!0,micrositeJournalDisplayName=n,micrositeJournalId=i,!1}),$("#advancedSearch input:checkbox").each(function(){var e=$(this),t=e.attr("currentjournaldisplayname"),n=e.attr("text"),i=e.attr("jid");if(null!==t&null!==n&&t===n&&i===solrsearchScope)return this.checked=!0,micrositeJournalDisplayName=n,micrositeJournalId=i,!1}),$(".citationJournal").each(function(){$("option",this).each(function(){var e=$(this).val().split(",");null!==e&&"C"===e[0]&&e[1]===solrsearchScope&&$(this).attr("selected","selected")})})),$("#btnAdvancedTitleSearch").click(function(){t($("#articleTitle").val())}),$("#articleTitle").keydown(function(e){13===e.keyCode&&t($("#articleTitle").val())}),$("#btnAdvancedCitationSearch").click(function(){n()}),$("#btnAdvancedCitationSearch").keydown(function(e){13===e.keyCode&&n()}),$("#advancedSearchQueryTerm").keydown(function(e){13===e.keyCode&&i()}),$("#btnAdvancedSearch, #btnAdvancedSearchTop").on("click",function(){i()}),$("#btnAdvancedAuthorSearch, #btnAdvancedAuthorSearchTop").on("click",function(){a()}),$("#advancedAuthorSearchQueryTerm").keydown(function(e){13===e.keyCode&&a()}),$("#Doi").keydown(function(e){13===e.keyCode&&(GetDoiUrl(),$("#aDoiSearch").click())}))}),$(function(){try{$("#startDateSemanticSearch, #endDateSemanticSearch, #startDateAuthor, #endDateAuthor").bind("keydown",function(e){if(13===e.which){var t=$(this);if(isYearOnly(t.val()))return updateYearOnlyToFullDate(t,!0),e.preventDefault(),e.stopImmediatePropagation(),!1}})}catch(e){}});var SCM=SCM||{};!function(l,c){var t=c(document);function r(e){window.location.href=e}l.$noAccessModal=c("#login-paid-pdf-reveal"),l.$registerFreePdfModal=c("#register-free-pdf-reveal"),l.$learningNoAccessModal=c("#no-access-reveal-learning"),l.openNoAccessModalArticle=function(e,t){var n,i=".free-access, .open-access, .icon-free";if(n=e.find(".free-access").length,App.isAnyArticle?n=App.isFreeArticle||App.isTollFreeAccess:App.isSearch?n=e.closest(".search-result").find(i).length:App.isIssue?n=e.closest(".article").find(i).length:App.isCollection&&(n=e.closest(".article").find(i).length),n)l.$registerFreePdfModal.foundation("reveal","open"),function(){var e=c(".register-free-pdf"),t=e.find(".no-access--alerts-input"),n=e.find(".sign-in--create-link"),i=e.find(".sign-in--personal-link");SCM.SiteJS.toggleAlertFlagForSignInSignUpUrls(e,t,n,i,"article")}();else{var a=l.$noAccessModal.find("#articleLinkToPurchase"),r=a.attr("data-storeurlpurchase")+"/CustomerType.aspx?articleId="+t;a.attr("href",r);var o=l.$noAccessModal.find("#journalLinkToSubscribe"),s=a.attr("data-storeurlsubscribe");o.attr("href",s),c("#modal_rent_this_article").load("/RentArticle/"+t),c("#modal_rent_this_article_paid_pdf").load("/RentArticle/"+t),c("#modal_rent_this_article_purchase_access").load("/RentArticle/"+t),l.$noAccessModal.foundation("reveal","open")}},l.checkArticlePDFAccess=function(t){var n=t.attr("data-article-id"),i=t.attr("data-article-url"),e=t.attr("data-ajax-url"),a=!1;App.isAnyArticle?a=App.isFreeArticle:App.isIssue&&(a=t.closest(".article").find(".free-access, .open-access, .icon-free").length),a&&App.isReferredFromGoogle?r(i):c.ajax({type:"POST",url:e,data:{aId:n},traditional:!0,success:function(e){e.Success?r(i):(l.openNoAccessModalArticle(t,n),SCM.ClientStatsMaster.trackPdfTurnAwayAction(n,i))},error:function(e,t,n){SCM.JSUtility.logErrors(e,t,n)}})},l.checkIssuePDFAccess=function(e){var t=e.attr("data-issue-id"),n=e.attr("data-issue-url"),i=e.attr("data-ajax-issue-url"),a=l.$noAccessModal.find(".aIssuePurchaseLink").attr("href");-1<n.toLowerCase().indexOf("/toc.pdf")?window.location.href=n:c.ajax({type:"POST",url:i,data:{issueId:t},traditional:!0,success:function(e){e.Success?r(n):function(e,t){var n=function(e,t){var n=e;if(0<=e.toLowerCase().indexOf("resourceid=")){n=e.replace(/resourceID=\{0\}|resourceID=\d+/i,"resourceid="+t)}return n}(e,t);l.$noAccessModal.find(".aIssuePurchaseLink").attr("href",n),l.$noAccessModal.foundation("reveal","open")}(a,t)},error:function(e,t,n){SCM.JSUtility.logErrors(e,t,n)}})},l.bindUiEvents=function(){t.on("click",".pdfaccess, .pdfaccess-text",function(){var e=c(this);t.foundation(),l.$noAccessModal.foundation("reveal","close"),l.checkArticlePDFAccess(e)}),t.on("click",".close-reveal-modal",function(){c(this).parents(".reveal-modal").foundation("reveal","close")}),t.on("click",".al-link.issue-pdfLink",function(){l.$noAccessModal.foundation("reveal","close"),l.checkIssuePDFAccess(c(this))}),t.on("click",".article-pdf-only",function(){c("#pdf-link").click()}),t.on("click",".meta-journal-club",function(){c("h1.has-jc-ppt")||c("#pdf-link").click()})},l.init=function(){l.bindUiEvents()}}(SCM.PDFAccess=SCM.PDFAccess||{},jQuery);var SCM=SCM||{},App=App||{};SCM.SolrSearch={},App.SavedSearchUserAlert={},App.SavedSearchUserAlert.defaults={savedSearchAlertScheduleId:11},SCM.SolrSearch.defaults={controller:App.isLearningSearchResults?"AMA":"Solr",action:App.isLearningSearchResults?"LearningSolrSearch":"SolrSearch",instanceName:App.isLearningSearchResults?"AMAv2_LearningSearchResults":"AMAv2_SearchResults",updateTargetSelector:"#divSearch",cookieValue:App.isLearningSearchResults?"persistentLearningSearchFilters":"persistentSearchFilters",defaultSearchUrl:App.isLearningSearchResults?"/learning/searchresults?q=*&hd=learning&allSites=1&f_HasCME=true":'/searchresults?q=*&allSites=1&SearchSourceType=1&exPrm_qqq={!payloadDisMaxQParser%20pf=Tags%20qf=Tags^0.0000001%20payloadFields=Tags%20bf=}" * "&exPrm_hl.q=*'};var SolrDateErrorEnum={VALID:0,INVALID:1,INVALID_YEAR:2};Date.prototype.today=function(){return(this.getMonth()+1<10?"0":"")+(this.getMonth()+1)+"/"+(this.getDate()<10?"0":"")+this.getDate()+"/"+this.getFullYear()},Date.prototype.format=function(){var e=this.getDate(),t=this.getMonth()+1;return e<10&&(e="0"+e),t<10&&(t="0"+t),t+"/"+e+"/"+this.getFullYear()},function(SolrSearch,$,undefined){var $body=$("body"),hfSolrJournalID=$("#hfSolrJournalID"),hfGlobalSearchSiteURL=$("#hfGlobalSearchSiteURL"),journalScope=hfSolrJournalID.val(),$ajaxWrap=$(".ajax-container"),$selectedSaveSearch=$(".selected-save-search, .selected-save-search-learning"),$selectedSaveSearchTxt=$(".selected-save-search-txt"),$saveSearchLink=$(".save-search-link, .save-search-link-learning"),$savedSearchNameTxtBox=$(".saved-search-name-textbox"),queryText="",activeSavedSearchCookieName=App.isLearningContent||App.isMyAccount?"ActiveSavedLearningSearch":"ActiveSavedSiteSearch",cookieKey="persistentSearchFilters",testSearchInput=function(e,t){return""===$.trim(e)||null===e?(alert("Please enter a term to search: "),!1):e?(doSolrSearch(e,t),!0):(alert("SCM.SolrSearch.testSearchInput() fail"),!1)},testKeypress=function(e,t){if(13===e.keyCode){e.preventDefault();var n=determineScope();testSearchInput(t,n)}};function doSolrSearch(e,t){window.location.href=buildSolrSearchQuery(e,t)}function doSolrFacetSearch(t){var n=$.extend(SCM.SolrSearch.defaults,t),i=$(n.updateTargetSelector),e="/"+n.controller+"/"+n.action+"/"+n.instanceName;e+="?"+t.queryString,$.ajax({url:e,success:function(e){i.html(e),refreshResults(i,t,n),SCM.JSUtility.addStateToggle("#narrow-filter",".search-facets",undefined,!0),App.isSearch&&(bindKeyToDate($("#fromDate"),!0),bindKeyToDate($("#ToDate"),!1))},error:function(e){console.log(e)}})}function buildSolrSearchQuery(e,t){resetActiveSavedSearch();var n,i,a="&exPrm_qqq={!payloadDisMaxQParser pf=Tags qf=Tags^0.0000001 payloadFields=Tags bf=}"+('"'+(queryText=encodeURIComponent(e.trim()))+'"'),r="&exPrm_hl.q="+queryText,o="searchresults?",s="",l="",c="",d="",u=null===t||t===undefined||""===t||"J*"===t,p="L*"===t,h="&allSites=1";if((i=SCM.SiteJS.getCookie(cookieKey))&&(s=(s="&"+i).replace(/(([?|&]{1})?allSites[^&]*)/,"")),p)o="/learning/"+o,s||(d="hd=learning&f_HasCME=true&"),-1===s.indexOf("allSites")&&(l=h);else if(u)-1===s.indexOf("allSites")&&-1===s.indexOf("SiteID")&&(l=h),o=hfGlobalSearchSiteURL.val()!==undefined?hfGlobalSearchSiteURL.val()+o:"/"+o,c="&SearchSourceType=1";else{if(s){s=s.replace(/(([?|&]{1})?f_SiteID[^&]*)/,"")}l+="Search All"===t?h:"&f_SiteID="+t,c="&SearchSourceType=3",o="/"+o}return saveSolrSearchParams(cookieKey,d+(n="q="+queryText)),o+=d+n+l+s+c+a+r}function saveSolrSearchParams(e,t){var n=SCM.SiteJS.formatSearchQueryToSaveToLocalStorage(t);SCM.SiteJS.saveDomainCookie(e,n,document.domain),SCM.SiteJS.saveDomainCookie("currentSiteCount",App.currentSiteCount,document.domain)}function determineScope(){var e=$(".cs-options").find(".cs-selected");$(".site-search-bar .cs-select .cs-placeholder");return 0===e.length&&(e=$(".cs-placeholder")),"J*"===e.attr("data-value")&&(resetPersistentSearch(),resetActiveSavedSearch()),e.length?e.attr("data-value"):"J*"}function resetActiveSavedSearch(){SCM.SiteJS.saveDomainCookie(activeSavedSearchCookieName,"",document.domain)}function resetPersistentSearch(){SCM.SiteJS.saveDomainCookie(cookieKey,"",document.domain)}function isValidSolrDate(e){var t=/^(\d{1,2})[-\/](\d{1,2})[-\/](\d{2,4})$/.exec(e);if(null==t)return SolrDateErrorEnum.INVALID;var n=t[2],i=t[1],a=t[3];if(2===a.length)return SolrDateErrorEnum.INVALID_YEAR;1===n.length&&(n="0"+n),1===i.length&&(i="0"+i);var r=new Date(a,i-1,n),o=r.getFullYear().toString(),s=(r.getMonth()+1).toString();return r.getDate()!==n.toString()&&s!==i.toString()&&o!==a.toString()?SolrDateErrorEnum.INVALID:SolrDateErrorEnum.VALID}function isYearOnly(e){var t=/^(\d{4})$/.exec(e);return t&&-1<t[1]}function updateYearOnlyToFullDate(e,t){var n=e.val(),i=null,a=null;return a=t?i="01":(i="12","31"),e.val(i+"/"+a+"/"+n),e.val()}function formatDate(e){var t=/^(\d{1,2})[-\/](\d{1,2})[-\/](\d{2,4})$/.exec(e),n=t[1],i=t[2],a=i,r=n,o=t[3];return 1===i.length&&(a="0"+i),1===n.length&&(r="0"+n),r+"/"+a+"/"+o}function isTrue(e){return"string"==typeof e?"true"===e.toLowerCase():!!e}function bindUiEvents(){var e=$(".search-button"),t=$("#search-term"),n=$(".chkSelect");e.off("click"),t.off("keydown"),n.off("click"),e.on("click",function(){var e=determineScope();testSearchInput(t.val(),e)}),t.keydown(function(e){testKeypress(e,t.val())}),(App.isSearch||App.isLearningSearchResults)&&(n.on("click",function(e){doSolrFacetSearch({queryString:$(this).data("redirectUrl")})}),$(".sort-link, .close, .al-pageNumber, .al-nav-next, .al-nav-previous").on("click",function(e){var t=$(this).attr("data-url");null==t||"#"===t||""===t||$(this).hasClass("view-more")||(e.preventDefault(),resetActiveSavedSearch(),"True"===$("#bRetainQueryStringParams").val()?window.location.hash="#"+t:window.location=window.location.pathname+"?"+t)}),$("#btnRangeSearch").on("click",function(e){var t=$("#fromDate"),n=t.val(),i=$("#ToDate"),a=i.val(),r=(new Date).today(),o=new Date("July 14, 1883").format();""===n?(t.val(o),n=o):isYearOnly(n)&&(n=updateYearOnlyToFullDate($("#fromDate"),!0)),""===a?(i.val(r),a=r):isYearOnly(a)&&(a=updateYearOnlyToFullDate($("#ToDate"),!1));var s=isValidSolrDate(n),l=isValidSolrDate(a);if(s!==SolrDateErrorEnum.INVALID&&l!==SolrDateErrorEnum.INVALID)if(s!==SolrDateErrorEnum.INVALID_YEAR&&l!==SolrDateErrorEnum.INVALID_YEAR){var c=formatDate(n),d=formatDate(a);if(new Date(d)<new Date(c))alert("End Date must be greater than Start Date.");else{var u=$(this).attr("data-url").replace("queryText",c+" TO "+d);resetActiveSavedSearch(),window.location=window.location.pathname+"?"+u}}else alert("Please enter a four digit year.");else alert("Please enter valid dates.")})),$("#umbrellaSiteAutoCompleteResults").on("click","a",function(e){e.preventDefault();var t=$(this).attr("href");null!==t&&"#"!==t&&""!==t&&(resetActiveSavedSearch(),window.location=t)}),$("#solrSearchBtn").on("click",function(e){var t=$("#txtSearch").val();null==t||""===t?alert("Please enter a term to search."):(t=encodeURIComponent(t),window.location="?q="+t)})}function bindPaginationEvents(){if(App.isLearningSearchResults){var e=$(".learning-search");e.off("click"),e.on("click",".view-more",function(e){e.preventDefault();var t=$(this).attr("data-url"),n=$(".learning--pagination .loading-cube .sk-folding-cube");$(".pagination-buttons").hide(),n.removeClass("hide"),appendResults(e,t)})}}function moveStartLearningButton(e){0===e.find(".pagination").length&&$(".learning--start-learning").css("width","100%").css("text-align","center")}function appendResults(e,t){e.preventDefault();var n=$(".learning--pagination");getResultsFromSolr($(".learning-search-results-contents").find(".search-results-list"),n,t)}function startLearningButtonEvents(){App.isLearningSearchResults&&$(".learning-results-buttons").on("click",".start-learning",function(e){e.preventDefault();var t=$(".learning-result-title").first().find(".content--title").attr("href");window.location.href=t})}function getResultsFromSolr(o,s,e){var t=window.location.search;if(0===t.length)t="?";else{var n=window.location.toString();t=n.substring(0,n.indexOf("?")+1)}var i=t+=e;$.ajax({url:i,success:function(e){if(e){var t=$(e),n=t.find(".learning--search-results"),i=t.find(".learning--pagination");$ajaxWrap.empty(),$ajaxWrap.html(n);var a=$ajaxWrap.find(".search-results-list");$ajaxWrap.empty(),$ajaxWrap.html(i);var r=$ajaxWrap.find(".learning--pagination");moveStartLearningButton(r),s.html(r),o.append(a.children()),i.html(r.html()),startLearningButtonEvents()}},error:function(e,t,n){console.log("xhr: "+e),console.log("status: "+t),console.log("status code: "+e.statusCode),console.log("error thrown: "+n)}})}function displaySelectedSavedSearch(e){$saveSearchLink.hide(),$selectedSaveSearchTxt.text(e),$selectedSaveSearch.show()}function refreshResults(e,t,n){bindUiEvents(),bindPaginationEvents(),window.history.pushState(t,null,window.location.pathname+"?"+t.queryString),e[0].getBoundingClientRect().top<0&&$("html, body").animate({scrollTop:e[0].offsetTop},1e3);var i=SCM.SiteJS.formatSearchQueryToSaveToLocalStorage(t.queryString);SCM.SiteJS.saveDomainCookie(n.cookieValue,i,document.domain),SCM.SiteJS.saveDomainCookie("currentSiteCount",App.currentSiteCount,document.domain),resetActiveSavedSearch(),SCM.SiteJS.setGlobalSearchDropdownSelectedValue(t.queryString)}var bindKeyToDate=function(t,n){t.bind("keydown",function(e){if(13==e.which&&isYearOnly(t.val()))return updateYearOnlyToFullDate(t,n),e.preventDefault(),e.stopImmediatePropagation(),!1}).datepicker()};function resetSavedSearchListItemsViewAndEdit(){$("[id^=searchListItemEdit_]").hide(),$("[id^=searchListItem_]").show()}function stripExcludedSolrSearchParameters(e){return e.replace(/(([?|&]{1})rg_ArticleDate[^&]*)/,"")}function saveSolrSearchInfo(savedSearchName){var $savedSearchNameErrorLbl=$(".saved-search-name-error");if(""===savedSearchName)return $savedSearchNameErrorLbl.text("Please name your search"),void $savedSearchNameErrorLbl.show();var searchAlertFrequency=0,redirectUrl="",currentUrl=stripExcludedSolrSearchParameters(window.location.href),data=JSON.stringify({searchName:savedSearchName,url:currentUrl,scheduleId:searchAlertFrequency,redirectUrl:redirectUrl,controlId:"AMA_Journal_SaveSearches"}),ajaxUrl="/Solr/SaveSolrSearchInfo";$.ajax({url:ajaxUrl,type:"POST",dataType:"json",cache:!1,data:data,contentType:"application/json; charset=utf-8",success:function(e){if(null!=e){if(!e.Success){var t=e.Html.replace("[searchname]",savedSearchName);$savedSearchNameErrorLbl.text(t),$savedSearchNameErrorLbl.show()}e.Success&&($(".close-reveal-modal").click(),$savedSearchNameErrorLbl.hide(),$savedSearchNameTxtBox.text(""),SCM.SiteJS.saveDomainCookie(activeSavedSearchCookieName,savedSearchName,document.domain),location.reload(!0))}},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})}function deleteSolrSearchInfo(userSearchId,userAlertId){var success=!1;if(0===userSearchId)return success;var data=JSON.stringify({userSearchId:userSearchId,userAlertId:userAlertId,controlId:"AMA_Journals_DeleteSearches"}),ajaxUrl="/Solr/DeleteSolrSearchInfo";return $.ajax({async:!1,url:ajaxUrl,type:"POST",dataType:"json",cache:!1,data:data,contentType:"application/json; charset=utf-8",success:function(e){e.Success?success=!0:alert(e.Html)},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}}),success}function toggleSavedSearchRename(e,t){$("#"+e).show(),t.hide()}function updateSolrSearchInfo(updatedSearchName,userSearchId,$searchListItem){var $errorLbl=$searchListItem.find(".search-list-item-rename-error");if(""===updatedSearchName||0===userSearchId)return $errorLbl.text("Please name your search"),void $errorLbl.show();var data=JSON.stringify({searchName:updatedSearchName,userSearchId:userSearchId,controlId:"AMA_Journals_RenameSearches"}),ajaxUrl="/Solr/RenameSolrSearchInfo";$.ajax({url:ajaxUrl,type:"POST",dataType:"json",cache:!1,data:data,contentType:"application/json; charset=utf-8",success:function(e){if(e.Success){var t=$searchListItem.find(".search-list-item-link"),n=$searchListItem.find(".search-list-item-link");!0==(SCM.SiteJS.getCookie(activeSavedSearchCookieName)===t.text())&&($selectedSaveSearchTxt.text(updatedSearchName),SCM.SiteJS.saveDomainCookie(activeSavedSearchCookieName,updatedSearchName,document.domain)),t.text(updatedSearchName),n.text(updatedSearchName),resetSavedSearchListItemsViewAndEdit(),$errorLbl.hide(),$errorLbl.text("")}else{var i=e.Html.replace("[searchname]",updatedSearchName);$errorLbl.text(i),$errorLbl.show()}},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})}function bindSaveSearchEvents(){$(".save-search-btn").off("click"),$savedSearchNameTxtBox.off("keypress"),$(".clear-selected-save-search, .clear-selected-save-search-learning").off("click"),$(".search-list-item-rename-link").off("click"),$(".search-list-item-rename-cancel-btn").off("click"),$(".search-list-item-delete-link").off("click"),$(".search-list-item-rename-btn").off("click"),$(".search-list-item-link").off("click"),$(".search-alert #subscribe").off("click"),$savedSearchNameTxtBox=$(".saved-search-name-textbox");var n="";(App.isSearch||App.isLearningSearchResults)&&($(".save-search-btn").on("click",function(e){e.preventDefault(),saveSolrSearchInfo($savedSearchNameTxtBox.val().trim())}),$savedSearchNameTxtBox.on("keypress",function(e){13===(e.keyCode||e.which)&&saveSolrSearchInfo($savedSearchNameTxtBox.val().trim())}),$(".clear-selected-save-search, .clear-selected-save-search-learning").on("click",function(e){$selectedSaveSearch.hide(),$selectedSaveSearchTxt.text(""),$saveSearchLink.show(),resetActiveSavedSearch(),window.location.href=SCM.SolrSearch.defaults.defaultSearchUrl})),(App.isSearch||App.isLearningContent||App.isMyAccount)&&($(".search-list-item-rename-link").on("click",function(e){e.preventDefault();var t=$(this).parents().eq(1).find(".search-list-item-edit-textbox").val();n=t,resetSavedSearchListItemsViewAndEdit(),toggleSavedSearchRename($(this).attr("data-id"),$(this).parent())}),$(".search-list-item-rename-cancel-btn").on("click",function(e){e.preventDefault(),toggleSavedSearchRename($(this).attr("data-id"),$(this).parents().eq(2));var t=$(this).parents().eq(3).find(".search-list-item-edit-textbox");t.val()!==n&&t.val(n)}),$(".search-list-item-delete-link").on("click",function(e){e.preventDefault();var t=$(this).parents().eq(1),n=$(".saved-searches-list");if(deleteSolrSearchInfo($(this).attr("data-usersearchid"),$(this).attr("data-useralertid"))){if(resetActiveSavedSearch(),t.remove(),0<n.children().length){var i=1;$(".search-list-item-view .search-list-item-view-index").each(function(){$(this).text(i+". "),i++}),i=1,$(".search-list-item-edit .search-list-item-edit-index").each(function(){$(this).text(i+". "),i++})}else $(".saved-searches").hide(),$(".saved-searches-no-result").show();t.find(".search-list-item-link").text()===$selectedSaveSearchTxt.text()&&($selectedSaveSearch.hide(),$selectedSaveSearchTxt.text(""),$saveSearchLink.show())}}),$(".search-list-item-rename-btn").on("click",function(e){e.preventDefault();var t=$(this).parents().eq(3);updateSolrSearchInfo(t.find(".search-list-item-edit-textbox").val(),$(this).attr("data-usersearchid"),t)}),$(".search-list-item-link").on("click",function(e){SCM.SiteJS.saveDomainCookie(activeSavedSearchCookieName,$(this).text(),document.domain);SCM.SiteJS.saveDomainCookie("persistentSearchFilters","",document.domain)}),$(".search-alert #subscribe").click(function(){updateUserSearchAlert($(this).parent())}))}function updateUserSearchAlert($parentElement){var ajaxUrl="/Solr/UpdateUserAlert",dataObj={userSearchId:$parentElement.attr("data-usersearchid"),userAlertId:$parentElement.attr("data-useralertid"),scheduleId:$parentElement.attr("data-scheduleid")};$.ajax({url:ajaxUrl,type:"POST",dataType:"JSON",cache:!1,data:dataObj,success:function(e){if(null!=e&&e.Success){var t=$parentElement.find(".search-alert-subscribe-txt"),n=$parentElement.parent().find(".search-list-item-delete-link");"0"!==e.ReturnId?(t.text("Subscribed"),$parentElement.attr("data-useralertid",e.ReturnId),$parentElement.attr("data-scheduleid",0),n.attr("data-useralertid",e.ReturnId)):(t.text("Get Alerts"),$parentElement.attr("data-useralertid",0),$parentElement.attr("data-scheduleid",App.SavedSearchUserAlert.defaults.savedSearchAlertScheduleId),n.attr("data-useralertid",0))}},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})}SolrSearch.init=function(){(App=App||{}).LearningSearchResults=App.LearningSearchResults||{};var n="";bindUiEvents(),bindPaginationEvents(),bindSaveSearchEvents(),moveStartLearningButton($(".learning--pagination")),$body.on("click",".sriTopiclink",function(e){var t=(queryText=$(this).text()).replace(",","");doSolrSearch(t,""===(n=hfSolrJournalID.val())||null===n?null:n),e.preventDefault()}),startLearningButtonEvents();var e=SCM.SiteJS.getCookie(activeSavedSearchCookieName);""!==e&&displaySelectedSavedSearch(e),$(document).ajaxComplete(function(){bindSaveSearchEvents()})}}(SCM.SolrSearch=SCM.SolrSearch||{},jQuery),function(e){"use strict";e.Placeholders={Utils:{addEventListener:function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):void 0},inArray:function(e,t){var n,i;for(n=0,i=e.length;n<i;n++)if(e[n]===t)return!0;return!1},moveCaret:function(e,t){var n;e.createTextRange?((n=e.createTextRange()).move("character",t),n.select()):e.selectionStart&&(e.focus(),e.setSelectionRange(t,t))},changeType:function(e,t){try{return e.type=t,!0}catch(e){return!1}}}}}(this),function(e){"use strict";function t(){}function n(){try{return document.activeElement}catch(e){}}function i(e,t){var n,i,a=!!t&&e.value!==t,r=e.value===e.getAttribute(k);return(a||r)&&"true"===e.getAttribute(I)&&(e.removeAttribute(I),e.value=e.value.replace(e.getAttribute(k),""),e.className=e.className.replace(x,""),i=e.getAttribute(T),0<=parseInt(i,10)&&(e.setAttribute("maxLength",i),e.removeAttribute(T)),(n=e.getAttribute(_))&&(e.type=n),!0)}function a(e){var t=e.getAttribute(k);return!(""!==e.value||!t)&&(e.setAttribute(I,"true"),e.value=t,e.className+=" "+A,e.getAttribute(T)||(e.setAttribute(T,e.maxLength),e.removeAttribute("maxLength")),e.getAttribute(_)?e.type="text":"password"===e.type&&P.changeType(e,"text")&&e.setAttribute(_,"password"),!0)}function r(e,t){var n,i,a,r,o;if(e&&e.getAttribute(k))t(e);else for(i=e?e.getElementsByTagName("input"):l,a=e?e.getElementsByTagName("textarea"):c,o=0,r=(n=i?i.length:0)+(a?a.length:0);o<r;o++)t(o<n?i[o]:a[o-n])}function o(e){r(e,i)}function s(e){e.form&&("string"==typeof(v=e.form)&&(v=document.getElementById(v)),v.getAttribute($)||(P.addEventListener(v,"submit",function(e){return function(){o(e)}}(v)),v.setAttribute($,"true"))),P.addEventListener(e,"focus",function(e){return function(){d&&e.value===e.getAttribute(k)&&"true"===e.getAttribute(I)?P.moveCaret(e,0):i(e)}}(e)),P.addEventListener(e,"blur",function(e){return function(){a(e)}}(e)),d&&(P.addEventListener(e,"keydown",function(t){return function(e){return p=t.value,"true"===t.getAttribute(I)&&p===t.getAttribute(k)&&P.inArray(w,e.keyCode)?(e.preventDefault&&e.preventDefault(),!1):void 0}}(e)),P.addEventListener(e,"keyup",function(e){return function(){i(e,p),""===e.value&&(e.blur(),P.moveCaret(e,0))}}(e)),P.addEventListener(e,"click",function(e){return function(){e===n()&&e.value===e.getAttribute(k)&&"true"===e.getAttribute(I)&&P.moveCaret(e,0)}}(e))),e.setAttribute(D,"true"),e.setAttribute(k,f),!d&&e===n()||a(e)}var l,c,d,u,p,h,m,f,g,v,S,y,C,b=["text","search","url","tel","email","password","number","textarea"],w=[27,33,34,35,36,37,38,39,40,8,46],A="placeholdersjs",x=RegExp("(?:^|\\s)"+A+"(?!\\S)"),k="data-placeholder-value",I="data-placeholder-active",_="data-placeholder-type",$="data-placeholder-submit",D="data-placeholder-bound",T="data-placeholder-maxlength",F=document.createElement("input"),M=document.getElementsByTagName("head")[0],L=document.documentElement,E=e.Placeholders,P=E.Utils;if(E.nativeSupport=void 0!==F.placeholder,!E.nativeSupport){for(l=document.getElementsByTagName("input"),c=document.getElementsByTagName("textarea"),d="false"===L.getAttribute("data-placeholder-focus"),u="false"!==L.getAttribute("data-placeholder-live"),(h=document.createElement("style")).type="text/css",m=document.createTextNode("."+A+" { color:#ccc; }"),h.styleSheet?h.styleSheet.cssText=m.nodeValue:h.appendChild(m),M.insertBefore(h,M.firstChild),C=0,y=l.length+c.length;C<y;C++)S=l.length>C?l[C]:c[C-l.length],(f=S.attributes.placeholder)&&((f=f.nodeValue)&&P.inArray(b,S.type)&&s(S));g=setInterval(function(){for(C=0,y=l.length+c.length;C<y;C++)S=l.length>C?l[C]:c[C-l.length],(f=S.attributes.placeholder)?(f=f.nodeValue)&&P.inArray(b,S.type)&&(S.getAttribute(D)||s(S),f===S.getAttribute(k)&&("password"!==S.type||S.getAttribute(_))||("password"===S.type&&!S.getAttribute(_)&&P.changeType(S,"text")&&S.setAttribute(_,"password"),S.value===S.getAttribute(k)&&(S.value=f),S.setAttribute(k,f))):S.getAttribute(I)&&(i(S),S.removeAttribute(k));u||clearInterval(g)},100)}P.addEventListener(e,"beforeunload",function(){E.disable()}),E.disable=E.nativeSupport?t:o,E.enable=E.nativeSupport?t:function(e){r(e,a)}}(this),function(e){function i(e,t){var n;t=t||{},this._id=i._generateUUID(),this._promise=t.promise||Promise,this._frameId=t.frameId||"CrossStorageClient-"+this._id,this._origin=i._getOrigin(e),this._requests={},this._connected=!1,this._closed=!1,this._count=0,this._timeout=t.timeout||15e3,this._listener=null,this._installListener(),t.frameId&&(n=document.getElementById(t.frameId)),n&&this._poll(),n=n||this._createFrame(e),this._hub=n.contentWindow}i.frameStyle={display:"none",position:"absolute",top:"-999px",left:"-999px"},i._getOrigin=function(e){var t;return(t=document.createElement("a")).href=e,t.host||(t=window.location),((t.protocol&&":"!==t.protocol?t.protocol:window.location.protocol)+"//"+t.host).replace(/:80$|:443$/,"")},i._generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},i.prototype.onConnect=function(){var i=this;return this._connected?this._promise.resolve():this._closed?this._promise.reject(new Error("CrossStorageClient has closed")):(this._requests.connect||(this._requests.connect=[]),new this._promise(function(t,n){i._requests.connect.push(function(e){if(clearTimeout(setTimeout(function(){n(new Error("CrossStorageClient could not connect"))},i._timeout)),e)return n(e);t()})}))},i.prototype.set=function(e,t){return this._request("set",{key:e,value:t})},i.prototype.get=function(e){var t=Array.prototype.slice.call(arguments);return this._request("get",{keys:t})},i.prototype.del=function(){var e=Array.prototype.slice.call(arguments);return this._request("del",{keys:e})},i.prototype.clear=function(){return this._request("clear")},i.prototype.getKeys=function(){return this._request("getKeys")},i.prototype.close=function(){var e=document.getElementById(this._frameId);e&&e.parentNode.removeChild(e),window.removeEventListener?window.removeEventListener("message",this._listener,!1):window.detachEvent("onmessage",this._listener),this._connected=!1,this._closed=!0},i.prototype._installListener=function(){var a=this;this._listener=function(e){var t,n,i;if(!a._closed&&e.data&&"string"==typeof e.data&&("null"===e.origin?"file://":e.origin)===a._origin)if("cross-storage:unavailable"!==e.data){if(-1!==e.data.indexOf("cross-storage:")&&!a._connected){if(a._connected=!0,!a._requests.connect)return;for(t=0;t<a._requests.connect.length;t++)a._requests.connect[t](n);delete a._requests.connect}if("cross-storage:ready"!==e.data){try{i=JSON.parse(e.data)}catch(e){return}i.id&&a._requests[i.id]&&a._requests[i.id](i.error,i.result)}}else{if(a._closed||a.close(),!a._requests.connect)return;for(n=new Error("Closing client. Could not access localStorage in hub."),t=0;t<a._requests.connect.length;t++)a._requests.connect[t](n)}},window.addEventListener?window.addEventListener("message",this._listener,!1):window.attachEvent("onmessage",this._listener)},i.prototype._poll=function(){var e,t,n;n="file://"===(e=this)._origin?"*":e._origin,t=setInterval(function(){if(e._connected)return clearInterval(t);e._hub&&e._hub.postMessage("cross-storage:poll",n)},1e3)},i.prototype._createFrame=function(e){var t,n;for(n in(t=window.document.createElement("iframe")).id=this._frameId,i.frameStyle)i.frameStyle.hasOwnProperty(n)&&(t.style[n]=i.frameStyle[n]);return window.document.body.appendChild(t),t.src=e,t},i.prototype._request=function(e,t){var a,r;return this._closed?this._promise.reject(new Error("CrossStorageClient has closed")):((r=this)._count++,a={id:this._id+":"+r._count,method:"cross-storage:"+e,params:t},new this._promise(function(n,i){var e,t;r._requests[a.id]=function(e,t){if(clearTimeout(setTimeout(function(){r._requests[a.id]&&(delete r._requests[a.id],i(new Error("Timeout: could not perform "+a.method)))},r._timeout)),delete r._requests[a.id],e)return i(new Error(e));n(t)},Array.prototype.toJSON&&(e=Array.prototype.toJSON,Array.prototype.toJSON=null),t="file://"===r._origin?"*":r._origin,r._hub.postMessage(JSON.stringify(a),t),e&&(Array.prototype.toJSON=e)}))},"undefined"!=typeof module&&module.exports?module.exports=i:"undefined"!=typeof exports?exports.CrossStorageClient=i:"function"==typeof define&&define.amd?define([],function(){return i}):e.CrossStorageClient=i}(this);var SCM=SCM||{};SCM.Utilities=SCM.Utilities||{},SCM.Utilities.LocalStorage=function(){"use strict";var o="SCM",i=window.localStorage,a=[],r=[],s=[];return{getItem:function(e,t){var n=(t=t||i).getItem(o+"."+e);return JSON.parse(n)},setItem:function(e,t,n){(n=n||i).setItem(o+"."+e,JSON.stringify(t))},removeItem:function(e,t){(t=t||i).removeItem(o+"."+e)},getItemCrossDomainNoCache:e,getItemCrossDomain:function(t,n){var i=l(n)+"."+t;void 0===CrossStorageClient?console.error("CrossStorageClient library is not available.  Falling back to localStorage"):u(n,t)||function(e,t){var n=e+"::"+t;return-1!==r.indexOf(n)}(n,t)||(function(e,t){var n=e+"::"+t;-1===r.indexOf(n)&&r.push(n)}(n,t),e(t,n).then(function(e){e&&(u(n,t)||(d(n,t),SCM.Utilities.LocalStorage.setItem(i,e)))}).catch(function(e){console.error("Failed to retrieve from cross-domain localStorage :: "+e.message)}));return SCM.Utilities.LocalStorage.getItem(i)},setItemCrossDomain:function(e,t,n){var i,a=l(n)+"."+e;if(SCM.Utilities.LocalStorage.setItem(a,t),d(n,e),void 0===CrossStorageClient)console.error("CrossStorageClient library is not available.  Falling back to localStorage"),i=Promise.reject("CrossStorageClient library is not available");else{var r=c(n);i=r.onConnect().then(function(){return r.set(o+"."+e,JSON.stringify(t))}).catch(function(e){console.error("Failed to retrieve / set cross-domain localStorage :: "+e.message)})}return i},removeItemCrossDomain:function(e,t){if(void 0===CrossStorageClient)console.error("CrossStorageClient library is not available.  Falling back to localStorage");else{var n=c(t);n.onConnect().then(function(){return n.del(o+"."+e)}).catch(function(e){console.error("Failed to save to cross-domain localStorage :: "+e.message)})}SCM.Utilities.LocalStorage.removeItem(l(t)+"."+e)}};function e(t,e){var n;l(e);if(void 0===CrossStorageClient)console.error("CrossStorageClient library is not available."),n=Promise.reject("CrossStorageClient library is not available");else{var i=c(e);n=i.onConnect().then(function(e){return i.get(o+"."+t)}).then(function(e){return JSON.parse(e)}).catch(function(e){throw console.error("Failed to retrieve from cross-domain localStorage (nocache) :: "+e.message),e.message.includes("Could not access localStorage in hub")&&console.warn("It seems that the browser is set to block third-party cookies and data.  Cross-domain localStorage cannot function in this state."),e})}return n}function l(e){return $("<a>",{href:e}).prop("hostname")}function c(e){for(var t=0;t<s.length;t++)if(s[t].hubUrl===e)return s[t].storage;var n=new CrossStorageClient(e,{timeout:15e3});return s.push({hubUrl:e,storage:n}),n}function d(e,t){var n=e+"::"+t;-1===a.indexOf(n)&&a.push(n)}function u(e,t){var n=e+"::"+t;return-1!==a.indexOf(n)}}();var SCM=SCM||{};SCM.Utilities=SCM.Utilities||{},SCM.Utilities.LocalStorage=SCM.Utilities.LocalStorage||{},SCM.SharedWidgets=SCM.SharedWidgets||{},SCM.SharedWidgets.UserPersonalization=function(){var s="SharedWidgets.UserPersonalization",l=[];return{AddToLocalStorage:function(e,n){var t=$(e),i=c(),a=(i=i||{Items:[]}).Items;t.each(function(){var e=$(this).attr(n),t=JSON.parse(e);"0"!==t.id&&a.push(t)}),i.Items=d(a,200),SCM.Utilities.LocalStorage.setItem(s,i)},GetFromLocalStorage:c,AddToCrossDomainLocalStorage:function(e,i,a){$(e).each(function(){var e=$(this),r=e.attr(i),t=function(e){return $("<a>",{href:e}).prop("hostname")}(r),n=t+"."+s,o=e.attr(a);!function(e,t){"string"==typeof t&&(t=JSON.parse(t));var n=c(e),i=(n=n||{Items:[]}).Items;"0"!==t.id&&(i.push(t),n.Items=d(i,200),SCM.Utilities.LocalStorage.setItem(e,n))}(n,o),l.includes(t)||SCM.Utilities.LocalStorage.getItemCrossDomainNoCache(s,r).then(function(e){var t=e||{Items:[]},n=t.Items,i=o,a=JSON.parse(i);"0"!==a.id&&n.push(a),t.Items=d(n,200),SCM.Utilities.LocalStorage.setItemCrossDomain(s,t,r)}).catch(function(e){console.error("Failed to get value from cross-domain storage.  Falling back to regular localStorage."),l.push(t)})})},GetFromCrossDomainLocalStorage:function(e){return SCM.Utilities.LocalStorage.getItemCrossDomain(s,e)}};function c(e){return e=e||s,SCM.Utilities.LocalStorage.getItem(e)}function d(e,t){var n=e.length-t;return 0<n&&e.splice(0,n),e}}(),jQuery(document).ready(function(e){SCM.SharedWidgets.UserPersonalization.AddToLocalStorage(".SCM-SharedWidgets-LocalStorage-UserContentAccessWrite","data-values")});var SCM=SCM||{};SCM.SharedWidgets=SCM.SharedWidgets||{},SCM.SharedWidgets.UserPersonalization=SCM.SharedWidgets.UserPersonalization||{},SCM.SharedWidgets.AsyncWidgetLoader=function(){return{LoadWidget:loadWidget};function loadWidget(elementClass,elementAttrUrl,elementAttrParams,requestType){var domItems=$(elementClass);domItems.each(function(){var domObj=$(this),dataUrl=domObj.attr(elementAttrUrl),dataParams=domObj.attr(elementAttrParams),params=buildParameters(dataParams);$.ajax({url:dataUrl,data:params,type:requestType,success:function(e){domObj.parent().replaceWith(e);var t=document.createEvent("Event");t.initEvent(elementClass.replace(".","")+"_LOADED",!0,!0),window.dispatchEvent(t),SCM&&SCM.EventEmitter&&"object"==typeof SCM.EventEmitter&&SCM.EventEmitter.publish(elementClass+"_LOADED")},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})})}function buildParameters(e){var t,n=JSON.parse(e),i=n.parameters,a=n.dynamicParameters;return void 0!==a&&void 0!==a.localParams&&"[REPLACE_WITH_LOCAL]"===a.localParams&&(t=SCM.SharedWidgets.UserPersonalization.GetFromLocalStorage(),a.localParams=t,i.Items=JSON.stringify(t||{Items:[]})),void 0!==a&&void 0!==a.localParams&&"[REPLACE_WITH_CROSSDOMAIN_LOCAL]"===a.localParams&&void 0!==a.crossDomainUrl&&(t=SCM.SharedWidgets.UserPersonalization.GetFromCrossDomainLocalStorage(a.crossDomainUrl),a.localParams=t,i.Items=JSON.stringify(t||{Items:[]})),i}}(),jQuery(document).ready(function(e){SCM.SharedWidgets.AsyncWidgetLoader.LoadWidget(".SCM-SharedWidgets-AsyncWidgetLoader","data-url","data-params","POST")});var SCM=SCM||{},App=App||{},$,doc,win;!function(i,a,r){var o="instOpenUrlKey_";i.replaceOpenUrlPlaceHolders=function(e,n){null!==n&&""!==n&&e.each(function(){var e=a(this).attr("data-targetId"),t=n.replace("{openUrlTargetId}",e);a(this).after(t),a(this).parent().show(),a(this).remove()})},i.getAndReplaceOpenUrlPlaceHolders=function(n){a.ajax({type:"POST",url:"/ThirdParty/InstitutionOpenUrlTemplate",dataType:"json",success:function(e){if(null!==e&&"undefined"!==e){var t="";1==e.DisplayOpenUrlLink&&(t=null!==e.LinkImageSource&&""!==e.LinkImageSource?" <a target='_blank' href='"+e.TargetUrl+"'><img src='"+e.LinkImageSource+"'/></a> ":" <a target='_blank' href='"+e.TargetUrl+"'> "+e.LinkImageText+" </a> "),i.replaceOpenUrlPlaceHolders(n,t),null!==r&&null!==window.sessionStorage&&void 0!==window.App.LoginUserInfo&&void 0!==window.App.LoginUserInfo.currentSessionId&&r.setItem(o+window.App.LoginUserInfo.currentSessionId,t,window.sessionStorage)}},error:function(e){}})},i.checkAndReplaceOpenUrlPlaceHolders=function(){if(void 0!==window.App.LoginUserInfo&&0<window.App.LoginUserInfo.isInstLoggedIn){var e=a('span[class="inst-open-url-holders"]');if(null!=e&&0<e.length)if(null!==r&&null!==window.sessionStorage&&void 0!==window.App.LoginUserInfo.currentSessionId){var t=r.getItem(o+window.App.LoginUserInfo.currentSessionId,window.sessionStorage);null!==t?i.replaceOpenUrlPlaceHolders(e,t):i.getAndReplaceOpenUrlPlaceHolders(e)}else i.getAndReplaceOpenUrlPlaceHolders(e)}else a('span[class="inst-open-url-holders"]').remove()},i.init=function(){i.checkAndReplaceOpenUrlPlaceHolders()}}(SCM.InstitutionOpenUrl=SCM.InstitutionOpenUrl||{},jQuery,SCM.Utilities.LocalStorage),"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),function(s,l,c){var n={init:function(e,t){this.$elem=s(t),this.options=s.extend({},s.fn.owlCarousel.options,this.$elem.data(),e),this.userOptions=e,this.loadContent()},loadContent:function(){var e,i=this;"function"==typeof i.options.beforeInit&&i.options.beforeInit.apply(this,[i.$elem]),"string"==typeof i.options.jsonPath?(e=i.options.jsonPath,s.getJSON(e,function(e){var t,n="";if("function"==typeof i.options.jsonSuccess)i.options.jsonSuccess.apply(this,[e]);else{for(t in e.owl)e.owl.hasOwnProperty(t)&&(n+=e.owl[t].item);i.$elem.html(n)}i.logIn()})):i.logIn()},logIn:function(){this.$elem.data("owl-originalStyles",this.$elem.attr("style")),this.$elem.data("owl-originalClasses",this.$elem.attr("class")),this.$elem.css({opacity:0}),this.orignalItems=this.options.items,this.checkBrowser(),this.wrapperWidth=0,this.checkVisible=null,this.setVars()},setVars:function(){if(0===this.$elem.children().length)return!1;this.baseClass(),this.eventTypes(),this.$userItems=this.$elem.children(),this.itemsAmount=this.$userItems.length,this.wrapItems(),this.$owlItems=this.$elem.find(".owl-item"),this.$owlWrapper=this.$elem.find(".owl-wrapper"),this.playDirection="next",this.prevItem=0,this.prevArr=[0],this.currentItem=0,this.customEvents(),this.onStartup()},onStartup:function(){this.updateItems(),this.calculateAll(),this.buildControls(),this.updateControls(),this.response(),this.moveEvents(),this.stopOnHover(),this.owlStatus(),!1!==this.options.transitionStyle&&this.transitionTypes(this.options.transitionStyle),!0===this.options.autoPlay&&(this.options.autoPlay=5e3),this.play(),this.$elem.find(".owl-wrapper").css("display","block"),this.$elem.is(":visible")?this.$elem.css("opacity",1):this.watchVisibility(),this.onstartup=!1,this.eachMoveUpdate(),"function"==typeof this.options.afterInit&&this.options.afterInit.apply(this,[this.$elem])},eachMoveUpdate:function(){!0===this.options.lazyLoad&&this.lazyLoad(),!0===this.options.autoHeight&&this.autoHeight(),this.onVisibleItems(),"function"==typeof this.options.afterAction&&this.options.afterAction.apply(this,[this.$elem])},updateVars:function(){"function"==typeof this.options.beforeUpdate&&this.options.beforeUpdate.apply(this,[this.$elem]),this.watchVisibility(),this.updateItems(),this.calculateAll(),this.updatePosition(),this.updateControls(),this.eachMoveUpdate(),"function"==typeof this.options.afterUpdate&&this.options.afterUpdate.apply(this,[this.$elem])},reload:function(){var e=this;l.setTimeout(function(){e.updateVars()},0)},watchVisibility:function(){var e=this;if(!1!==e.$elem.is(":visible"))return!1;e.$elem.css({opacity:0}),l.clearInterval(e.autoPlayInterval),l.clearInterval(e.checkVisible),e.checkVisible=l.setInterval(function(){e.$elem.is(":visible")&&(e.reload(),e.$elem.animate({opacity:1},200),l.clearInterval(e.checkVisible))},500)},wrapItems:function(){this.$userItems.wrapAll('<div class="owl-wrapper">').wrap('<div class="owl-item"></div>'),this.$elem.find(".owl-wrapper").wrap('<div class="owl-wrapper-outer">'),this.wrapperOuter=this.$elem.find(".owl-wrapper-outer"),this.$elem.css("display","block")},baseClass:function(){var e=this.$elem.hasClass(this.options.baseClass),t=this.$elem.hasClass(this.options.theme);e||this.$elem.addClass(this.options.baseClass),t||this.$elem.addClass(this.options.theme)},updateItems:function(){var e,t;if(!1===this.options.responsive)return!1;if(!0===this.options.singleItem)return this.options.items=this.orignalItems=1,this.options.itemsCustom=!1,this.options.itemsDesktop=!1,this.options.itemsDesktopSmall=!1,this.options.itemsTablet=!1,this.options.itemsTabletSmall=!1,this.options.itemsMobile=!1;if((e=s(this.options.responsiveBaseWidth).width())>(this.options.itemsDesktop[0]||this.orignalItems)&&(this.options.items=this.orignalItems),!1!==this.options.itemsCustom)for(this.options.itemsCustom.sort(function(e,t){return e[0]-t[0]}),t=0;t<this.options.itemsCustom.length;t+=1)this.options.itemsCustom[t][0]<=e&&(this.options.items=this.options.itemsCustom[t][1]);else e<=this.options.itemsDesktop[0]&&!1!==this.options.itemsDesktop&&(this.options.items=this.options.itemsDesktop[1]),e<=this.options.itemsDesktopSmall[0]&&!1!==this.options.itemsDesktopSmall&&(this.options.items=this.options.itemsDesktopSmall[1]),e<=this.options.itemsTablet[0]&&!1!==this.options.itemsTablet&&(this.options.items=this.options.itemsTablet[1]),e<=this.options.itemsTabletSmall[0]&&!1!==this.options.itemsTabletSmall&&(this.options.items=this.options.itemsTabletSmall[1]),e<=this.options.itemsMobile[0]&&!1!==this.options.itemsMobile&&(this.options.items=this.options.itemsMobile[1]);this.options.items>this.itemsAmount&&!0===this.options.itemsScaleUp&&(this.options.items=this.itemsAmount)},response:function(){var e,t,n=this;if(!0!==n.options.responsive)return!1;t=s(l).width(),n.resizer=function(){s(l).width()!==t&&(!1!==n.options.autoPlay&&l.clearInterval(n.autoPlayInterval),l.clearTimeout(e),e=l.setTimeout(function(){t=s(l).width(),n.updateVars()},n.options.responsiveRefreshRate))},s(l).resize(n.resizer)},updatePosition:function(){this.jumpTo(this.currentItem),!1!==this.options.autoPlay&&this.checkAp()},appendItemsSizes:function(){var n=this,i=0,a=n.itemsAmount-n.options.items;n.$owlItems.each(function(e){var t=s(this);t.css({width:n.itemWidth}).data("owl-item",Number(e)),0!=e%n.options.items&&e!==a||a<e||(i+=1),t.data("owl-roundPages",i)})},appendWrapperSizes:function(){this.$owlWrapper.css({width:this.$owlItems.length*this.itemWidth*2,left:0}),this.appendItemsSizes()},calculateAll:function(){this.calculateWidth(),this.appendWrapperSizes(),this.loops(),this.max()},calculateWidth:function(){this.itemWidth=Math.round(this.$elem.width()/this.options.items)},max:function(){var e=-1*(this.itemsAmount*this.itemWidth-this.options.items*this.itemWidth);return this.options.items>this.itemsAmount?this.maximumPixels=e=this.maximumItem=0:(this.maximumItem=this.itemsAmount-this.options.items,this.maximumPixels=e),e},min:function(){return 0},loops:function(){var e,t,n=0,i=0;for(this.positionsInArray=[0],this.pagesInArray=[],e=0;e<this.itemsAmount;e+=1)i+=this.itemWidth,this.positionsInArray.push(-i),!0===this.options.scrollPerPage&&((t=(t=s(this.$owlItems[e])).data("owl-roundPages"))!==n&&(this.pagesInArray[n]=this.positionsInArray[e],n=t))},buildControls:function(){!0!==this.options.navigation&&!0!==this.options.pagination||(this.owlControls=s('<div class="owl-controls"/>').toggleClass("clickable",!this.browser.isTouch).appendTo(this.$elem)),!0===this.options.pagination&&this.buildPagination(),!0===this.options.navigation&&this.buildButtons()},buildButtons:function(){var t=this,e=s('<div class="owl-buttons"/>');t.owlControls.append(e),t.buttonPrev=s("<div/>",{class:"owl-prev",html:t.options.navigationText[0]||""}),t.buttonNext=s("<div/>",{class:"owl-next",html:t.options.navigationText[1]||""}),e.append(t.buttonPrev).append(t.buttonNext),e.on("touchstart.owlControls mousedown.owlControls",'div[class^="owl"]',function(e){e.preventDefault()}),e.on("touchend.owlControls mouseup.owlControls",'div[class^="owl"]',function(e){e.preventDefault(),s(this).hasClass("owl-next")?t.next():t.prev()})},buildPagination:function(){var t=this;t.paginationWrapper=s('<div class="owl-pagination"/>'),t.owlControls.append(t.paginationWrapper),t.paginationWrapper.on("touchend.owlControls mouseup.owlControls",".owl-page",function(e){e.preventDefault(),Number(s(this).data("owl-page"))!==t.currentItem&&t.goTo(Number(s(this).data("owl-page")),!0)})},updatePagination:function(){var e,t,n,i,a,r;if(!1===this.options.pagination)return!1;for(this.paginationWrapper.html(""),e=0,t=this.itemsAmount-this.itemsAmount%this.options.items,i=0;i<this.itemsAmount;i+=1)0==i%this.options.items&&(e+=1,t===i&&(n=this.itemsAmount-this.options.items),a=s("<div/>",{class:"owl-page"}),r=s("<span></span>",{text:!0===this.options.paginationNumbers?e:"",class:!0===this.options.paginationNumbers?"owl-numbers":""}),a.append(r),a.data("owl-page",t===i?n:i),a.data("owl-roundPages",e),this.paginationWrapper.append(a));this.checkPagination()},checkPagination:function(){var e=this;if(!1===e.options.pagination)return!1;e.paginationWrapper.find(".owl-page").each(function(){s(this).data("owl-roundPages")===s(e.$owlItems[e.currentItem]).data("owl-roundPages")&&(e.paginationWrapper.find(".owl-page").removeClass("active"),s(this).addClass("active"))})},checkNavigation:function(){if(!1===this.options.navigation)return!1;!1===this.options.rewindNav&&(0===this.currentItem&&0===this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.addClass("disabled")):0===this.currentItem&&0!==this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.removeClass("disabled")):this.currentItem===this.maximumItem?(this.buttonPrev.removeClass("disabled"),this.buttonNext.addClass("disabled")):0!==this.currentItem&&this.currentItem!==this.maximumItem&&(this.buttonPrev.removeClass("disabled"),this.buttonNext.removeClass("disabled")))},updateControls:function(){this.updatePagination(),this.checkNavigation(),this.owlControls&&(this.options.items>=this.itemsAmount?this.owlControls.hide():this.owlControls.show())},destroyControls:function(){this.owlControls&&this.owlControls.remove()},next:function(e){if(this.isTransition)return!1;if(this.currentItem+=!0===this.options.scrollPerPage?this.options.items:1,this.currentItem>this.maximumItem+(!0===this.options.scrollPerPage?this.options.items-1:0)){if(!0!==this.options.rewindNav)return this.currentItem=this.maximumItem,!1;this.currentItem=0,e="rewind"}this.goTo(this.currentItem,e)},prev:function(e){if(this.isTransition)return!1;if(this.currentItem=!0===this.options.scrollPerPage&&0<this.currentItem&&this.currentItem<this.options.items?0:this.currentItem-(!0===this.options.scrollPerPage?this.options.items:1),this.currentItem<0){if(!0!==this.options.rewindNav)return this.currentItem=0,!1;this.currentItem=this.maximumItem,e="rewind"}this.goTo(this.currentItem,e)},goTo:function(e,t,n){var i=this;return!i.isTransition&&("function"==typeof i.options.beforeMove&&i.options.beforeMove.apply(this,[i.$elem]),e>=i.maximumItem?e=i.maximumItem:e<=0&&(e=0),i.currentItem=i.owl.currentItem=e,!1!==i.options.transitionStyle&&"drag"!==n&&1===i.options.items&&!0===i.browser.support3d?(i.swapSpeed(0),!0===i.browser.support3d?i.transition3d(i.positionsInArray[e]):i.css2slide(i.positionsInArray[e],1),i.afterGo(),i.singleItemTransition(),!1):(e=i.positionsInArray[e],!0===i.browser.support3d?(!(i.isCss3Finish=!1)===t?(i.swapSpeed("paginationSpeed"),l.setTimeout(function(){i.isCss3Finish=!0},i.options.paginationSpeed)):"rewind"===t?(i.swapSpeed(i.options.rewindSpeed),l.setTimeout(function(){i.isCss3Finish=!0},i.options.rewindSpeed)):(i.swapSpeed("slideSpeed"),l.setTimeout(function(){i.isCss3Finish=!0},i.options.slideSpeed)),i.transition3d(e)):!0===t?i.css2slide(e,i.options.paginationSpeed):"rewind"===t?i.css2slide(e,i.options.rewindSpeed):i.css2slide(e,i.options.slideSpeed),void i.afterGo()))},jumpTo:function(e){"function"==typeof this.options.beforeMove&&this.options.beforeMove.apply(this,[this.$elem]),e>=this.maximumItem||-1===e?e=this.maximumItem:e<=0&&(e=0),this.swapSpeed(0),!0===this.browser.support3d?this.transition3d(this.positionsInArray[e]):this.css2slide(this.positionsInArray[e],1),this.currentItem=this.owl.currentItem=e,this.afterGo()},afterGo:function(){this.prevArr.push(this.currentItem),this.prevItem=this.owl.prevItem=this.prevArr[this.prevArr.length-2],this.prevArr.shift(0),this.prevItem!==this.currentItem&&(this.checkPagination(),this.checkNavigation(),this.eachMoveUpdate(),!1!==this.options.autoPlay&&this.checkAp()),"function"==typeof this.options.afterMove&&this.prevItem!==this.currentItem&&this.options.afterMove.apply(this,[this.$elem])},stop:function(){this.apStatus="stop",l.clearInterval(this.autoPlayInterval)},checkAp:function(){"stop"!==this.apStatus&&this.play()},play:function(){var e=this;if(!(e.apStatus="play")===e.options.autoPlay)return!1;l.clearInterval(e.autoPlayInterval),e.autoPlayInterval=l.setInterval(function(){e.next(!0)},e.options.autoPlay)},swapSpeed:function(e){"slideSpeed"===e?this.$owlWrapper.css(this.addCssSpeed(this.options.slideSpeed)):"paginationSpeed"===e?this.$owlWrapper.css(this.addCssSpeed(this.options.paginationSpeed)):"string"!=typeof e&&this.$owlWrapper.css(this.addCssSpeed(e))},addCssSpeed:function(e){return{"-webkit-transition":"all "+e+"ms ease","-moz-transition":"all "+e+"ms ease","-o-transition":"all "+e+"ms ease",transition:"all "+e+"ms ease"}},removeTransition:function(){return{"-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""}},doTranslate:function(e){return{"-webkit-transform":"translate3d("+e+"px, 0px, 0px)","-moz-transform":"translate3d("+e+"px, 0px, 0px)","-o-transform":"translate3d("+e+"px, 0px, 0px)","-ms-transform":"translate3d("+e+"px, 0px, 0px)",transform:"translate3d("+e+"px, 0px,0px)"}},transition3d:function(e){this.$owlWrapper.css(this.doTranslate(e))},css2move:function(e){this.$owlWrapper.css({left:e})},css2slide:function(e,t){var n=this;n.isCssFinish=!1,n.$owlWrapper.stop(!0,!0).animate({left:e},{duration:t||n.options.slideSpeed,complete:function(){n.isCssFinish=!0}})},checkBrowser:function(){var e=c.createElement("div");e.style.cssText="  -moz-transform:translate3d(0px, 0px, 0px); -ms-transform:translate3d(0px, 0px, 0px); -o-transform:translate3d(0px, 0px, 0px); -webkit-transform:translate3d(0px, 0px, 0px); transform:translate3d(0px, 0px, 0px)",e=e.style.cssText.match(/translate3d\(0px, 0px, 0px\)/g),this.browser={support3d:null!==e&&1===e.length,isTouch:"ontouchstart"in l||l.navigator.msMaxTouchPoints}},moveEvents:function(){!1===this.options.mouseDrag&&!1===this.options.touchDrag||(this.gestures(),this.disabledEvents())},eventTypes:function(){var e=["s","e","x"];this.ev_types={},!0===this.options.mouseDrag&&!0===this.options.touchDrag?e=["touchstart.owl mousedown.owl","touchmove.owl mousemove.owl","touchend.owl touchcancel.owl mouseup.owl"]:!1===this.options.mouseDrag&&!0===this.options.touchDrag?e=["touchstart.owl","touchmove.owl","touchend.owl touchcancel.owl"]:!0===this.options.mouseDrag&&!1===this.options.touchDrag&&(e=["mousedown.owl","mousemove.owl","mouseup.owl"]),this.ev_types.start=e[0],this.ev_types.move=e[1],this.ev_types.end=e[2]},disabledEvents:function(){this.$elem.on("dragstart.owl",function(e){e.preventDefault()}),this.$elem.on("mousedown.disableTextSelect",function(e){return s(e.target).is("input, textarea, select, option")})},gestures:function(){function n(e){if(void 0!==e.touches)return{x:e.touches[0].pageX,y:e.touches[0].pageY};if(void 0===e.touches){if(void 0!==e.pageX)return{x:e.pageX,y:e.pageY};if(void 0===e.pageX)return{x:e.clientX,y:e.clientY}}}function i(e){"on"===e?(s(c).on(r.ev_types.move,t),s(c).on(r.ev_types.end,a)):"off"===e&&(s(c).off(r.ev_types.move),s(c).off(r.ev_types.end))}function t(e){e=e.originalEvent||e||l.event,r.newPosX=n(e).x-o.offsetX,r.newPosY=n(e).y-o.offsetY,r.newRelativeX=r.newPosX-o.relativePos,"function"==typeof r.options.startDragging&&!0!==o.dragging&&0!==r.newRelativeX&&(o.dragging=!0,r.options.startDragging.apply(r,[r.$elem])),(8<r.newRelativeX||r.newRelativeX<-8)&&!0===r.browser.isTouch&&(void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1,o.sliding=!0),(10<r.newPosY||r.newPosY<-10)&&!1===o.sliding&&s(c).off("touchmove.owl"),r.newPosX=Math.max(Math.min(r.newPosX,r.newRelativeX/5),r.maximumPixels+r.newRelativeX/5),!0===r.browser.support3d?r.transition3d(r.newPosX):r.css2move(r.newPosX)}function a(e){var t;(e=e.originalEvent||e||l.event).target=e.target||e.srcElement,!(o.dragging=!1)!==r.browser.isTouch&&r.$owlWrapper.removeClass("grabbing"),r.dragDirection=r.newRelativeX<0?r.owl.dragDirection="left":r.owl.dragDirection="right",0!==r.newRelativeX&&(t=r.getNewPosition(),r.goTo(t,!1,"drag"),o.targetElement===e.target&&!0!==r.browser.isTouch&&(s(e.target).on("click.disable",function(e){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),s(e.target).off("click.disable")}),t=(e=s._data(e.target,"events").click).pop(),e.splice(0,0,t))),i("off")}var r=this,o={offsetX:0,offsetY:0,baseElWidth:0,relativePos:0,position:null,minSwipe:null,maxSwipe:null,sliding:null,dargging:null,targetElement:null};r.isCssFinish=!0,r.$elem.on(r.ev_types.start,".owl-wrapper",function(e){var t;if(3===(e=e.originalEvent||e||l.event).which)return!1;if(!(r.itemsAmount<=r.options.items)){if(!1===r.isCssFinish&&!r.options.dragBeforeAnimFinish||!1===r.isCss3Finish&&!r.options.dragBeforeAnimFinish)return!1;!1!==r.options.autoPlay&&l.clearInterval(r.autoPlayInterval),!0===r.browser.isTouch||r.$owlWrapper.hasClass("grabbing")||r.$owlWrapper.addClass("grabbing"),r.newPosX=0,r.newRelativeX=0,s(this).css(r.removeTransition()),t=s(this).position(),o.relativePos=t.left,o.offsetX=n(e).x-t.left,o.offsetY=n(e).y-t.top,i("on"),o.sliding=!1,o.targetElement=e.target||e.srcElement}})},getNewPosition:function(){var e=this.closestItem();return e>this.maximumItem?e=this.currentItem=this.maximumItem:0<=this.newPosX&&(this.currentItem=e=0),e},closestItem:function(){var n=this,i=!0===n.options.scrollPerPage?n.pagesInArray:n.positionsInArray,a=n.newPosX,r=null;return s.each(i,function(e,t){a-n.itemWidth/20>i[e+1]&&a-n.itemWidth/20<t&&"left"===n.moveDirection()?(r=t,n.currentItem=!0===n.options.scrollPerPage?s.inArray(r,n.positionsInArray):e):a+n.itemWidth/20<t&&a+n.itemWidth/20>(i[e+1]||i[e]-n.itemWidth)&&"right"===n.moveDirection()&&(!0===n.options.scrollPerPage?(r=i[e+1]||i[i.length-1],n.currentItem=s.inArray(r,n.positionsInArray)):(r=i[e+1],n.currentItem=e+1))}),n.currentItem},moveDirection:function(){var e;return this.newRelativeX<0?(e="right",this.playDirection="next"):(e="left",this.playDirection="prev"),e},customEvents:function(){var n=this;n.$elem.on("owl.next",function(){n.next()}),n.$elem.on("owl.prev",function(){n.prev()}),n.$elem.on("owl.play",function(e,t){n.options.autoPlay=t,n.play(),n.hoverStatus="play"}),n.$elem.on("owl.stop",function(){n.stop(),n.hoverStatus="stop"}),n.$elem.on("owl.goTo",function(e,t){n.goTo(t)}),n.$elem.on("owl.jumpTo",function(e,t){n.jumpTo(t)})},stopOnHover:function(){var e=this;!0===e.options.stopOnHover&&!0!==e.browser.isTouch&&!1!==e.options.autoPlay&&(e.$elem.on("mouseover",function(){e.stop()}),e.$elem.on("mouseout",function(){"stop"!==e.hoverStatus&&e.play()}))},lazyLoad:function(){var e,t,n,i;if(!1===this.options.lazyLoad)return!1;for(e=0;e<this.itemsAmount;e+=1)"loaded"!==(t=s(this.$owlItems[e])).data("owl-loaded")&&(n=t.data("owl-item"),"string"!=typeof(i=t.find(".lazyOwl")).data("src")?t.data("owl-loaded","loaded"):(void 0===t.data("owl-loaded")&&(i.hide(),t.addClass("loading").data("owl-loaded","checked")),(!0!==this.options.lazyFollow||n>=this.currentItem)&&n<this.currentItem+this.options.items&&i.length&&this.lazyPreload(t,i)))},lazyPreload:function(e,t){function n(){e.data("owl-loaded","loaded").removeClass("loading"),t.removeAttr("data-src"),"fade"===a.options.lazyEffect?t.fadeIn(400):t.show(),"function"==typeof a.options.afterLazyLoad&&a.options.afterLazyLoad.apply(this,[a.$elem])}var i,a=this,r=0;"DIV"===t.prop("tagName")?(t.css("background-image","url("+t.data("src")+")"),i=!0):t[0].src=t.data("src"),function e(){r+=1,a.completeImg(t.get(0))||!0===i?n():r<=100?l.setTimeout(e,100):n()}()},autoHeight:function(){function t(){var e=s(i.$owlItems[i.currentItem]).height();i.wrapperOuter.css("height",e+"px"),i.wrapperOuter.hasClass("autoHeight")||l.setTimeout(function(){i.wrapperOuter.addClass("autoHeight")},0)}var n,i=this,a=s(i.$owlItems[i.currentItem]).find("img");void 0!==a.get(0)?(n=0,function e(){n+=1,i.completeImg(a.get(0))?t():n<=100?l.setTimeout(e,100):i.wrapperOuter.css("height","")}()):t()},completeImg:function(e){return!(!e.complete||void 0!==e.naturalWidth&&0===e.naturalWidth)},onVisibleItems:function(){var e;for(!0===this.options.addClassActive&&this.$owlItems.removeClass("active"),this.visibleItems=[],e=this.currentItem;e<this.currentItem+this.options.items;e+=1)this.visibleItems.push(e),!0===this.options.addClassActive&&s(this.$owlItems[e]).addClass("active");this.owl.visibleItems=this.visibleItems},transitionTypes:function(e){this.outClass="owl-"+e+"-out",this.inClass="owl-"+e+"-in"},singleItemTransition:function(){var e=this,t=e.outClass,n=e.inClass,i=e.$owlItems.eq(e.currentItem),a=e.$owlItems.eq(e.prevItem),r=Math.abs(e.positionsInArray[e.currentItem])+e.positionsInArray[e.prevItem],o=Math.abs(e.positionsInArray[e.currentItem])+e.itemWidth/2;e.isTransition=!0,e.$owlWrapper.addClass("owl-origin").css({"-webkit-transform-origin":o+"px","-moz-perspective-origin":o+"px","perspective-origin":o+"px"}),a.css({position:"relative",left:r+"px"}).addClass(t).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){e.endPrev=!0,a.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend"),e.clearTransStyle(a,t)}),i.addClass(n).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){e.endCurrent=!0,i.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend"),e.clearTransStyle(i,n)})},clearTransStyle:function(e,t){e.css({position:"",left:""}).removeClass(t),this.endPrev&&this.endCurrent&&(this.$owlWrapper.removeClass("owl-origin"),this.isTransition=this.endCurrent=this.endPrev=!1)},owlStatus:function(){this.owl={userOptions:this.userOptions,baseElement:this.$elem,userItems:this.$userItems,owlItems:this.$owlItems,currentItem:this.currentItem,prevItem:this.prevItem,visibleItems:this.visibleItems,isTouch:this.browser.isTouch,browser:this.browser,dragDirection:this.dragDirection}},clearEvents:function(){this.$elem.off(".owl owl mousedown.disableTextSelect"),s(c).off(".owl owl"),s(l).off("resize",this.resizer)},unWrap:function(){0!==this.$elem.children().length&&(this.$owlWrapper.unwrap(),this.$userItems.unwrap().unwrap(),this.owlControls&&this.owlControls.remove()),this.clearEvents(),this.$elem.attr("style",this.$elem.data("owl-originalStyles")||"").attr("class",this.$elem.data("owl-originalClasses"))},destroy:function(){this.stop(),l.clearInterval(this.checkVisible),this.unWrap(),this.$elem.removeData()},reinit:function(e){e=s.extend({},this.userOptions,e),this.unWrap(),this.init(e,this.$elem)},addItem:function(e,t){var n;return!!e&&(0===this.$elem.children().length?(this.$elem.append(e),this.setVars(),!1):(this.unWrap(),(n=void 0===t||-1===t?-1:t)>=this.$userItems.length||-1===n?this.$userItems.eq(-1).after(e):this.$userItems.eq(n).before(e),void this.setVars()))},removeItem:function(e){if(0===this.$elem.children().length)return!1;e=void 0===e||-1===e?-1:e,this.unWrap(),this.$userItems.eq(e).remove(),this.setVars()}};s.fn.owlCarousel=function(t){return this.each(function(){if(!0===s(this).data("owl-init"))return!1;s(this).data("owl-init",!0);var e=Object.create(n);e.init(t,this),s.data(this,"owlCarousel",e)})},s.fn.owlCarousel.options={items:5,itemsCustom:!1,itemsDesktop:[1199,4],itemsDesktopSmall:[979,3],itemsTablet:[768,2],itemsTabletSmall:!1,itemsMobile:[479,1],singleItem:!1,itemsScaleUp:!1,slideSpeed:200,paginationSpeed:800,rewindSpeed:1e3,autoPlay:!1,stopOnHover:!1,navigation:!1,navigationText:["prev","next"],rewindNav:!0,scrollPerPage:!1,pagination:!0,paginationNumbers:!1,responsive:!0,responsiveRefreshRate:200,responsiveBaseWidth:l,baseClass:"owl-carousel",theme:"owl-theme",lazyLoad:!1,lazyFollow:!0,lazyEffect:"fade",autoHeight:!1,jsonPath:!1,jsonSuccess:!1,dragBeforeAnimFinish:!0,mouseDrag:!0,touchDrag:!0,addClassActive:!1,transitionStyle:!1,beforeUpdate:!1,afterUpdate:!1,beforeInit:!1,afterInit:!1,beforeMove:!1,afterMove:!1,afterAction:!1,startDragging:!1,afterLazyLoad:!1}}(jQuery,window,document),$=window.jQuery,win=$(window),doc=$(document),$.fn.stick_in_parent=function(){var w,e,A,t,x,n,k,I,a,_,D,T,F,M,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};for(T=i.sticky_class,x=i.inner_scrolling,D=i.recalc_every,_=i.parent,I=i.offset_top,k=i.spacer,A=i.bottoming,M=i.parent_height_minus,F=win.height(),w=doc.height(),null==I&&(I=0),null==_&&(_=void 0),null==x&&(x=!0),null==T&&(T="is_stuck"),null==A&&(A=!0),null==M&&(M=0),a=function(e){var t,n;return window.getComputedStyle?(e[0],t=window.getComputedStyle(e[0]),n=parseFloat(t.getPropertyValue("width"))+parseFloat(t.getPropertyValue("margin-left"))+parseFloat(t.getPropertyValue("margin-right")),"border-box"!==t.getPropertyValue("box-sizing")&&(n+=parseFloat(t.getPropertyValue("border-left-width"))+parseFloat(t.getPropertyValue("border-right-width"))+parseFloat(t.getPropertyValue("padding-left"))+parseFloat(t.getPropertyValue("padding-right"))),n):e.outerWidth(!0)},t=0,n=this.length;t<n;t++)e=this[t],function(r,o,s,l,c,d,u,p){var h,e,m,f,g,v,S,y,t,C,b,i;if(!r.data("sticky_kit")){if(r.data("sticky_kit",!0),g=w,S=r.parent(),null!=_&&(S=S.closest(_)),!S.length)throw"failed to find stick parent";if(h=m=!1,(b=null!=k?k&&r.closest(k):$("<div />"))&&b.css("position",r.css("position")),(y=function(){var e,t,n;if(!p)return F=win.height(),w=doc.height(),g=w,e=parseInt(S.css("border-top-width"),10),t=parseInt(S.css("padding-top"),10),o=0<M?M:parseInt(S.css("padding-bottom"),10),s=S.offset().top+e+t,l=S.height()-M,m&&(h=m=!1,null==k&&(r.insertAfter(b),b.detach()),r.css({position:"",top:"",width:"",bottom:""}).removeClass(T),n=!0),c=r.offset().top-(parseInt(r.css("margin-top"),10)||0)-I,d=r.outerHeight(!0),u=r.css("float"),b&&b.css({width:a(r),height:d,display:r.css("display"),"vertical-align":r.css("vertical-align"),float:u}),n?i():void 0})(),d!==l)f=void 0,v=I,C=D,i=function(){var e,t,n,i,a;if(!p)return n=!1,null!=C&&(C-=1)<=0&&(C=D,y(),n=!0),n||w===g||(y(),n=!0),i=win.scrollTop(),null!=f&&(t=i-f),f=i,m?(A&&(a=l+s<i+d+v,h&&!a&&(h=!1,r.css({position:"fixed",bottom:"",top:v}).trigger("sticky_kit:unbottom"))),i<c&&(m=!1,v=I,null==k&&("left"!==u&&"right"!==u||r.insertAfter(b),b.detach()),e={position:"",width:"",top:""},r.css(e).removeClass(T).trigger("sticky_kit:unstick")),x&&F<d+I&&(h||(v-=t,v=Math.max(F-d,v),v=Math.min(I,v),m&&r.css({top:v+"px"})))):c<i&&(m=!0,(e={position:"fixed",top:v}).width="border-box"===r.css("box-sizing")?r.outerWidth()+"px":r.width()+"px",r.css(e).addClass(T),null==k&&(r.after(b),"left"!==u&&"right"!==u||b.append(r)),r.trigger("sticky_kit:stick")),m&&A&&(null==a&&(a=l+s<i+d+v),!h&&a)?(h=!0,"static"===S.css("position")&&S.css({position:"relative"}),r.css({position:"absolute",bottom:o,top:"auto"}).trigger("sticky_kit:bottom")):void 0},t=function(){return y(),i()},e=function(){if(p=!0,win.off("touchmove",i),win.off("scroll",i),win.off("resize",t),$(document.body).off("sticky_kit:recalc",t),r.off("sticky_kit:detach",e),r.removeData("sticky_kit"),r.css({position:"",bottom:"",top:"",width:""}),S.position("position",""),m)return null==k&&("left"!==u&&"right"!==u||r.insertAfter(b),b.remove()),r.removeClass(T)},win.on("touchmove",i),win.on("scroll",i),win.on("resize",t),$(document.body).on("sticky_kit:recalc",t),r.on("sticky_kit:detach",e),setTimeout(i,0)}}($(e));return this};var SCM=SCM||{};SCM.ClientStatsMaster=function(r){function a(e,t){this.ActionFilterKey=e,this.ActionFilterValue=t}function o(e,t,n){this.SessionID=e,this.ClientID=t,this.SiteID=n}function s(e,t,n,i){this.UserSessionItem=new o("",0,r("#hdnSiteID").val()),this.ActionFilterType=new a(e,t),this.ActionDescription=n,this.ActionURL=i}function i(e,t,n,i){var a=new s(e,t,n,i).toJson();r.ajax({type:"POST",url:"/ClientTrackingHandler.ashx",data:a,contentType:"application/json; charset=utf-8",async:!0,processData:!0}).fail(function(e,t){window.console&&(console.log("jqXhr.responseText: "+e.responseText),console.log("status: "+t))})}return s.prototype.toJson=function(){return JSON.stringify(this)},{trackContentTabEvents:function(){var e=r(".tab-nav");e.on("click",".tab-nav-trigger",function(){var e=r(this).children(":first")[0],t=e.innerText.trim();t=t||e.textContent.trim(),i(3,"Tabs",t+=" was clicked",window.location.href)}),(e=r(".tabs--link-container")).on("click","a.tabs--link",function(){var e=r(this).children("span:first")[0],t=e.innerText.trim();t=t||e.textContent.trim(),i(3,"Tabs",t+=" was clicked",window.location.href)})},trackJumpLinkEvents:function(){r(".section-jump-links, .meta-author").on("click",".section-jump-link",function(){var e=r(this)[0].innerText.trim();i(3,e=e||r(this)[0].textContent.trim(),e+" was clicked",window.location.href)})},trackCrossReferenceLinkEvents:function(){r(".reference-content").on("click",".pubmed-link, .crossref-doi",function(){var e=r(this)[0].innerText.trim();e=e||r(this)[0].textContent.trim(),i(3,"CrossReferenceLink",e+=" was clicked",window.location.href)})},trackToolBoxEvents:function(){var e=r(".toolbar, .abstract-toolbar, .magazine-toolbar, .article-content");e.on("click","a.toolbar-tool",function(){var e=r(this).text().trim();i(3,"ToolBox",e+=" was clicked",window.location.href)}),e.on("click","a.toolbar-share",function(){i(3,"Share",r(this).text().trim(),window.location.href)})},trackAudioPlayAction:function(){r("audio.mp--audio-player").on("play",function(){i(3,"mediaPlayer","audio play/pause was clicked",window.location.href)})},trackPdfTurnAwayAction:function(e,t){if(e){i(8,"DirectPdfAccess","PDF is clicked for ArticleID = "+e,"http://"+function(e){var t=e.match(/\/data\/journals\/(\w+)\//i),n="";if(t){var i=t[1].toLowerCase();switch(i){case"jama":case"cardiology":case"oncology":n=i;break;case"derm":case"faci":case"neur":case"otol":case"surg":n="arch"+i;break;case"intemed":n="archinte";break;case"neurpsych":n="archneurpsyc";break;case"ophth":n="archopht";break;case"peds":n="archpedi";break;case"psych":n="archpsyc";break;default:n=i}}var a=window.location.hostname;return n&&(a=n+"."+a),a}(t)+"/pdfaccess.ashx?resouceid="+e+"&PDFSource=24")}},trackSingleAction:function(e,t,n){e.on("click",function(){i(3,t,n,window.location.href)})},trackGdprCookieAcceptance:function(e,t,n){i(e,t,n,window.location.href)}}}(jQuery),$(window).on("load",function(){SCM.ClientStatsMaster.trackContentTabEvents(),SCM.ClientStatsMaster.trackCrossReferenceLinkEvents(),SCM.ClientStatsMaster.trackJumpLinkEvents(),SCM.ClientStatsMaster.trackToolBoxEvents(),SCM.ClientStatsMaster.trackAudioPlayAction(),SCM.ClientStatsMaster.trackSingleAction($("a.view-large.figure-table-link"),"View Large","View Large was clicked"),SCM.ClientStatsMaster.trackSingleAction($("a.full-text-link"),"Fulltext Button","Fulltext button was clicked from abstract page")});var App=App||{};!function(e,n){e.init=function(){App.isAnyArticle&&(function(){var t=n(".meta-authors--etal");t.click(function(){var e=n(".meta-authors--remaining");t.hide(),e.addClass("accessible-show")})}(),function(){var e=n(".meta-articleinfo-jumplink");n(e.attr("href")).length&&e.addClass("target-exists")}(),n(".article-full-text .para i+a").each(function(){this.previousSibling.nodeValue||n(this.previousSibling).append(" ")}))}}(App.ArticleTopInfo=App.ArticleTopInfo||{},jQuery);var SCM=SCM||{};!function(e,t){e.autoReveal=function(){e.referredFromGoogle&&e.fromRedirectSite&&t("#divFirstPagePreview").foundation("reveal","open")},e.init=function(){e.autoReveal()}}(SCM.FirstPagePreview=SCM.FirstPagePreview||{},jQuery);var SCM=SCM||{};!function(r,c){function d(e,t,n){for(var i=0;i<e.length;i++){var a=document.createElement("option");a.value=e[i][0],a.text=e[i][1],e[i][0]===n&&a.setAttribute("selected","selected"),t.appendChild(a)}return t}function u(e){for(var t=[],n=queryAll(e),i=0;i<n.length;i++){var a=[];a.push(n[i].getAttribute("data-option")),a.push(n[i].textContent),t.push(a)}return t}function e(){if(App.isNewOnline){c(".issue-view-trigger");function e(){n?t.reinit(a):(i.owlCarousel(a),n=!0,t=i.data("owlCarousel"))}var t,n=!1,i=c(".new-online--days"),a={items:8,itemsDesktop:[1199,7],itemsDesktopSmall:[980,5],itemsTablet:[768,5],itemsTabletSmall:[600,3],itemsMobile:[479,3],pagination:!1,navigation:!0,navigationText:["",""],rewindNav:!1};r.updateCarousel=debounce(function(){e()},50,!1),App.isMobile||e(),function(){if(App.isNewOnline){var e=scmquery(".year-select-wrap"),t=scmquery(".day-select-wrap"),n=c(".new-online--year.selected").attr("data-option"),i=c(".new-online--day.selected").attr("data-option"),a=document.createElement("select"),r=document.createElement("select");classie.add(a,"year-select"),classie.add(r,"day-select"),e.appendChild(d(u(".new-online--year"),a,n)),t.appendChild(d(u(".new-online--day"),r,i))}}()}}r.init=function(){c(".past-issues-trigger, .year-entry, .decade-entry, .nav-journals a:contains(Archives of), .site-link--sub-nav a:contains(Archives of)").on("click",function(){"undefined"!=typeof Storage&&(sessionStorage.dontScrollPastIssue="true")}),App.isPastIssues&&(function(){var e=scmquery(".decade-select-wrap"),t=scmquery(".year-select-wrap"),n=scmquery(".issue-select-wrap"),i=c(".decade-entry.selected").attr("data-option"),a=c(".year-entry.selected").attr("data-option"),r=c(".issue-entry.selected").attr("data-option"),o=document.createElement("select"),s=document.createElement("select"),l=document.createElement("select");classie.add(o,"decade-select"),classie.add(s,"year-select"),classie.add(l,"issue-select"),e.appendChild(d(u(".decade-entry"),o,i)),t.appendChild(d(u(".year-entry"),s,a)),n.appendChild(d(u(".issue-entry"),l,r))}(),function(){var t=c(".issue-browse");c(".decade-select, .year-select, .issue-select").change(function(){var e=c(this).find("option:selected").attr("value");t.find("[data-option="+e+"]")[0].click()})}()),App.isNewOnline&&(e(),function(){var t=c(".new-online--controls");c(".year-select, .day-select").change(function(){var e=c(this).find("option:selected").attr("value");t.find("[data-option="+e+"]")[0].click()})}())},r.windowLoadInit=function(){!function(){if(App.isPastIssues&&"undefined"!=typeof Storage){if("true"!==sessionStorage.dontScrollPastIssue){var e=c(".issue-pagination").offset().top-106;c("html, body").animate({scrollTop:e},"slow")}sessionStorage.dontScrollPastIssue="false"}}()}}(SCM.IssuePage=SCM.IssuePage||{},jQuery);var ArtMetric=ArtMetric||{};ArtMetric.fullVersion=function($dest,routeUrl){$.ajax({url:routeUrl,datatype:"HTML",success:function(e){$dest.html(e),setTimeout(function(){if(void 0!==window.ChartistData){ArtMetric.createChart(".ct-chart",window.ChartistData.data,{lineSmooth:!1,showArea:!0,low:0},[["screen and (max-width: 1024px)",{axisX:{labelInterpolationFnc:function(e){return e.slice(0,3)}}}],["screen and (min-width: 1px)",{axisX:{labelInterpolationFnc:function(e){return e.replace(" ","\n")}}}]])}},200),window._altmetric_embed_init(),setTimeout(ArtMetric.handleQuestionMark,1500)},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})},ArtMetric.eventsToClose=function(){$(".artmet-modal").on("click",".artmet-close-modal",function(){ArtMetric.closeModal()}),$(".artmet-modal").click(function(){$(event.target).closest(".artmet-modal-contents").length||ArtMetric.closeModal()})},ArtMetric.handleQuestionMark=function(){var e=$(".altmetric-embed").find("a");-1<window.location.href.indexOf("/channels")&&e.attr("rel","nofollow"),e.each(function(e,t){var n=$(t);0<n.length&&"?"===n.html().trim()&&n.html('<span class="_altmetric_score">0</span>')}),$("._altmetric_score").addClass("sb-sc visible")},$(document).ready(function(){ArtMetric.altmetricEmbedElements=$(".altmetric-embed");var e=ArtMetric.altmetricEmbedElements.length;if(0<ArtMetric.altmetricEmbedElements.length){var t=0;ArtMetric.altmetricEmbedElements.on("DOMSubtreeModified",function(){++t===4*e&&ArtMetric.handleQuestionMark()}),setTimeout(ArtMetric.handleQuestionMark,5e3)}});var App=App||{};!function(r,o,s){var l=o(".tab-nav"),c=o(".content-panel"),d=o(".resources-panel"),u=(o("body"),o(".hidden-jobs-ad")),p=o(".need-jobs-ad");function h(e,t){e.length&&(App.isDesktop?".tab-nav-full-text"!==t&&e.click():e.click())}App.sectionJumpLinkClicked=!1,r.scrollOverflowElement=function(e,t){var n,i=App.isMag||App.isChannelMag||App.isQuiz||App.isTabletDown?o("html, body"):".tab-nav-full-text"===e?c:d,a=App.isSplitScreen?15:92,r=App.isSplitScreen?function(e,t){switch(e){case".tab-nav-figure-table":return o(t).closest(".figure-table-wrapper");case".tab-nav-references":return App.isSplitScreen?o(".references-wrap").find(t):o(t);case".tab-nav-multimedia":return o(t).closest(".multimedia-item");default:return o(t)}}(e,t):o(t);-1<[".tab-nav-full-text",".tab-nav-figure-table",".tab-nav-multimedia",".tab-nav-references",".tab-nav-affiliations"].indexOf(e)&&(r.length?(n=r.position().top-a,i.animate({scrollTop:n},500),App.scrollQueue=s):App.scrollQueue={tab:e,hash:t})},r.manageAnchorLinks=function(){o(".master-main").on("click",".section-jump-link",function(e){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){o(".lazy").each(function(){var e=o(this);e.attr("src",e.attr("data-original")),this.loaded=!0}),e.preventDefault();var t=o(this),n=this.hash,i=t.attr("data-tab-toggle"),a=o(i);App.isSplitScreen&&(App.sectionJumpLinkClicked=!0,h(a,i)),(App.isMag||App.isQuiz)&&".tab-nav-supplemental"==i&&o("#data-supplements-magazine-reveal").foundation("reveal","open"),App.isSplitScreen&&App.isTabletDown?setTimeout(function(){r.scrollOverflowElement(i,n)},10):(r.scrollOverflowElement(i,n),setTimeout(function(){r.scrollOverflowElement(i,n)},250))}}),o(".master-main").on("click",".artmet-comments-link",function(e){if(App.isSplitScreen){var t=o(this),n=this.hash,i=t.attr("data-tab-toggle");h(o(i),i),App.isTabletDown&&setTimeout(function(){r.scrollOverflowElement(i,n)},10)}})},r.initTabNavigation=function(){if(App.isSplitScreen){var e=".tab-nav-full-text",n=o(".tab-nav-trigger");if(App.lastPositions=App.lastPositions||{},App.isDesktop)for(var t=[".tab-nav-contents",".tab-nav-figure-table",".tab-nav-supplemental",".tab-nav-related"],i=0;i<t.length;i++){var a=scmquery(t[i]);if(a&&!classie.has(a,"tab-no-content")){e=t[i];break}}o(".tab-nav-trigger").click(function(){o(this);var e=n.filter(".target-tab-active").attr("href"),t=App.isTabletDown?o("body"):d;App.lastPositions[e]=t.scrollTop()}),SCM.JSUtility.toggleTabs(".tab-nav",".tab-nav-trigger",".resource-tab",e),l.on("click",".tab-nav-trigger",function(){var e=u.html();0<e.length&&(p.each(function(){o(this).append(e)}),u.html(""))}),function(){function t(){var e=App.isMobile?94:100;l.length&&l.stick_in_parent({parent:".master-main",offset_top:e})}App.isSplitScreen&&(t(),SCM.EventEmitter.subscribe("viewport-changed",function(e){l.trigger("sticky_kit:detach"),t()}))}(),App.isSplitScreen&&l.on("click",".tab-nav-trigger",function(){this.className;var e=this.getAttribute("href");function t(e){setTimeout(function(){n.animate({scrollTop:e},150)},1)}"#related-tab"===e&&SCM.JSUtility.equalHeights(".ymal--footer .ymal--item",640);var n=App.isTabletDown?o("html, body"):d;App.sectionJumpLinkClicked||(App.lastPositions!==s&&App.lastPositions[e]!==s?t(App.lastPositions[e]):t(0)),App.sectionJumpLinkClicked=!1}),l.on("click",".tab-nav-trigger",function(){App.isDesktop?d.trigger("scroll"):o(window).trigger("scroll")}),o(".artmet-comments-link").attr("data-tab-toggle",".tab-nav-comments")}},r.init=function(){App.isSplitScreen&&r.initTabNavigation(),(App.isAnyArticle||App.isQuiz)&&(r.manageAnchorLinks(),function(){var i=/10[_.]1001[^\s"<]+/g,t=o(".references .reference-content").map(function(e,t){var n=o(t).html().match(i);return n&&n.length?{elem:t,doi:n[0]}:null}).filter(function(e,t){return!!t&&!!t.elem&&!!t.doi}),e=t.map(function(e,t){return t.doi}).get().filter(function(e,t,n){return n.indexOf(e)===t});e&&e.length&&o.post("/AMA/ArticleUrlsByDoi",{dois:e.toString()}).promise().then(function(a){if(!a||!a.Success){var e=o.Deferred();return e.reject(a.Messages&&a.Messages.length?a.Messages[0]:"Unknown error"),e}t.each(function(e,t){if(t.elem&&t.doi&&a.Result[t.doi]){var n=o(t.elem).find(".pubmed-link, .google-scholar-ref-link, .crossref-doi").first(),i=o("<a>").attr("href",a.Result[t.doi]).addClass("jn-article-link").html("Article");n.before(i)}}),o(".jn-article-link").before("<br>")}).then(null,function(e){console.error("Unable to look up resource URLs for DOIs"),console.error(e)})}())}}(App.SplitScreen=App.SplitScreen||{},jQuery);var App=App||{};!function(e,l){var a=l(".register-free-pdf");function r(e,t){var n=-1===e.indexOf("?")?"?":"&";return e+n+t}function t(){if(App.isSearch||App.isLearningSearchResults||App.isLearning||App.isPlayer||App.isQuiz||App.isMyAccount){var e=l(".save-search .save-search-link"),t=l(".save-search .save-search-link-learning"),n=l(".view-edit-searches .view-edit-learning-btn"),i=l("#no-access-reveal-saved-searches"),a=l("#no-access-reveal-saved-searches-learning"),r=l("#save-a-search-modal"),o=l("#save-a-search-learning-modal"),s=l("#view-edit-search-modal");e.click(function(e){e.preventDefault(),App.isIndividual?r.foundation("reveal","open"):i.foundation("reveal","open")}),t.click(function(e){e.preventDefault(),App.isIndividual?o.foundation("reveal","open"):a.foundation("reveal","open")}),l(".view-edit-searches .view-edit-btn").click(function(e){e.preventDefault(),App.isIndividual?s.foundation("reveal","open"):i.foundation("reveal","open")}),l(".view-edit-saved-searches").click(function(e){e.preventDefault(),s.foundation("reveal","open")}),n.click(function(e){e.preventDefault(),App.isIndividual?s.foundation("reveal","open"):a.foundation("reveal","open")})}}e.init=function(){!function(){var e=a.find(".sign-in--create-link"),t=a.find(".sign-in--personal-link"),n=t.attr("href"),i=e.attr("href");n&&n.indexOf("alert=article")<0&&t.attr("href",r(n,"alert=article")),i&&i.indexOf("alert=article")<0&&e.attr("href",r(i,"alert=article"))}(),function(){if(App.isAbstract){var t=l(".full-text-link, .toolbar-full-text");t.click(function(){var e=t.attr("data-url");e&&0<e.length?window.location.href=e:SCM.PDFAccess.openNoAccessModalArticle(t,t.attr("data-article-id"))})}}(),t(),function(){var e=l("#no-access-reveal");0===e.find(".modal--options").length&&e.removeClass("medium").addClass("small")}(),l(document).ajaxComplete(function(){t()})}}(App.Access=App.Access||{},jQuery);var App=App||{};!function(e,c){c("#toolbar");e.init=function(){App.isSplitScreen&&SCM.JSUtility.removeEmptyTabs(".tab-nav-trigger",["#full-text-tab","#related-tab"],".advertisement, script, .widget-JobsAd, .widget-JobsAd *"),(App.isAbstract||App.isMag)&&function(){var e=c(".toolbar-trigger"),t=e.find(".toolbar-tool").not(".toolbar-share").add(e.find(".toolbar-share-more .toolbar-share"));if(App.isAbstract){var n=c(".abstract-toolbar .toolbar-pdf"),i=c(".pg_abstract .toolbar-trigger .toolbar-pdf-wrap");0===n.length&&i.hide()}if(App.isMag){var a=c(".magazine-toolbar .toolbar-pdf"),r=c(".widget-MagazineView .toolbar-trigger .toolbar-pdf-wrap");0===a.length&&r.hide()}t.click(function(){var e=c(c(this).attr("data-trigger"))[0];e&&e.click()})}(),function(){if("undefined"!=typeof addthis){addthis.update("share","url_transforms",{shorten:{twitter:"bitly"}}),addthis.update("share","shorteners",{bitly:{}});var e=c(".social-share, .toolbar-tool").attr("data-share-title");e&&0<e.length&&addthis.update("share","title",e)}}(),c(".toolbar-share").click(function(){var e=c(this).attr("data-utm-source"),t=c("meta[property='og:url']").attr("content"),n=c("meta[property='og:type']").attr("content");if("quiz"===n.toLowerCase())addthis.update("share","url",t);else{var i=new Date,a=("0"+(i.getMonth()+1)).slice(-2),r=("0"+i.getDate()).slice(-2),o=i.getYear()%100,s=a.concat(r,o),l=t+"?utm_source="+e+"&utm_campaign=content-shareicons&utm_content="+function(e){return e.toLowerCase()+"_engagement"}(n)+"&utm_medium=social&utm_term="+s;addthis.update("share","url",l)}})}}(App.Toolbar=App.Toolbar||{},jQuery);var App=App||{};!function(i,s){i.saveChangesLinkEnabled=!0,i.alertUpdateEvents=function(){s("body").on("click","#publicationSaveChanges",function(){i.saveChangesLinkEnabled&&(s(this).addClass("linkDisabled"),i.saveChangesLinkEnabled=!1,i.postJournalData(),i.saveChangesLinkEnabled=!0)})},i.postJournalData=function(){var e=new Array;s("#journalAddEditDiv input:checked").each(function(){e.push(s(this).val())});var t={JournalAlertsJson:s("#JournalAlertsJson").val(),JournalUpdates:JSON.stringify(e).toString(),SeparateJournalsAlerts:!!s("input#Config_SeparateJournalsAlerts").length&&s("input#Config_SeparateJournalsAlerts").val(),PublishAheadofPrint_FriendlyName:s("input#Config_PublishAheadofPrint_FriendlyName").length?s("input#Config_PublishAheadofPrint_FriendlyName").val():"Advance access",LatestIssue_FriendlyName:s("input#Config_LatestIssue_FriendlyName").length?s("input#Config_LatestIssue_FriendlyName").val():"Latest issue",UpdateFor:0};s("#journalAddEditDiv").foundation("reveal","close"),s.post("/Content/MyEmailAlerts",t,function(e){setTimeout(function(){i.update(e),""!==s.trim(s(".detect-error-message").html())&&s("#journalAddEditDiv").foundation("reveal","open")},200)})},i.update=function(e){var t=s(e).find("#journalsDetails").html();if(t&&t.length){s("div#journalsDetails").html(t);var n=s("#Config_PublicationAlertsLeadText").val();s("p#publicationAlertsLeadText").length&&s("#publicationAlertsLeadText").html(n);var i=s("#Config_NoPublicationAlertsText").val();s("span#noPublicationAlertsText").length&&s("#noPublicationAlertsText").html(i)}var a=s(e).find("#JournalAlertsJson").val();a&&a.length&&s("#JournalAlertsJson").val(a);var r=s(e).find("#journalUpdateDetails").html();r&&r.length&&s("#journalUpdateDetails").html(r);var o=s(e).find(".detect-error-message").html();o&&o.length&&s(".detect-error-message").html(o)},i.postDelete=function(e,t){var n={AlertIdToDelete:e,UpdateFor:t,SeparateJournalsAlerts:!!s("#Config_SeparateJournalsAlerts").length&&s("#Config_SeparateJournalsAlerts").val(),PublishAheadofPrint_FriendlyName:s("#Config_PublishAheadofPrint_FriendlyName").length?s("#Config_PublishAheadofPrint_FriendlyName").val():"Advance access",LatestIssue_FriendlyName:s("#Config_LatestIssue_FriendlyName").length?s("#Config_LatestIssue_FriendlyName").val():"Latest issue",ConfigSiteName:s("#Config_ConfigurableSiteName").length?s("#Config_ConfigurableSiteName").val():""};s.post("/Content/MyEmailAlerts",n,function(e){i.update(e)})},i.init=function(){App.isMyAccount&&i.alertUpdateEvents()}}(App.MyEmailAlerts=App.MyEmailAlerts||{},jQuery);var App=App||{};!function(e,n){e.init=function(){App.isMyAccount&&n("#renewSubs").on("click",function(){var e=n(".chk-renewal:checked").map(function(){return this.value}).get().join("|");if(0<e.length){var t=App.storeUrl+"/index.aspx?AddToCart="+e;window.location.href=t}else window.location.href=App.storeUrl})}}(App.MySubscriptions=App.MySubscriptions||{},jQuery);var SCM=SCM||{};!function(m,p){var h=p(window),f=p("body"),e=p(document),g={offset_top:106,recalc_every:10},v={offset_top:106,recalc_every:10,parent_height_minus:130};function S(){App.isMyAccount&&SCM.JSUtility.printPortionOfPage(".my-acct--cme",".cme--create-pdf-year")}var t=p(".btnTop"),n=p(".footer-wrap");function y(e){if(e=e||!1,!App.isMobile||!App.isFreeArticle||e){function t(e,t){e.lazyload({skip_invisible:!1,container:t,failure_limit:10,load:function(){p(this).addClass("loaded")}}),e.on("appear",function(){if(!this.loaded){this.loaded=!0;var e=p(this);e.removeClass("lazy-ad"),googletag.cmd.push(function(){googletag.pubads().refresh([App.Ads.slots[e.attr("data-slot")]],{changeCorrelator:!1})})}}),SCM.EventEmitter.publish("AppearTriggerBound")}if(App.isSplitScreen&&App.isDesktop){var n=p(".resources-panel");t(n.find(".lazy-ad"),n)}else t(p(".lazy-ad"),window);App.isSplitScreen&&!App.isFreeArticle&&p("#ad-dual-box-mobile").remove()}}function C(t){jQuery(document).ready(function(e){t?y(t):(SCM.AsyncAds.LoadHeaderAd(".SCM-SharedWidgets-AsyncHeaderAdLoader","data-url","data-params","POST"),SCM.EventEmitter.subscribe("HeaderAdFired",function(){SCM.AsyncAds.LoadAds(".SCM-SharedWidgets-AsyncAdLoader","data-url","data-params","POST")}),SCM.EventEmitter.subscribe("AdFired",function(){y()}))})}function b(){if(!(!App.isSplitScreen||App.isSplitScreen&&App.isMobile)){var t=p("#split-screen-contab");if(""===t.html()){var e={siteName:App.ArticleSplitScreen.siteName,siteId:App.ArticleSplitScreen.siteId,journalId:App.ArticleSplitScreen.journalId,adDisplay:App.ArticleSplitScreen.adDisplay,adSection:App.ArticleSplitScreen.adSection,adPosition:App.ArticleSplitScreen.adPosition,fromGoogle:App.ArticleSplitScreen.fromGoogle,controlId:App.ArticleSplitScreen.controlId,slotLocationOverride:App.ArticleSplitScreen.slotLocationOverride};p.ajax({type:"POST",url:"/AMA/AdTag",data:e,success:function(e){t.empty(),t.html(e),C(!0)},error:function(e,t,n){SCM.JSUtility.logErrors(e,t,n)}})}}}function w(){if(App.isCollection){var t=p("#collection-collex"),e={siteName:App.CollectionResults.siteName,siteId:App.CollectionResults.siteId,journalId:App.CollectionResults.journalId,adDisplay:App.CollectionResults.adDisplay,adSection:App.CollectionResults.adSection,adPosition:App.CollectionResults.adPosition,fromGoogle:App.CollectionResults.fromGoogle,controlId:App.CollectionResults.controlId};p.ajax({type:"POST",url:"/AMA/AdTag",data:e,success:function(e){t.empty(),t.html(e),C(!0)},error:function(e,t,n){SCM.JSUtility.logErrors(e,t,n)}})}}if(h.on("scroll",debounce(function(){35<document.body.scrollTop||35<document.documentElement.scrollTop?t.addClass("visible"):t.removeClass("visible"),n.length&&(!function(e){if(!e||!e.length)return;var t=h.scrollTop(),n=h.height(),i=t+n,a=e.offset().top,r=e.height(),o=a+r;return t<=a&&a<i||t<o&&o<=i||n<r&&a<=t&&i<=o}(n)?t.addClass("fixed").removeClass("absolute"):t.removeClass("fixed").addClass("absolute"))},10,!1)),m.resizeIframe=function(e){var t,n;document.getElementById&&(t=document.getElementById(e).contentWindow.document.body.scrollHeight,n=document.getElementById(e).contentWindow.document.body.scrollWidth),document.getElementById(e).height=t+"px",document.getElementById(e).width=n+"px"},m.stickSearchFacets=function(){App.isSearch&&p(".facets-inner").stick_in_parent({offset_top:106,recalc_every:10,parent:".search-wrap"})},m.searchFacetsMoreLess=function(){var e=p(".sf-facet-list"),a='<span class="symbol">[+]</span> More';!scmquery(".facet-more-less")&&e.each(function(){var e=p(this),t=e.find(".sf-facet");if(6<t.length){var n=t.slice(6);n.addClass("hide"),e.append('<a href="" class="facet-more-less">'+a+"</a>");var i=e.find(".facet-more-less");i.click(function(e){e.preventDefault(),i.toggleClass("active"),i.hasClass("active")?(i.html('<span class="symbol">[-]</span> Less'),n.removeClass("hide")):(i.html(a),n.addClass("hide"))})}})},m.equalizeJustPublished=function(){if(App.isJournal){function r(){s.removeAttr("style")}var o=p(".widget-JustPublished"),s=o.find(".article"),t=0,l=function(e){t=0,e.each(function(){var e=p(this).outerHeight();t<e&&(t=e)}),e.each(function(){p(this).innerHeight(t)})};!function(){if(App.isMobileAlt)r();else{r();for(var e=p(".widget-instance-AMA_ArticleListNewAndPopular_Journal_Research .featured-list--contents li").length,t=1;t<=e;t++){var n=o.find(".article-"+t);l(n)}for(var i=p(".widget-instance-AMA_ArticleListNewAndPopular_Journal_OrigInv .featured-list--contents li").length,a=1;a<=i;a++)l(s)}}()}},m.updateEqualizeJustPublished=debounce(function(){m.equalizeJustPublished()},50,!1),m.updateMyCmeByYear=function(e){p(".my-cme-by-year-ajax-wrap").load("/AMA/MyCme?selectedYear="+e,function(){S()})},m.formatSearchQueryToSaveToLocalStorage=function(e){return e.replace(/(([?|&]{1})?q=[^&]*)/,"").replace(/(([?|&]{1})?page=[^&]*)/,"").replace(/(([?|&]{1})?exPrm_qqq[^&]*)/,"").replace(/(([?|&]{1})?exPrm_hl.q[^&]*)/,"").replace(/(([?|&]{1})?SearchSourceType[^&]*)/,"").replace(/(([?|&]{1})?author[^&]*)/,"").replace(/(([?|&]{1})fl_[^&]*)/g,"").replace(/(([?|&]{1})restypeid=[^&]*)/,"").replace(/(^[?|&])/,"").replace(/(([?|&]{1})appId=[^&]*)/,"")},m.saveDomainCookie=function(e,t,n){document.cookie=e+"="+t+";samesite=lax;secure;path=/;domain="+n},m.getCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var a=n[i];" "===a.charAt(0);)a=a.substring(1);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return""},m.getGlobalSearchDropdownDisplayValue=function(e){var t="",n=e.split("AND");if(1===n.length)for(var i=p("#BodyContent_Header_ddlForSearch")[0],a=0;a<i.length;a++)i.options[a].value===e&&(t=i.options[a].text);else t=App.currentSiteCount===n.length?"Journals":n.length+" Journals";return t},m.setGlobalSearchDropdownSelectedValue=function(e){var t=p(".site-search-bar .cs-select .cs-placeholder"),n=e.match(/f_SiteID=([^&]*)/),i="Search All";if(n){var a=decodeURI(n[1]).replace(/\+/g," ").replace(/\%26/g,"&");i=m.getGlobalSearchDropdownDisplayValue(a)}t.text(i),0<"".length&&t.attr("data-value","")},m.initLazyLoad=function(e){e=e||".lazy";function t(e,t){e.lazyload({skip_invisible:!1,container:t,failure_limit:10,load:function(){p(this).addClass("loaded")}})}if(App.isSplitScreen&&App.isDesktop){var n=p(".content-panel"),i=p(".resources-panel"),a=n.find(e),r=i.find(e);t(a,n),t(r,i)}else t(p(e),void 0)},m.initFoundation=function(){e.foundation()},m.launchGetCitationModal=function(){p('[data-reveal-id="getCitation"]').click(function(){p("#getCitation").foundation("reveal","open")})},m.initDatePicker=function(){App.isAdvancedSearch&&p("#startDateSemanticSearch, #endDateSemanticSearch, #startDateAuthor, #endDateAuthor").datepicker()},m.shareFiguresAndTables=function(){if(App.isSplitScreen){p.ajaxSetup({cache:!0}),p.getScript("//connect.facebook.net/en_US/sdk.js",function(){FB.init({appId:"{your-app-id}",version:"v2.5"}),p("#loginbutton,#feedbutton").removeAttr("disabled")});p("a.figure-table-social").click(function(){})}},m.getParameterByName=function(e,t){t=t||window.location.href,e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n&&n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):""},m.toggleAlertFlagForSignInSignUpUrls=function(e,t,n,i,a){var r=n.attr("href"),o=i.attr("href"),s="alert="+a;if(t.is(":checked")){var l="";if(r.indexOf(s)<0){l=0<m.getParameterByName("return_url",r).indexOf("?")?"&":"?";var c=r+encodeURIComponent(l+s);n.attr("href",c)}if(o.indexOf(s)<0){l=0<m.getParameterByName("return_url",o).indexOf("?")?"&":"?";var d=o+encodeURIComponent(l+s);i.attr("href",d)}}else{var u=/((%3F|%26)alert%3D[^&]*)/,p=n.attr("href").replace(u,""),h=i.attr("href").replace(u,"");n.attr("href",p),i.attr("href",h)}},m.InitializeLiveFilter=function(){p(".pg_featuredtopic").length&&p("#filter_input").fastLiveFilter("#filter_list",{timeout:40})},m.GridListToggle=function(){p(".js-list-view-toggle").click(function(){p(".featured-topics-content_wrap").removeClass("grid-view").addClass("list-view")}),p(".js-grid-view-toggle").click(function(){p(".featured-topics-content_wrap").removeClass("list-view").addClass("grid-view")})},m.commentCharactersRemaining=function(){if(p(".content-form--comment").length){p("textarea").keyup(function(){var e=p(this).val().length;e=3600-e,p(".charactersRemaining").text(e)}),p(".comment-form--affiliation input").keyup(function(){var e=p(this).val().length;e=200-e,p(this).prev(".char-limit-text").text(e+" characters remaining")}),p(".comment-form--degrees input").keyup(function(){var e=p(this).val().length;e=25-e,p(this).prev(".char-limit-text").text(e+" characters remaining")}),p(".comment-form--comment-title input").keyup(function(){var e=p(this).val().length;e=140-e,p(this).prev(".char-limit-text").text(e+" characters remaining")})}},m.setArticleToolboxWidths=function(){if(App.isAbstract||App.isMag){var e=p(".abstract-toolbar, .magazine-toolbar").children("div:has(a), a");e.length%2==0?e.each(function(){var e=p(this);e.is("a")?e.css("width","50%"):e.find("a.toolbar-tool").css("width","50%")}):e.last().css("width","100%")}},m.linkedContentToolbarDisplay=function(){p("div.linked-content-controls").length&&setTimeout(function(){p(this).closest(".linked-content-controls .tab-no-content").length<2&&p(".trigger-text").addClass("visuallyhidden")},3e3)},m.trendMDtitle=function(){p("#trendmd-suggestions").length&&(p("#trendmd-suggestions").prev(".thm-col-sec").addClass("js-TMDtitle-display"),p("#trendmd-suggestions").bind("DOMSubtreeModified",function(){p("#trendmd-suggestions").prev(".thm-col-sec").removeClass("js-TMDtitle-display")}))},m.passiveEventListener=function(){var t=!1;try{var e={get passive(){t=!0}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){t=!1}window.addEventListener("scroll",this,!!t&&{passive:!0})},"object"==typeof localStorage)try{localStorage.setItem("localStorage",1),localStorage.removeItem("localStorage")}catch(e){Storage.prototype._setItem=Storage.prototype.setItem,Storage.prototype.setItem=function(){},alert('Your web browser does not support storing settings locally. In Safari, the most common cause of this is using "Private Browsing Mode". Some settings may not save or some features may not work properly for you.')}m.init=function(){p(".js-showAll").click(function(e){e.preventDefault(),p(".open-close-all").find(".collapsible-list-header").each(function(){p(this).next().hasClass("collapsible-list-target-is-active")||p(this).trigger("click")})}),p(".js-hideAll").click(function(e){e.preventDefault(),p(".open-close-all").find(".collapsible-list-header").each(function(){p(this).next().hasClass("collapsible-list-target-is-active")&&p(this).trigger("click")})}),m.initFoundation(),function(){if(App.isJournal||App.isNetworkHome){var e=p(".editors-choice").find(".widget-SelfServeContent");if(e.find("*").length<10){var t=e.text();0===(void 0!==t?p.trim(t):1).length&&p(".movable-ad-target").prepend(p(".movable-ad"))}}(App.isIssue||App.isMag||App.isSplitScreen&&App.isFreeArticle||App.isCollection)&&p(".movable-ad-target").last().prepend(p(".movable-ad"))}(),m.initLazyLoad(),C(),jQuery(document).ready(function(){SCM.AsyncAds.LoadJobsAd(".SCM-SharedWidgets-AsyncJobsAdLoader","data-url","data-params","POST")}),App.isAnyArticle&&0===p(".widget-ToolboxPermissions").length&&(p(".toolbar-citation").addClass("permissions-hidden"),p(".toolbar-permissions-wrap").hide()),App.isMag&&!scmquery(".article-pdf-only")&&p(".article-full-text > p").first().html(function(e,t){return t.replace(/^[^a-zA-Z0-9'"<]*([a-zA-Z0-9])/g,'<span class="drop-cap">$1</span>')}),function(){if(App.isAbstract&&p(".article-content > .full-text-link").stick_in_parent(g),App.isMag||App.isChannel){var e=p(".social-share");App.isMag&&e.stick_in_parent(g),App.isChannel&&e.stick_in_parent(v)}}(),m.stickSearchFacets(),App.isNetworkHome&&(SCM.JSUtility.toggleHoverState(".site-link.has-sub-nav"),SCM.JSUtility.toggleHoverState(".site-link-channel.has-sub-nav")),m.searchFacetsMoreLess(),SCM.EventEmitter.subscribe("viewport-changed",function(){googletag.pubads().refresh(App.Ads.slots,{changeCorrelator:!1})}),App.isAnyArticle&&p(".errata-links.retracted").length&&p(".content-panel, .article-content").addClass("is-retracted-article"),function(){if(App.isSplitScreen){var e=p(".footer"),t=p(".content-panel");e.appendTo(t)}}(),function(){if(App.isSplitScreen){var e=p(".ad-riser--dismiss"),t=e.closest(".ad-riser-wrap");e.click(function(){t.addClass("closed")})}}(),S(),function(){var i=["?",".",":",";",","];p(".issue-view-tab .article--title a .subtitle").each(function(e,t){var n=t.previousSibling.textContent.slice(-1);-1<i.indexOf(n)&&p(t).addClass("subtitle-no-colon")})}(),SCM.JSUtility.toggleVisibility(),SCM.JSUtility.accordion(),m.GridListToggle(),m.commentCharactersRemaining(),m.setArticleToolboxWidths(),m.linkedContentToolbarDisplay(),m.trendMDtitle(),function(){var i=encodeURIComponent(window.location.href);p("#register-free-pdf-reveal, #login-paid-pdf-reveal").find(".js-personal-link, .js-create-link").each(function(e,t){var n=p(t);n.attr("href",n.attr("href")+"?return_url="+i)})}(),m.passiveEventListener();var e="persistentSearchFilters";if(App.isSplitScreen){SCM.JSUtility.addStateToggle(".toolbar-share-more-link",".toolbar-share-more"),SCM.EventEmitter.subscribe("HeaderAdFired",function(){b()}),SCM.EventEmitter.subscribe("viewport-changed",function(){b()});var t=p(".toolbar .toolbar-pdf"),n=p(".toolbar .toolbar-pdf-wrap");0===t.length&&n.hide()}if(App.isCollection){SCM.EventEmitter.subscribe("HeaderAdFired",function(){w()}),SCM.EventEmitter.subscribe("viewport-changed",function(){w()}),m.saveDomainCookie(e,"",document.domain);var i=m.formatSearchQueryToSaveToLocalStorage(window.location.search);m.saveDomainCookie(e,i,document.domain),SCM.SiteJS.saveDomainCookie("currentSiteCount",App.currentSiteCount,document.domain)}if((App.isAbstract||App.isMag)&&SCM.JSUtility.addStateToggle(".toolbar-trigger .toolbar-share-more-link",".toolbar-trigger .toolbar-share-more"),App.isAbstract&&SCM.FirstPagePreview.init(),(App.isJournal||App.isIssue)&&SCM.JSUtility.toggleTabs(".most--links",".most--trigger",".most--tab",".most-viewed-trigger"),App.isAdvancedSearch&&m.saveDomainCookie(e,"",document.domain),App.isSearch){SCM.JSUtility.addStateToggle("#narrow-filter",".search-facets",void 0,!0,!0);var a=App.isMyAccount?"ActiveSavedLearningSearch":"ActiveSavedSiteSearch";App.isIndividual||m.saveDomainCookie(a,"",document.domain);var r=m.getCookie(a);if(""===r){var o=p(".selected-save-search"),s=p(".selected-save-search-txt"),l=p(".save-search-link");s.text(""),o.hide(),l.show()}var c=m.getCookie(e);if(document.referrer.indexOf("/advanced-search")<0&&""===r){var d=m.formatSearchQueryToSaveToLocalStorage(window.location.search);m.saveDomainCookie(e,d,document.domain),SCM.SiteJS.saveDomainCookie("currentSiteCount",App.currentSiteCount,document.domain)}if(0<document.referrer.indexOf("/advanced-search")&&""===c){var u=m.formatSearchQueryToSaveToLocalStorage(window.location.search);m.saveDomainCookie(e,u,document.domain),SCM.SiteJS.saveDomainCookie("currentSiteCount",App.currentSiteCount,document.domain)}}m.equalizeJustPublished(),function(){if(App.isAnyArticle){SCM.JSUtility.toggleTabs(".linked-content-controls",".linked-content-trigger",".linked-content-tab",".doesnt-exist-tab",!0),SCM.JSUtility.removeEmptyTabs(".linked-content-trigger");var e=p(".linked-content-controls"),t=p(".linked-content-toolbar");e.children().not(".tab-no-content").length&&t.addClass("activated"),h.click(function(e){p(e.target).closest(".linked-content-toolbar").length||(p(".linked-content-trigger").removeClass("target-tab-active"),p(".linked-content-tab").removeClass("tab-active"))})}}(),App.isAnyArticle&&scmquery(".article-pdf-only")&&f.addClass("is-backfile"),function(e,t,n){$container=p(e),$trigger=p(t),$target=p(n),$trigger.next($target).attr("aria-hidden",!0),$trigger.click(function(e){e.preventDefault();var t=p(this),n="true"!==t.attr("aria-selected");t.next($target).toggleClass("collapsible-list-target-is-active"),t.attr("aria-selected",n),$target.next().attr("aria-hidden",!n)})}(".collapsible-list",".collapsible-list-header",".collapsible-list-target"),p(".collapsible .collapsible-header").each(function(){var e=p(this),t="collapsible-"+e.index();e.nextUntil(".collapsible-header").wrapAll('<div id="'+t+'" class="collapsible-content" aria-hidden="true">');var i=e.next();e.wrapInner('<button aria-expanded="false" aria-controls="'+t+'">'),e.children("button").on("click",function(e){e.preventDefault();var t=p(this),n="false"===t.attr("aria-expanded");t.attr("aria-expanded",n),i.attr("aria-hidden",!n)})}),p(".clone-target").append(p(".clone-source").clone()),p(document).ajaxComplete(function(){(App.isAbstract||App.isSplitScreen)&&App.isFreeArticle&&y(!0)})},m.windowLoadInit=function(){m.initDatePicker(),m.launchGetCitationModal(),m.shareFiguresAndTables(),m.InitializeLiveFilter(),function(){if(App.isMag){var t=p("#magazine-bta");if(!App.isMobile||App.isFreeArticle){var e={siteName:App.MagazineView.siteName,siteId:App.MagazineView.siteId,journalId:App.MagazineView.journalId,adDisplay:App.MagazineView.adDisplay,adSection:App.MagazineView.adSection,adPosition:App.MagazineView.adPosition,fromGoogle:App.MagazineView.fromGoogle,controlId:App.MagazineView.controlId};p.ajax({type:"POST",url:"/AMA/AdTag",data:e,success:function(e){t.empty(),t.html(e),C(!0)},error:function(e,t,n){SCM.JSUtility.logErrors(e,t,n)}})}else t.remove()}}()}}(SCM.SiteJS=SCM.SiteJS||{},jQuery),function(i,e,t){t.ready(function(){App.Toolbar.init(),App.SplitScreen.init(),SCM.SiteJS.init(),App.Global.init(),SCM.PDFAccess.init(),App.ArticleTopInfo.init(),App.Access.init(),SCM.SolrSearch.init(),SCM.IssuePage.init(),App.MySubscriptions.init(),App.Collection.init(),App.SearchAutoComplete.init(),SCM.InstitutionOpenUrl.init(),App.UserComment.init(),App.MyEmailAlerts.init(),App.UberContent.init(),SCM.gdprCookieBanner.init("CookieBanner_Closed")}),e.on("load",function(){SCM.SiteJS.windowLoadInit(),App.Global.windowLoadInit(),SCM.IssuePage.windowLoadInit()}),e.on("resize",function(){App.updateAppVariables(),App.notifyViewportChange(),SCM.SiteJS.updateEqualizeJustPublished()}),t.ajaxComplete(function(e,t,n){SCM.SiteJS.initFoundation(),App.isSearch&&(SCM.SiteJS.searchFacetsMoreLess(),SCM.SiteJS.stickSearchFacets(),-1<n.url.indexOf("SearchResults")&&SCM.SiteJS.initLazyLoad(".search-results .lazy")),-1<n.url.indexOf("PersonalizedContent")&&(setTimeout(function(){(App.isAbstract||App.isCollection||App.isMag)&&i(".widget-PersonalizedContent").each(function(){0<i(this).find(".ymal--content").length&&i(this).addClass("loaded")})},500),!App.supportsFlexbox&&App.isJournal&&0===i(".no-equal-heights").length&&"jamanetworkopen"!==i("body").data().sitename&&SCM.JSUtility.equalHeights(".journal-contents .ymal--item",640),App.supportsFlexbox||!App.isAnyArticle&&!App.isIssue||SCM.JSUtility.equalHeights(".ymal--footer .ymal--item",640))})}(jQuery,jQuery(window),jQuery(document)),window.dataLayer=window.dataLayer||[],SCM=SCM||{},SCM.AMA=SCM.AMA||{};var getValue=function(e,t){if("array"!==t)return e=e.toString().replace(/%/g,"%25"),removeExtraTags(decodeURIComponent(e));var n=e.split(","),i=[];return n.forEach(function(e){var t=removeExtraTags(decodeURIComponent(e.trim()));""!==t&&i.push(t)}),0===i.length?"":i},removeExtraTags=function(e){var t=e.replace(/<(.*)>.*<\/(.*)>/gi,"");return t=(t=t.replace(/&#?(([0-9a-z]){1,4});/gi,"")).replace(/  /g," ")};SCM.AMA.DataLayer=function(r){return{ExecuteDataLayer:function(){var a={};r(".tagmanagervalue").each(function(){var e=r(this),t=e.data("value"),n=e.data("type"),i=getValue(t,n);""!==i&&(a[e.data("attribute")]=i)});var e=n(".figure-table-wrapper",".figure-label",".figure-title");e&&e.length&&0<r.trim(e).length&&(a.arrArticleFigures=e.map(function(e){return removeExtraTags(e.trim())}));var t=n(".figure-table-wrapper",".table-label",".table-title");t&&t.length&&0<r.trim(t).length&&(a.arrArticleTables=t.map(function(e){return removeExtraTags(e.trim())}));return a.event="page view",a}};function n(e,n,i){var a=[];return jQuery(e).each(function(){var e=r(this).find(n).html(),t=r(this).find(i).html();void 0===e&&void 0===t||(void 0===e?a.push(t):void 0===t?a.push(e):a.push(e+" "+t))}),a}}(jQuery),function(e){e.push=function(e,t,n){var i={},a=getValue(t,n);a&&(i[e]=a,dataLayer.push(i))}}(SCM.AMA.DataLayerAsync=SCM.AMA.DataLayerAsync||{},jQuery),$("document").ready(function(){var e=SCM.AMA.DataLayer.ExecuteDataLayer();dataLayer.push(e)});var App=App||{},SCM=SCM||{};SCM.CollectionFacets={},SCM.CollectionFacets.defaults={controller:"Solr",action:"ArticleBrowseSearchResults",instanceName:"AMA_ArticleBrowseSearchResults",updateTargetSelector:"#collection--topic-search"},function(e,m){var f=m("#dropdown-publication .dropdown-chk-item").length,g=m("#dropdown-article-type .dropdown-chk-item").length,a=m(".save-preferences-confirm");function d(){m(".drop-selected-publication").on("click",function(e){e.stopPropagation(),m("#dropdown-article-type").hide(),m("#dropdown-publication").toggle("show")}),m(".drop-selected-article-type").on("click",function(e){e.stopPropagation(),m("#dropdown-publication").hide(),m("#dropdown-article-type").toggle("show")}),m(document).on("click",function(e){var t=m(".dropdown-content");t.is(e.target)||0!==t.has(e.target).length||t.hide()}),m(".btn-apply-publication-facets, .btn-apply-article-type-facets").on("click",function(e){e.preventDefault();var t=function(){for(var e=m("#dropdown-publication .dropdown-chk-item:checked"),t=m("#dropdown-article-type .dropdown-chk-item:checked"),n=/(page=[^&]*)/,i=/(f_SiteID=[^&]*[&]?)/,a=/(f_ArticleTypeDisplayName=[^&]*[&]?)/,r=v(e),o=v(t),s=r.join("AND"),l=o.join("AND"),c="",d=m("#dropdown-publication .dropdown-chk-item")[0],u=m(d).data("url").split("&"),p=0;p<u.length;p++){var h=u[p].replace(n,"").replace(i,"").replace(a,"");""!==h&&(c+="&"+h)}c="?"+c.substring(1),!S(e.length,f)&&0<s.length&&(c+="&f_SiteID="+s);!S(t.length,g)&&0<l.length&&(c+="&f_ArticleTypeDisplayName="+l);return c}();window.location.href=t}),m("#dropdown-publication .dropdown-item, #dropdown-article-type .dropdown-item").on("click",function(e){var t=m(this).parent().attr("id");if(0<=t.indexOf("dropdown-publication")){var n=m("#dropdown-publication .dropdown-chk-item:checked"),i=m("#dropdown-publication-checkall"),a=m("#dropdown-publication-uncheckall");l(n,f,i,a)}else if(0<=t.indexOf("dropdown-article-type")){var r=m("#dropdown-article-type .dropdown-chk-item:checked"),o=m("#dropdown-article-type-checkall"),s=m("#dropdown-article-type-uncheckall");l(r,g,o,s)}}),m("#dropdown-publication-checkall, #dropdown-article-type-checkall").on("click",function(){var e=m(this).attr("id");m(this).is(":checked")?0<e.indexOf("publication")?(m("#dropdown-publication-uncheckall").prop("checked",!1),m("#dropdown-publication .dropdown-item input:checkbox").prop("checked",!0)):0<e.indexOf("article-type")&&(m("#dropdown-article-type-uncheckall").prop("checked",!1),m("#dropdown-article-type .dropdown-item input:checkbox").prop("checked",!0)):0<e.indexOf("publication")?m("#dropdown-publication .dropdown-item input:checkbox").prop("checked",!1):0<e.indexOf("article-type")&&m("#dropdown-article-type .dropdown-item input:checkbox").prop("checked",!1)}),m("#dropdown-publication-uncheckall, #dropdown-article-type-uncheckall").on("click",function(){var e=m(this).attr("id");m(this).is(":checked")&&(0<e.indexOf("publication")?(m("#dropdown-publication-checkall").prop("checked",!1),m("#dropdown-publication .dropdown-item input:checkbox").prop("checked",!1)):0<e.indexOf("article-type")&&(m("#dropdown-article-type-checkall").prop("checked",!1),m("#dropdown-article-type .dropdown-item input:checkbox").prop("checked",!1)))}),m("#searchedTerm .close").on("click",function(){var e=window.location.search.replace(/(([?|&]{1})q=[^&]*)/,"");window.location.href="?"+e.substring(1)})}function l(e,t,n,i){e.length===t?(n.prop("checked",!0),i.prop("checked",!1)):0<e.length&&e.length<t?(n.prop("checked",!1),i.prop("checked",!1)):0===e.length&&(i.prop("checked",!0),n.prop("checked",!1))}function v(e){var t=[];if(0<e.length)for(var n=0;n<=e.length-1;n++){var i=m(e[n]).data("value").toString();if(0<i.length){var a=i.replace(/( \([0-9]*\))/,"").replace(/\s/g,"+");-1===t.indexOf(a)&&t.push(encodeURI(a).replace("&",encodeURIComponent("&")))}}return t}function u(e,t,n,i){if(e){var a=n;1===t.length?a=m(t[0]).data("title"):1<t.length&&t.length<i&&(a="Multiple Selected"),e.text()!==a&&e.text(a.replace(/( \([0-9]*\))/,""))}}function p(){m("#tbAbsrSolrSearch").keydown(function(e){if(13===e.keyCode){var t=m("#tbAbsrSolrSearch").val().trim();null===t||""===t?alert("Please enter a term to perform search"):function(e,t){e.preventDefault();var n=window.location.search,i=n.indexOf("q=");if(-1<i){var a=n.indexOf("&",i);n=(n=-1===a?n.substring(0,i):n.substring(0,i)+n.substring(a+1)).replace(/[\?&]$/,"")}if(0===n.length){var r=m("h1:first").find(".header--name").text();n="?fl_ContentType=Article&fl_Categories="+encodeURIComponent(r)}0<t.length&&(n+="&q="+t);window.location=n}(e,t=encodeURIComponent(t))}})}function S(e,t){return e===t}function t(){var e=[];m(".category-list-item.followed").each(function(){e.push(m(this).data("categoryid"))});var t=m(".follow-link").data("categoryid"),n=!1;t||(t=m(".unfollow-link").data("categoryid"),n=!0),m.ajax({url:"/AMA/UpdateMultipleCollectionFollowStatus",type:"POST",data:{currentPageCategoryId:t||0,isFollowed:n,categoryIdsToUpdate:e.toString()},success:function(e){e&&(m(".collection-follow-links").parent().html(e),function(){var e=m("#weeklyAlert"),t=m("#monthlyAlert");if(0<e.length&&0<t.length){var n=e.is(":checked"),i=t.is(":checked");m.ajax({url:"/AMA/UpdateManageInterestUserAlerts",type:"POST",data:{signupForWeeklyAlert:n,signupForMonthlyAlert:i},success:function(e){if(e.Success){var t=m(".save-preferences-confirm");0<t.length&&t.show()}},error:function(e){alert("Cannot update alert(s) at this time.")}})}}(),m(".manage-interests-modal").foundation("reveal","close")),s(),h()},error:function(e){alert("Cannot update collection follow status, please try again")}})}var n=!1;e.bindEvents=function(){n||h()};var i,r,o=[];function s(){o=[],m(".manage-interests--categories").find(".followed").each(function(){o.push(m(this).data("categoryid"))}),i=m("input#weeklyAlert").prop("checked"),r=m("input#monthlyAlert").prop("checked")}function c(){var e=m(".manage-interests--categories").find(".followed");e.removeClass("followed"),e.parent("li").prop("style",""),null!=i&&m("input#weeklyAlert").prop("checked",i),null!=r&&m("input#monthlyAlert").prop("checked",r);for(var t=0;t<o.length;t++){var n=o[t];m(".manage-interests--categories").find(".category-list-item[data-categoryid="+n+"]").addClass("followed")}}function h(){n=!0,s(),m(".follow-link, .unfollow-link").off("click"),m("#no-access-follow-collection--alerts-input").off("change"),m(".sign-in--personal a, .sign-in--create a").off("click"),m(".manage-interests-link").off("click"),m(".manage-interests-link-no-access").off("click"),m(".category-list-item").off("click"),m(".manage-interests--save-preferences .save-preferences-btn").off("click"),m(".alert-input input").off("click"),m(".follow-link, .unfollow-link").on("click",function(e){e.preventDefault(),App.isIndividual?C(m(this)):(m("#no-access-follow-collection").foundation("reveal","open"),y())}),m("#no-access-follow-collection--alerts-input").on("change",function(){y()}),m(".sign-in--personal a, .sign-in--create a").on("click",function(e){e.preventDefault();var t=m(this).attr("href");App.Global.addJnLogoParamToRefererUrl(),window.location=t}),m(".manage-interests-link").on("click",function(e){e.preventDefault(),c(),m(".manage-interests-modal").foundation("reveal","open"),m(".followed").parent().css("list-style-type","disc").css("color","#000")}),m(".manage-interests-link-no-access, .affinity-alert-signup").on("click",function(e){(e.preventDefault(),App.isIndividual)?(c(),m(".manage-interests-modal").foundation("reveal","open"),m(".followed").parent().css("list-style-type","disc").css("color","#000")):(m("#no-access-follow-collection").foundation("reveal","open"),y())}),m(".category-list-item").on("click",function(e){var t=m(this),n=t.parent();t.toggleClass("followed"),t.hasClass("followed")?n.css("list-style-type","disc").css("color","#000"):n.css("list-style-type","circle").css("color","#ccc");var i=m(".manage-interests--save-preferences .save-preferences-btn");i.hasClass("enabled")||i.addClass("enabled"),0<a.length&&a.hide()}),m(".manage-interests--save-preferences .save-preferences-btn").on("click",function(e){m(this).hasClass("enabled")&&t()}),m(".alert-input input").on("click",function(e){var t=m(".manage-interests--save-preferences .save-preferences-btn");t.hasClass("enabled")||t.addClass("enabled"),0<a.length&&a.hide()})}function y(){var e=m("#no-access-follow-collection"),t=e.find("#no-access-follow-collection--alerts-input"),n=e.find(".sign-in--create-link"),i=e.find(".sign-in--personal-link");SCM.SiteJS.toggleAlertFlagForSignInSignUpUrls(e,t,n,i,"collection")}function C(e){var n=e.data("categoryid");m.ajax({url:"/AMA/UpdateCollectionFollowStatus",type:"POST",data:{categoryId:n,isFollowed:e.hasClass("follow-link")},success:function(e){if(!1!==e){m(".collection-follow-links").parent().html(e),m(".manage-interests-modal").find("[data-categoryid='"+n+"']").toggleClass("followed");var t=m(".manage-interests--save-preferences");t.hasClass("enabled")||t.addClass("enabled"),h()}},error:function(e){alert("Cannot update collection follow status, please try again")}})}e.setInitialCategories=function(){c()},e.toggleCollectionAlertSignupFlag=function(){y()},e.init=function(e){if(h(),App.isCollection||App.isSplitScreen||App.isMyAccount){if(function(e){var t=m("#tbAbsrSolrSearch"),n=m("#searchedTerm");0<e.length?(t.hide(),n.show(),n.html('<span class="btn">'+e+'<a href="#" class="close">X</a></span>')):(t.show(),n.hide())}(function(){var e="",t=window.location.search.match(/[?|&]{1}q=([^&]*)/);return t&&(e=decodeURIComponent(t[1])),e}()),d(),p(),SCM.JSUtility.addStateToggle("#narrow-filter",".collection-facets--wrap",void 0,!0,!0),0<=document.referrer.indexOf("/jamanetworkopen")){var t=m("#facet-jama-network-open");0<t.length&&(t.prop("checked",!0),u(m(".drop-selected-publication"),[t],"All",f))}else{var n=m("#dropdown-publication .dropdown-chk-item:checked"),i=m("#dropdown-article-type .dropdown-chk-item:checked"),a=window.location.search,r=-1===a.indexOf("SiteID"),o=-1===a.indexOf("ArticleTypeDisplayName"),s=r||S(n.length,f),l=o||S(i.length,g);r&&m("#dropdown-publication .dropdown-item input:checkbox").prop("checked",!0),s&&m("#dropdown-publication-checkall").prop("checked",!0),o&&m("#dropdown-article-type .dropdown-item input:checkbox").prop("checked",!0),l&&m("#dropdown-article-type-checkall").prop("checked",!0),u(m(".drop-selected-publication"),n,"All",f),u(m(".drop-selected-article-type"),i,"All Article Types",g)}var c=m(".follow-link");if(App.isIndividual&&0<c.length&&(0<document.referrer.indexOf("/login/account/")||0<document.referrer.indexOf("/oauthsignin"))&&C(c),App.isMyAccount)m(".followed").parent().css("list-style-type","disc").css("color","#000")}}}(App.Collection=App.Collection||{},jQuery);var SCM=SCM||{};SCM.AsyncAds=SCM.AsyncAds||{},SCM.AsyncAds=function(){return{LoadHeaderAd:loadHeaderAd,LoadAds:loadAds,LoadCollectionAds:loadCollectionAds,LoadJobsAd:loadJobsAd};function loadAds(elementClass,elementAttrUrl,elementAttrParams,requestType){var domItems=$(elementClass),totalAds=domItems.length,firedAds=0;domItems.each(function(index,element){var domObj=$(this),dataUrl=domObj.attr(elementAttrUrl),dataParams=domObj.attr(elementAttrParams),params=buildParameters(dataParams);$.ajax({url:dataUrl,data:params,type:requestType,success:function(e){domObj.parent().replaceWith(e),++firedAds===totalAds&&SCM.EventEmitter.publish("AdFired")},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})})}function loadHeaderAd(elementClass,elementAttrUrl,elementAttrParams,requestType){var domItems=$(elementClass);domItems.each(function(){var domObj=$(this),dataUrl=domObj.attr(elementAttrUrl),dataParams=domObj.attr(elementAttrParams),params=buildParameters(dataParams);$.ajax({url:dataUrl,data:params,type:requestType,success:function(e){domObj.parent().replaceWith(e),SCM.EventEmitter.publish("HeaderAdFired")},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})})}function loadCollectionAds(elementClass,elementAttrUrl,elementAttrParams,requestType){var domItems=$(elementClass),totalAds=domItems.length,firedAds=0;domItems.each(function(index,element){var domObj=$(this),dataUrl=domObj.attr(elementAttrUrl),dataParams=domObj.attr(elementAttrParams),params=buildParameters(dataParams);$.ajax({url:dataUrl,data:params,type:requestType,success:function(e){domObj.parent().replaceWith(e),++firedAds===totalAds&&SCM.EventEmitter.publish("CollectionAdsFired")},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})})}function loadJobsAd(elementClass,elementAttrUrl,elementAttrParams,requestType){var domItems=$(elementClass);domItems.each(function(index,element){var domObj=$(this),dataUrl=domObj.attr(elementAttrUrl),dataParams=domObj.attr(elementAttrParams),params=buildParameters(dataParams);$.ajax({url:dataUrl,data:params,type:requestType,success:function(e){domObj.parent().replaceWith(e)},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})})}function buildParameters(e){var t=JSON.parse(e),n=t.parameters,i=t.dynamicParameters;if(void 0!==i&&void 0!==i.localParams&&"[REPLACE_WITH_LOCAL]"===i.localParams){var a=SCM.SharedWidgets.UserPersonalization.GetFromLocalStorage();i.localParams=a,n.Items=JSON.stringify(a)}return n}}();var App=App||{};!function(e,l){App.UserCommentConstants={},App.UserCommentConstants={limitedTextClassSelector:".comment-item--text-limited",readMoreLinkClassSelector:".comment-item--read-more-link",remainingCommentClassSelector:".comment-item--text-remaining",disclosureClassSelector:".comment-item--disclosure-collapse",expandAllCollapseLinkClassSelector:".comment-expand-all",separatorClassSelector:".comment-item--separator-collapse",commentBtnClassSelector:".comment-btn",noAccessRevealModalIdSelector:"#no-access-reveal",disclosureInputClassSelector:".disclosure-input",noAccessModalIdSelector:"#no-access-user-comments",accessibleShowClass:"accessible-show",ellipsisClass:"ellipsis",expandAllText:"EXPAND ALL",collapseText:"COLLAPSE",readLessText:"READ LESS",readMoreText:"READ MORE",isChecked:"is-checked",checked:"checked",potentialConflicts:"potentialConflicts"};var c=l(".comment-form-modal"),d=l(App.UserCommentConstants.disclosureInputClassSelector),a=c.find("#Title"),r=c.find("#Comment"),o=c.find(".submit-errors"),u=l(".submit-error-list"),i=l(".please-wait"),s=l("#divCommentSubmissionModal");function t(e){var t=e.text(),n=e.hasClass("comment-expand-all"),i=e.hasClass("comment-item--read-more-link"),a=i?e.parent():"",r={limitedText:n?l(App.UserCommentConstants.limitedTextClassSelector):a.find(App.UserCommentConstants.limitedTextClassSelector),readMoreLink:n?l(App.UserCommentConstants.readMoreLinkClassSelector):e,remainingComment:n?l(App.UserCommentConstants.remainingCommentClassSelector):a.find(App.UserCommentConstants.remainingCommentClassSelector),disclosure:n?l(App.UserCommentConstants.disclosureClassSelector):a.find(App.UserCommentConstants.disclosureClassSelector),separator:n?l(App.UserCommentConstants.separatorClassSelector):a.find(l(App.UserCommentConstants.separatorClassSelector)),expandAllCollapseLink:n?e:l(App.UserCommentConstants.expandAllCollapseLinkClassSelector),isExpandAllCollapseLink:n,isReadMoreLink:i};t===App.UserCommentConstants.expandAllText||t===App.UserCommentConstants.readMoreText?function(e){e.isExpandAllCollapseLink&&e.expandAllCollapseLink.text(App.UserCommentConstants.collapseText);e.limitedText.removeClass(App.UserCommentConstants.ellipsisClass),e.remainingComment.addClass(App.UserCommentConstants.accessibleShowClass),e.separator.addClass(App.UserCommentConstants.accessibleShowClass),e.disclosure.addClass(App.UserCommentConstants.accessibleShowClass),e.readMoreLink.text(App.UserCommentConstants.readLessText),e.isReadMoreLink&&l(App.UserCommentConstants.readMoreLinkClassSelector).text().indexOf(App.UserCommentConstants.readMoreText)<0&&e.expandAllCollapseLink.text(App.UserCommentConstants.collapseText)}(r):t!==App.UserCommentConstants.collapseText&&!App.UserCommentConstants.readLessText||function(e){e.isExpandAllCollapseLink&&e.expandAllCollapseLink.text(App.UserCommentConstants.expandAllText);e.limitedText.addClass(App.UserCommentConstants.ellipsisClass),e.remainingComment.removeClass(App.UserCommentConstants.accessibleShowClass),e.separator.removeClass(App.UserCommentConstants.accessibleShowClass),e.disclosure.removeClass(App.UserCommentConstants.accessibleShowClass),e.readMoreLink.text(App.UserCommentConstants.readMoreText),e.isReadMoreLink&&e.expandAllCollapseLink.text()===App.UserCommentConstants.collapseText&&e.expandAllCollapseLink.text(App.UserCommentConstants.expandAllText)}(r)}function n(){var e=l(".comment-form-submit-btn"),t=c.find(l(".author-name")).text(),n=c.find(l("input#Degrees")).val();t+=""!==n?", "+n:"",l.ajax({type:"POST",url:"/Content/SubmitUserComment",data:{author:t,affInstitutions:c.find(l("input#AffInstitution")).val(),disclosure:c.find(l("input#Disclosure")).val(),title:c.find("input#Title").val(),comment:c.find("textarea#Comment").val(),articleId:c.find(e).data("id"),recaptchaChallenge:"",recaptchaResponse:"",instanceName:c.find(e).data("instance")},success:function(e){e.Success?(l(".comment-form-modal").hide(),l(App.UserCommentConstants.commentBtnClassSelector).show(),function(){c.find("input, textarea").val(""),l("input[type='radio']").data(App.UserCommentConstants.isChecked,!1).prop(App.UserCommentConstants.checked,!1),d.hide(),u.empty();var e=c.find("textarea"),t=c.find(".comment-form--affiliation input"),n=c.find(".comment-form--degrees input"),i=c.find(".comment-form--comment-title input"),a=e.attr("maxlength"),r=t.attr("maxlength"),o=n.attr("maxlength"),s=i.attr("maxlength");c.find(".charactersRemaining").text(a),t.prev(".char-limit-text").text("Limit "+r+" characters"),n.prev(".char-limit-text").text("Limit "+o+" characters"),i.prev(".char-limit-text").text("Limit "+s+" characters")}()):alert("Comments not saved.  Please Try Again."),i.hide(),s.foundation("reveal","open")},error:function(e){i.hide(),alert("Comments not saved.  Please Try Again.")}})}function p(){var e=l("#no-access-user-comments"),t=e.find("#no-access-user-comments--alerts-input"),n=e.find(".sign-in--create-link"),i=e.find(".sign-in--personal-link");SCM.SiteJS.toggleAlertFlagForSignInSignUpUrls(e,t,n,i,"article")}function h(){l(".comment-expand-all, .comment-item--read-more-link").on("click",function(e){e.preventDefault(),t(l(this))}),l("#modal-opener").on("click",function(){App.isIndividual?(l(App.UserCommentConstants.commentBtnClassSelector).hide(),c.show(),l(".toolbar-comments-jumplink").attr("href","#user-comments-modal")):(l(App.UserCommentConstants.noAccessModalIdSelector).foundation("reveal","open"),p())}),l(".disclosure-radio label").on("click",function(e){e.preventDefault();var t=l("#"+l(this).attr("for")),n=t.attr("name");t.data(App.UserCommentConstants.isChecked)||(t.data(App.UserCommentConstants.isChecked,!0),t.prop(App.UserCommentConstants.checked,!0).change()),n===App.UserCommentConstants.potentialConflicts&&t.data(App.UserCommentConstants.isChecked)?d.show():d.hide(),l("input[type='radio']").not("#"+l(this).attr("for")).data(App.UserCommentConstants.isChecked,!1).prop(App.UserCommentConstants.checked,!1)}),l(".comment-form-submit-btn").on("click",function(e){e.preventDefault(),function(){var e=!0,t="";u.empty();var n=l("#potentialConflicts"),i=l("#noConflicts");return n.is(":checked")||i.is(":checked")?n.is(":checked")&&""===l("input#Disclosure").val().trim()&&(t+="<li>Describe your Conflict of Interest</li>",e=!1):(t+="<li>Conflicts of Interest Disclosure</li>",e=!1),""===a.val().trim()&&(t+="<li>Comment Title</li>",e=!1),""===r.val().trim()&&(t+="<li>Comment</li>",e=!1),e||""===t?o.hide():(u.append(t),o.show()),e}()&&(i.show(),n())}),l(".toolbar-comments, .artmet-comments-link").on("click",function(e){var t=this.href.split("#")[1];e.preventDefault(),(App.isAbstract||App.isMag||App.isChannelMag)&&function(e){var t=l("#"+e).offset().top-106;l("html, body").animate({scrollTop:t},500)}(t),App.isIndividual&&l("#"+t).click()}),l(".content-comment-link").on("click",function(e){e.preventDefault(),l(".tab-nav-comments").click(),App.isIndividual&&l("#modal-opener").click()}),l("#no-access-user-comments--alerts-input").on("change",function(){p()})}e.init=function(){App.isAnyArticle&&h()}}(App.UserComment=App.UserComment||{},jQuery);var App=App||{};!function(e,r,l){var t=window.location.protocol+"//"+window.location.host,n=l("#hfSolrAutoSuggestMinimumCharactersLength").val(),c="JN Learning";function o(e,t){return function(){t.apply(e,arguments)}}function i(e,t,n,i,a){this.searchInputControlId=document.getElementById(e),this.searchInputHintControlId=document.getElementById(t),this.autoCompleteResultsControlId=document.getElementById(n),this.isMicrosite=i,null!==a?(this.siteFilterDropDownSelectID=document.getElementById(a),this.siteFilterDropDownSelectID&&this.siteFilterDropDownSelectID.addEventListener("change",o(this,this.filterSuggestions),!1)):this.siteFilterDropDownSelectID=!1,null!==this.searchInputControlId&&(this.searchInputControlId.addEventListener("keydown",o(this,this.interceptKeys),!1),this.searchInputControlId.addEventListener("input",r.debounce(o(this,this.evaluateTerms),250),!1),l(this.searchInputControlId).on("blur",o(this,this.hideResultsList)),l(this.searchInputControlId).on("focus",o(this,this.showResultsList)))}(i.prototype={solrUrl:"/solr/SolrAutoSuggest",baseURL:t,inputTerms:!1,termsArray:!1,baseTerms:!1,terms:!1,results:[],selectedResult:-1,contentID:!1,isSearching:!1,noResultsFound:!1}).filterSuggestions=function(){this.selectedResult=-1,this.inputTerms.length>=n&&this.getSuggestions()},i.prototype.evaluateTerms=function(){if(this.resetSelection(),this.inputTerms=this.searchInputControlId.value.toLowerCase(),0===this.inputTerms.length)return this.noResultsFound=!1,this.isSearching=!1,void this.resetAutoComplete();this.inputTerms.length>=n&&(0===this.results.length||-1===this.results[0].value.indexOf(this.inputTerms))&&!this.isSearching&&this.getSuggestions(),(this.terms.length<=1||this.searchInputControlId.value!==this.inputTerms)&&this.clearHint()},i.prototype.getSiteURL=function(e,t){return e+(t?"&"+t:"")},i.prototype.getLearningURL=function(e,t){return t?t+e:"hd=learning&allSites=1"+e+"&f_HasCME=true"},i.prototype.getSearchParams=function(){var e="&SearchSourceType=24",t="";if(this.siteFilterDropDownSelectID){var n=l(".cs-selected").data("value");return t=SCM.SiteJS.getCookie("persistentSearchFilters"),void 0!==n?"J*"===n?this.getSiteURL(e,"allSites=1"):this.getSiteURL(e,"f_SiteID="+n):t?this.getSiteURL(e,t):this.getSiteURL(e,"allSites=1")}return"allSites=1"+e},i.prototype.getSiteID=function(){var e=this.contentID;return e&&"j"===e.toLowerCase().substring(0,1)&&(e=e.substring(1)),e},i.prototype.getsiteSID=function(){var e=!1;if(this.siteFilterDropDownSelectID){var t=l(this.siteFilterDropDownSelectID,"option:selected").val();-1===t.indexOf("*")&&(e=t)}return e},i.prototype.getSuggestions=function(){var n=this;n.contentID=n.getsiteSID(),n.isSearching=!0,l.ajax({url:n.solrUrl,data:n.contentID?{searchTerm:n.inputTerms,SiteID:n.getSiteID()}:{searchTerm:n.inputTerms},success:function(e){var t=e.SemanticFilterTopics;n.isSearching=!1,0<t.length?n.formatSuggestions(t):(n.noResultsFound=!0,n.resetAutoComplete())},cache:!0})},i.prototype.formatSuggestions=function(e){var t=e;this.results=[];var n=l("#"+this.siteFilterDropDownSelectID.id+" option:selected").text(),i=l(".cs-placeholder").text(),a="";if(0<t.length)if(this.inputTerms&&-1!==t[0].Key.indexOf(this.inputTerms)){for(var r=0;r<t.length;r+=1){var o=this.baseURL;a=n===c||n!==i&&i===c?"/learning/searchresults?q=":"/searchresults?q=";var s={value:t[r].Key,url:o+a+encodeURIComponent(t[r].Key)+"&"+this.getSearchParams(),position:"sr"+this.autoCompleteResultsControlId.id+(r+1)};this.results.push(s)}this.setHint(t[0].Key),this.appendResults()}else this.noResultsFound||this.inputTerms||this.getSuggestions();else this.resetAutoComplete()},i.prototype.setHint=function(e){this.searchInputControlId.value===this.inputTerms&&(this.searchInputHintControlId.value=e)},i.prototype.clearHint=function(){this.searchInputHintControlId.value=""},i.prototype.appendResults=function(){var e="";"term-list"!==this.autoCompleteResultsControlId.className&&(this.autoCompleteResultsControlId.className="term-list");for(var t=0;t<this.results.length;t++){var n=this.results[t];e+='<li><a href="'+n.url+'" id="'+n.position+'">'+this.results[t].value+"</a></li>"}this.autoCompleteResultsControlId.innerHTML=e},i.prototype.hideResultsList=function(e){var t=this;setTimeout(function(){t.autoCompleteResultsControlId.className="term-list term-list--hidden"},200)},i.prototype.showResultsList=function(){this.autoCompleteResultsControlId.className="term-list"},i.prototype.resetResultsList=function(e){this.autoCompleteResultsControlId.innerHTML="",this.hideResultsList()},i.prototype.resetSelection=function(){var e=-1!==this.selectedResult&&this.results[this.selectedResult].position;e&&l("#"+e).removeClass("active"),this.selectedResult=-1},i.prototype.resetAutoComplete=function(){this.results=[],this.resetResultsList(),this.clearHint()},i.prototype.completeTerms=function(){var e=this.searchInputControlId.selectionStart,t=this.searchInputControlId.selectionEnd;e===t&&t===this.inputTerms.length&&this.results&&0<this.results.length&&(this.searchInputControlId.value=this.results[0].value,this.evaluateTerms())},i.prototype.navigateResults=function(e){var t,n=this.selectedResult+e;oldResultId=-1!==this.selectedResult&&this.results[this.selectedResult].position,n<this.results.length&&-1<n?(t=this.results[n].position,oldResultId&&l("#"+oldResultId).removeClass("active"),l("#"+t).addClass("active"),this.selectedResult+=e):!oldResultId&&0<this.results.length?(t=this.results[this.results.length-1].position,l("#"+t).addClass("active"),this.selectedResult=this.results.length-1):this.resetSelection()},i.prototype.keyFunctions=function(e,t){if(9===t&&(e.preventDefault(),this.completeTerms()),38===t&&(e.preventDefault(),this.navigateResults(-1)),40===t&&(e.preventDefault(),this.navigateResults(1)),13===t&&-1<this.selectedResult){e.preventDefault();var n=l("#"+this.autoCompleteResultsControlId.id+" .active").attr("href");this.searchInputControlId.value=l("#"+this.autoCompleteResultsControlId.id+" .active").text(),this.searchInputHintControlId.value=l("#"+this.autoCompleteResultsControlId.id+" .active").text(),window.location=n}},i.prototype.interceptKeys=function(e){this.searchInputControlId.value.toLowerCase().length<=255&&this.keyFunctions(e,e.keyCode)},e.init=function(){new i("search-term","umbrellaSiteSearchInputHint","umbrellaSiteAutoCompleteResults",!1,"BodyContent_Header_ddlForSearch")}}(App.SearchAutoComplete=App.SearchAutoComplete||{},SCM.JSUtility,jQuery),launchTermsModal=function(){$(".js-tdm-content__action-button").click(function(){$("html").css("overflow","hidden"),$("#termsAndConditionsModal").foundation("reveal","open"),setTimeout(function(){$(".js-accept-trigger").appendTo(".js-terms-text__scrollable"),$("a.js-accept-input").addClass("disabled").removeClass("checked"),$(".download-link-wrap").addClass("hidden"),$(".js-terms-text__scrollable").scroll(function(){$.each($(".js-accept-trigger"),function(e,t){!function(e,t){var n=$(".js-terms-text__scrollable"),i=n.height(),a=(n.scrollTop(),$(e).offset().top-n.offset().top),r=a+$(e).height(),o=0<=a&&r<=i,s=(a<0&&0<r||0<a&&a<=n.height())&&t;return o||s}($(t),!0)||$("a.js-accept-input").removeClass("disabled")})}),$("a.js-accept-input").click(function(){$(this).addClass("checked"),$(this).closest(".term-accept__row").next(".download-link-wrap").removeClass("hidden")})},100)})},jQuery.fn.fastLiveFilter=function(e,r){r=r||{},e=jQuery(e);var t,o=this,n="",i=r.timeout||0,s=r.callback||function(){},l=r.type||"filter",c=e.children(),d=c.length,u=0<d?c[0].style.display:"block";if(s(d),"search"===l)for(var a=0;a<d;a++)c[a].style.display="none";return o.change(function(){for(var e,t,n=o.val().toLowerCase(),i=0,a=0;a<d;a++)e=c[a],t=r.selector?$(e).find(r.selector).text():e.textContent||e.innerText||"","search"!==l||0<n.trim().length?0<=t.toLowerCase().indexOf(n)?("none"==e.style.display&&(e.style.display=u),i++):"none"!=e.style.display&&(e.style.display="none"):e.style.display="none";return s(i),!1}).keydown(function(){clearTimeout(t),t=setTimeout(function(){o.val()!==n&&(n=o.val(),o.change())},i)}),this},$("#filter_input").fastLiveFilter("#filter_list"),$(document).ready(function(){launchTermsModal(),$(".js-filter-toggle").click(function(e){e.stopPropagation(),$(".fast-search").toggleClass("open"),$(".fast-search").hasClass("open")&&$("#filter_input").focus()}),$(document.body).on("click",function(e){var t=$(e.target);$(".fast-search.open").hasClass("open")&&0==t.parents(".fast-search-input__wrap").length&&$(".fast-search").removeClass("open")}),$(document.body).on("click",function(e){var t=$(e.target);$("#termsAndConditionsModal.open").hasClass("open")&&0==t.parents(".reveal-modal").length&&$("html").css("overflow","auto")}),$(".tdm_filter_name").each(function(){$(this).on("click",function(e){var t=$(this).parent().data("search"),n=!1;"*"==t&&(n=!0),$(".tdm-content__content-row").each(function(){$(this).hasClass(t)||n?$(this).show():$(this).hide()})})}),$(".js-tdm-content__action-button").each(function(){$(this).click(function(){$("#tcDownloadLink").attr("href",$(this).attr("data-downloadurl"))})})}),$(".close-reveal-modal").on("click",function(){$("html").css("overflow","auto")});var App=App||{};!function(e,r){e.init=function(e){r(".see-more-link").on("click",function(e){e.preventDefault();var t=this.parentNode.parentNode,n=r(t).children().find(".widget-dynamic-entry").length,i=r(t).children().find(".widget-dynamic-entry:last-child"),a=r(t).children().find(".remove-border");r(a).each(function(e,t){r(a[e]).removeClass("remove-border")}),r(t).children().find(".widget-dynamic-image-wrap").hide(),r(t).children().find(".fw-item").removeClass("fw-item"),r(t).children().find(".item-Hidden").removeClass("item-Hidden"),r(this).hide(),n%2==1&&(r(i).addClass("fw-item"),r(i).find(".widget-dynamic-image-wrap").show())}),$multipleWidgets=r(".multi-widget"),$multipleWidgets.length&&$multipleWidgets.each(function(e){var n=this.getAttribute("data-count"),t=r(this).children();t.length&&t.each(function(e){var t=this.getAttribute("data-display-order");parseInt(n)%2==1?parseInt(t,10)!==parseInt(n-1,10)&&(r(this).find(".fw-item").removeClass("fw-item"),r(this).find(".widget-dynamic-image-wrap").hide()):(r(this).find(".fw-item").removeClass("fw-item"),r(this).find(".widget-dynamic-image-wrap").hide())})})}}(App.UberContent=App.UberContent||{},jQuery);
//# sourceMappingURL=app.min.js.map
